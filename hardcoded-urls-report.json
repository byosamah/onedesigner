{
  "vercel.json": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "{\n  \"crons\": [\n    {\n      \"path\": \"/api/cron/embeddings\",\n      \"schedule\": \"0 3 * * *\"\n    }\n  ],\n  \"functions\": {\n    \"src/app/api/match/find-optimized/route.ts\": {\n      \"maxDuration\": 30\n    },\n    \"src/app/api/cron/embeddings/route.ts\": {\n      \"maxDuration\": 300\n    }\n  },\n  \"headers\": [\n    {\n      \"source\": \"/api/(.*)\",\n      \"headers\": [\n        {\n          \"key\": \"Access-Control-Allow-Origin\",\n          \"value\": \"https://onedesigner.app\"\n        },\n        {\n          \"key\": \"Access-Control-Allow-Methods\",\n          \"value\": \"GET, POST, PUT, DELETE, OPTIONS\"\n        },\n        {\n          \"key\": \"Access-Control-Allow-Headers\",\n          \"value\": \"Content-Type, Authorization\"\n        }\n      ]\n    }\n  ]\n}"
    }
  ],
  "test_image_upload.js": [
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 1,
      "context": "// Test script to verify image upload functionality\n// This simulates what happens when a designer uploads a profile picture\n\nconst { createClient } = require('@supabase/supabase-js')\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function testImageUpload() {\n  console.log('üß™ Testing image upload functionality...')\n  \n  try {\n    // Create a sample base64 image (small test image)\n    const sampleBase64Image = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChAFw0i6L1wAAAABJRU5ErkJggg=='\n    \n    // Check if the designbattlefield@gmail.com designer exists\n    const { data: existingDesigner, error: findError } = await supabase\n      .from('designers')\n      .select('id, email, avatar_url, first_name, last_name')\n      .eq('email', 'designbattlefield@gmail.com')\n      .single()\n    \n    if (findError) {\n      console.log('‚ùå Designer not found:', findError.message)\n      return\n    }\n    \n    console.log('‚úÖ Found designer:', existingDesigner)\n    console.log('Current avatar_url:', existingDesigner.avatar_url ? 'Has image' : 'No image')\n    \n    // Update this designer with a test profile picture\n    console.log('üì∏ Adding test profile picture...')\n    const { data: updatedDesigner, error: updateError } = await supabase\n      .from('designers')\n      .update({ \n        avatar_url: sampleBase64Image \n      })\n      .eq('id', existingDesigner.id)\n      .select()\n      .single()\n    \n    if (updateError) {\n      console.log('‚ùå Failed to update:', updateError.message)\n      return\n    }\n    \n    console.log('‚úÖ Successfully updated designer with test image!')\n    console.log('Updated record:', {\n      id: updatedDesigner.id,\n      email: updatedDesigner.email,\n      hasImage: !!updatedDesigner.avatar_url\n    })\n    \n    // Now test fetching through admin API\n    console.log('üîç Testing admin API...')\n    const adminResponse = await fetch('http://localhost:3001/api/admin/designers')\n    \n    if (adminResponse.ok) {\n      const adminData = await adminResponse.json()\n      const testDesigner = adminData.designers.find(d => d.email === 'designbattlefield@gmail.com')\n      \n      if (testDesigner) {\n        console.log('‚úÖ Admin API test:')\n        console.log('- Email:', testDesigner.email)\n        console.log('- Has avatar:', !!testDesigner.avatar)\n        console.log('- Avatar preview:', testDesigner.avatar ? testDesigner.avatar.substring(0, 50) + '...' : 'None')\n      } else {\n        console.log('‚ùå Designer not found in admin API response')\n      }\n    } else {\n      console.log('‚ùå Admin API request failed')\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Test error:', error.message)\n  }\n}\n\ntestImageUpload()"
    }
  ],
  "test-form-state.js": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 2,
      "context": "');\n\n  // Test 1: Submit brief with web-mobile category\n  const briefData = {\n    design_category: 'web-mobile',\n    project_description: 'Test project',\n    timeline_type: 'standard',\n    budget_range: 'mid'\n  };\n\n  try {\n    const response = await fetch('http://localhost:3000/api/briefs/public', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(briefData),\n    });\n\n    const result = await response.json();\n    console.log('‚úÖ Brief created with category:', briefData.design_category);\n    console.log('Brief ID:', result.brief?.id);\n\n    // Test 2: Check if matcher recognizes the category\n    const matchResponse = await fetch('http://localhost:3000/api/match', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ briefId: result.brief?.id }),\n    });\n\n    const matchResult = await matchResponse.json();\n    console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 2,
      "context": "');\n\n  // Test 1: Submit brief with web-mobile category\n  const briefData = {\n    design_category: 'web-mobile',\n    project_description: 'Test project',\n    timeline_type: 'standard',\n    budget_range: 'mid'\n  };\n\n  try {\n    const response = await fetch('http://localhost:3000/api/briefs/public', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(briefData),\n    });\n\n    const result = await response.json();\n    console.log('‚úÖ Brief created with category:', briefData.design_category);\n    console.log('Brief ID:', result.brief?.id);\n\n    // Test 2: Check if matcher recognizes the category\n    const matchResponse = await fetch('http://localhost:3000/api/match', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ briefId: result.brief?.id }),\n    });\n\n    const matchResult = await matchResponse.json();\n    console.log('"
    }
  ],
  "test-client-journey.js": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 2,
      "context": "');\n\n  // Step 1: Submit brief\n  console.log('Step 1: Submitting project brief...');\n  \n  const briefData = {\n    // Project Basics\n    design_category: 'web-mobile',\n    project_description: 'I need a modern e-commerce website for my fashion boutique. The site should have a clean, minimalist design with smooth animations and an easy checkout process.',\n    timeline_type: 'standard',\n    budget_range: 'mid',\n    \n    // Category-specific fields for web-mobile\n    digital_product_type: 'website',\n    number_of_screens: 'medium',\n    \n    // Working Preferences\n    involvement_level: 'milestone-checkins',\n    update_frequency: 'every-2-3-days',\n    communication_channels: ['email', 'video-calls'],\n    feedback_style: 'annotated-mockups',\n    change_flexibility: 'iterative-feedback'\n  };\n\n  try {\n    const briefResponse = await fetch('http://localhost:3000/api/briefs/public', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(briefData),\n    });\n\n    if (!briefResponse.ok) {\n      const errorText = await briefResponse.text();\n      console.log('Response status:', briefResponse.status);\n      console.log('Response body:', errorText);\n      throw new Error(`Brief submission failed: ${briefResponse.status}`);\n    }\n\n    const briefResult = await briefResponse.json();\n    console.log('‚úÖ Brief submitted successfully');\n    console.log('Response:', JSON.stringify(briefResult, null, 2));\n    \n    const briefId = briefResult.data?.brief?.id || briefResult.brief?.id;\n    const tempClientId = briefResult.data?.tempClientId || briefResult.tempClientId;\n    \n    console.log('Brief ID:', briefId);\n    console.log('Temp Client ID:', tempClientId);\n\n    // Step 2: Find matches\n    console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 3,
      "context": "Step 2: Finding AI matches...');\n    \n    const matchResponse = await fetch('http://localhost:3000/api/match', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ briefId: briefId }),\n    });\n\n    if (!matchResponse.ok) {\n      const errorText = await matchResponse.text();\n      console.log('Match response status:', matchResponse.status);\n      console.log('Match response body:', errorText);\n      throw new Error(`Match finding failed: ${matchResponse.status}`);\n    }\n\n    const matchResult = await matchResponse.json();\n    console.log('Match result:', JSON.stringify(matchResult, null, 2));\n    \n    const matches = matchResult.data?.matches || matchResult.matches || [];\n    console.log('‚úÖ Matches found:', matches.length);\n    \n    if (matches.length > 0) {\n      const bestMatch = matches[0];\n      console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 5,
      "context": "Step 3: Getting match details...');\n      \n      // First, let's check if we can access the match page\n      const matchPageUrl = `http://localhost:3000/match/${briefId}`;\n      console.log('Match page URL:', matchPageUrl);\n      \n      // Step 4: Simulate unlocking designer\n      console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 6,
      "context": "Step 4: Attempting to unlock designer...');\n      console.log('Note: Unlock requires authentication, so it will fail for temp client');\n      console.log('In real flow, user would need to create account or purchase credits');\n      \n      // Try to unlock (this will fail without auth)\n      const unlockResponse = await fetch(`http://localhost:3000/api/client/matches/${bestMatch.id}/unlock`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!unlockResponse.ok) {\n        const error = await unlockResponse.json();\n        console.log('‚ùå Unlock failed (expected):', error.message);\n        console.log('User would need to sign up/login and have credits to unlock');\n      }\n    }\n\n    console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 9,
      "context": "Next steps for real user:');\n    console.log('- View match at:', `http://localhost:3000/match/${briefId}`);\n    console.log('- Sign up or login to unlock designer contact');\n\n  } catch (error) {\n    console.error('‚ùå Error in client journey:', error.message);\n  }\n};\n\n// Run the test\ntestClientJourney();"
    }
  ],
  "add-test-designers.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 1,
      "context": "const fetch = require('node-fetch');\n\nasync function createTestDesigner() {\n  try {\n    const response = await fetch('https://onedesigner2-2n1atvjqx-onedesigners-projects.vercel.app/api/test/create-designer', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        firstName: 'Sarah',\n        lastName: 'Mitchell',\n        email: 'sarah.mitchell@example.com',\n        title: 'Senior UI/UX Designer',\n        categories: ['web-mobile-design', 'branding-logo-design'],\n        yearsExperience: 8,\n        bio: 'Passionate about creating intuitive and beautiful digital experiences.',\n        styles: ['Minimalist', 'Modern', 'Clean'],\n        industries: ['Technology', 'SaaS', 'Mobile Apps'],\n        city: 'San Francisco',\n        country: 'USA',\n        hourlyRate: 150,\n        isApproved: true\n      })\n    });\n\n    const result = await response.text();\n    console.log('Response status:', response.status);\n    console.log('Response:', result);\n\n    if (response.ok) {\n      console.log('‚úÖ Test designer created successfully');\n    } else {\n      console.log('‚ùå Failed to create test designer');\n    }\n  } catch (error) {\n    console.error('Error:', error.message);\n  }\n}\n\ncreateTestDesigner();"
    }
  ],
  "VERCEL_ENV_SETUP.md": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Vercel Environment Variables Setup for OneDesigner.app\n\n## üìã Step-by-Step Vercel Configuration\n\n### 1. Access Vercel Dashboard\n1. Go to [vercel.com/dashboard](https://vercel.com/dashboard)\n2. Select your `onedesigner` project\n3. Go to **Settings** ‚Üí **Environment Variables**\n\n### 2. Add Environment Variables\n\nCopy and paste these **exact** environment variables into Vercel:\n\n#### üåê Domain & App Configuration\n```\nNEXT_PUBLIC_APP_URL\nhttps://onedesigner.app\n```\n\n#### üîê Authentication & Security\n```\nNEXTAUTH_URL\nhttps://onedesigner.app\n```\n\n```\nNEXTAUTH_SECRET\n898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\n```\n\n```\nCRON_SECRET\n20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n```\n\n#### üóÑÔ∏è Supabase Configuration\n```\nNEXT_PUBLIC_SUPABASE_URL\nhttps://frwchtwxpnrlpzksupgm.supabase.co\n```\n\n```\nNEXT_PUBLIC_SUPABASE_ANON_KEY\n[GET FROM YOUR SUPABASE DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n```\nSUPABASE_SERVICE_ROLE_KEY\n[GET FROM YOUR SUPABASE DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n#### ü§ñ AI Configuration\n```\nDEEPSEEK_API_KEY\nsk-7404080c428443b598ee8c76382afb39\n```\n\n#### üìß Email Configuration\n```\nEMAIL_FROM\nmagic@onedesigner.app\n```\n\n```\nRESEND_API_KEY\n[GET FROM YOUR RESEND DASHBOARD ‚Üí API Keys]\n```\n\n#### üí≥ Payment Configuration\n```\nLEMONSQUEEZY_API_KEY\n[GET FROM LEMONSQUEEZY DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n```\nLEMONSQUEEZY_WEBHOOK_SECRET\n[GET FROM LEMONSQUEEZY WEBHOOK SETTINGS]\n```\n\n```\nLEMONSQUEEZY_STORE_ID\n[GET FROM LEMONSQUEEZY DASHBOARD ‚Üí Stores]\n```\n\n#### üåç Environment\n```\nNODE_ENV\nproduction\n```\n\n#### üìä Analytics (Optional)\n```\nNEXT_PUBLIC_VERCEL_ANALYTICS_ID\n[AUTO-GENERATED WHEN YOU ENABLE VERCEL ANALYTICS]\n```\n\n## üìù How to Find Missing Values\n\n### Supabase Keys:\n1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)\n2. Select your project: `frwchtwxpnrlpzksupgm`\n3. Go to **Settings** ‚Üí **API**\n4. Copy:\n   - `anon` key ‚Üí `NEXT_PUBLIC_SUPABASE_ANON_KEY`\n   - `service_role` key ‚Üí `SUPABASE_SERVICE_ROLE_KEY`\n\n### Resend API Key:\n1. Go to [resend.com/api-keys](https://resend.com/api-keys)\n2. Create a new API key\n3. Copy the key ‚Üí `RESEND_API_KEY`\n\n### LemonSqueezy Configuration:\n1. Go to [app.lemonsqueezy.com/settings/api](https://app.lemonsqueezy.com/settings/api)\n2. Create API key ‚Üí `LEMONSQUEEZY_API_KEY`\n3. Go to **Webhooks** ‚Üí Create webhook\n4. Set URL: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n5. Copy signing secret ‚Üí `LEMONSQUEEZY_WEBHOOK_SECRET`\n6. Get Store ID from **Stores** page ‚Üí `LEMONSQUEEZY_STORE_ID`\n\n## ‚úÖ Verification Checklist\n\nAfter adding all variables:\n\n- [ ] Total variables: 13-14 (analytics optional)\n- [ ] All secrets are unique and secure\n- [ ] Supabase keys match your project\n- [ ] LemonSqueezy webhook points to production URL\n- [ ] Email sender domain matches `onedesigner.app`\n- [ ] NODE_ENV is set to `production`\n\n## üö® Important Security Notes\n\n1. **Never commit these values to Git**\n2. **Keep secrets secure and unique**\n3. **Regenerate secrets if compromised**\n4. **Use production keys only for production**\n\n## üîÑ After Setting Variables\n\n1. Go to **Deployments** tab in Vercel\n2. Click **Redeploy** on your latest deployment\n3. Select **Use existing Build Cache: No**\n4. Click **Redeploy**\n\nThis ensures the new environment variables are applied to your deployment.\n\n## üìû Support\n\nIf you encounter issues:\n- Supabase keys not working ‚Üí Check project URL matches\n- LemonSqueezy webhook failing ‚Üí Verify webhook URL and secret\n- Email not sending ‚Üí Verify Resend domain setup\n- Authentication issues ‚Üí Check NEXTAUTH_SECRET and URL"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Vercel Environment Variables Setup for OneDesigner.app\n\n## üìã Step-by-Step Vercel Configuration\n\n### 1. Access Vercel Dashboard\n1. Go to [vercel.com/dashboard](https://vercel.com/dashboard)\n2. Select your `onedesigner` project\n3. Go to **Settings** ‚Üí **Environment Variables**\n\n### 2. Add Environment Variables\n\nCopy and paste these **exact** environment variables into Vercel:\n\n#### üåê Domain & App Configuration\n```\nNEXT_PUBLIC_APP_URL\nhttps://onedesigner.app\n```\n\n#### üîê Authentication & Security\n```\nNEXTAUTH_URL\nhttps://onedesigner.app\n```\n\n```\nNEXTAUTH_SECRET\n898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\n```\n\n```\nCRON_SECRET\n20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n```\n\n#### üóÑÔ∏è Supabase Configuration\n```\nNEXT_PUBLIC_SUPABASE_URL\nhttps://frwchtwxpnrlpzksupgm.supabase.co\n```\n\n```\nNEXT_PUBLIC_SUPABASE_ANON_KEY\n[GET FROM YOUR SUPABASE DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n```\nSUPABASE_SERVICE_ROLE_KEY\n[GET FROM YOUR SUPABASE DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n#### ü§ñ AI Configuration\n```\nDEEPSEEK_API_KEY\nsk-7404080c428443b598ee8c76382afb39\n```\n\n#### üìß Email Configuration\n```\nEMAIL_FROM\nmagic@onedesigner.app\n```\n\n```\nRESEND_API_KEY\n[GET FROM YOUR RESEND DASHBOARD ‚Üí API Keys]\n```\n\n#### üí≥ Payment Configuration\n```\nLEMONSQUEEZY_API_KEY\n[GET FROM LEMONSQUEEZY DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n```\nLEMONSQUEEZY_WEBHOOK_SECRET\n[GET FROM LEMONSQUEEZY WEBHOOK SETTINGS]\n```\n\n```\nLEMONSQUEEZY_STORE_ID\n[GET FROM LEMONSQUEEZY DASHBOARD ‚Üí Stores]\n```\n\n#### üåç Environment\n```\nNODE_ENV\nproduction\n```\n\n#### üìä Analytics (Optional)\n```\nNEXT_PUBLIC_VERCEL_ANALYTICS_ID\n[AUTO-GENERATED WHEN YOU ENABLE VERCEL ANALYTICS]\n```\n\n## üìù How to Find Missing Values\n\n### Supabase Keys:\n1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)\n2. Select your project: `frwchtwxpnrlpzksupgm`\n3. Go to **Settings** ‚Üí **API**\n4. Copy:\n   - `anon` key ‚Üí `NEXT_PUBLIC_SUPABASE_ANON_KEY`\n   - `service_role` key ‚Üí `SUPABASE_SERVICE_ROLE_KEY`\n\n### Resend API Key:\n1. Go to [resend.com/api-keys](https://resend.com/api-keys)\n2. Create a new API key\n3. Copy the key ‚Üí `RESEND_API_KEY`\n\n### LemonSqueezy Configuration:\n1. Go to [app.lemonsqueezy.com/settings/api](https://app.lemonsqueezy.com/settings/api)\n2. Create API key ‚Üí `LEMONSQUEEZY_API_KEY`\n3. Go to **Webhooks** ‚Üí Create webhook\n4. Set URL: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n5. Copy signing secret ‚Üí `LEMONSQUEEZY_WEBHOOK_SECRET`\n6. Get Store ID from **Stores** page ‚Üí `LEMONSQUEEZY_STORE_ID`\n\n## ‚úÖ Verification Checklist\n\nAfter adding all variables:\n\n- [ ] Total variables: 13-14 (analytics optional)\n- [ ] All secrets are unique and secure\n- [ ] Supabase keys match your project\n- [ ] LemonSqueezy webhook points to production URL\n- [ ] Email sender domain matches `onedesigner.app`\n- [ ] NODE_ENV is set to `production`\n\n## üö® Important Security Notes\n\n1. **Never commit these values to Git**\n2. **Keep secrets secure and unique**\n3. **Regenerate secrets if compromised**\n4. **Use production keys only for production**\n\n## üîÑ After Setting Variables\n\n1. Go to **Deployments** tab in Vercel\n2. Click **Redeploy** on your latest deployment\n3. Select **Use existing Build Cache: No**\n4. Click **Redeploy**\n\nThis ensures the new environment variables are applied to your deployment.\n\n## üìû Support\n\nIf you encounter issues:\n- Supabase keys not working ‚Üí Check project URL matches\n- LemonSqueezy webhook failing ‚Üí Verify webhook URL and secret\n- Email not sending ‚Üí Verify Resend domain setup\n- Authentication issues ‚Üí Check NEXTAUTH_SECRET and URL"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Vercel Environment Variables Setup for OneDesigner.app\n\n## üìã Step-by-Step Vercel Configuration\n\n### 1. Access Vercel Dashboard\n1. Go to [vercel.com/dashboard](https://vercel.com/dashboard)\n2. Select your `onedesigner` project\n3. Go to **Settings** ‚Üí **Environment Variables**\n\n### 2. Add Environment Variables\n\nCopy and paste these **exact** environment variables into Vercel:\n\n#### üåê Domain & App Configuration\n```\nNEXT_PUBLIC_APP_URL\nhttps://onedesigner.app\n```\n\n#### üîê Authentication & Security\n```\nNEXTAUTH_URL\nhttps://onedesigner.app\n```\n\n```\nNEXTAUTH_SECRET\n898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\n```\n\n```\nCRON_SECRET\n20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n```\n\n#### üóÑÔ∏è Supabase Configuration\n```\nNEXT_PUBLIC_SUPABASE_URL\nhttps://frwchtwxpnrlpzksupgm.supabase.co\n```\n\n```\nNEXT_PUBLIC_SUPABASE_ANON_KEY\n[GET FROM YOUR SUPABASE DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n```\nSUPABASE_SERVICE_ROLE_KEY\n[GET FROM YOUR SUPABASE DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n#### ü§ñ AI Configuration\n```\nDEEPSEEK_API_KEY\nsk-7404080c428443b598ee8c76382afb39\n```\n\n#### üìß Email Configuration\n```\nEMAIL_FROM\nmagic@onedesigner.app\n```\n\n```\nRESEND_API_KEY\n[GET FROM YOUR RESEND DASHBOARD ‚Üí API Keys]\n```\n\n#### üí≥ Payment Configuration\n```\nLEMONSQUEEZY_API_KEY\n[GET FROM LEMONSQUEEZY DASHBOARD ‚Üí Settings ‚Üí API]\n```\n\n```\nLEMONSQUEEZY_WEBHOOK_SECRET\n[GET FROM LEMONSQUEEZY WEBHOOK SETTINGS]\n```\n\n```\nLEMONSQUEEZY_STORE_ID\n[GET FROM LEMONSQUEEZY DASHBOARD ‚Üí Stores]\n```\n\n#### üåç Environment\n```\nNODE_ENV\nproduction\n```\n\n#### üìä Analytics (Optional)\n```\nNEXT_PUBLIC_VERCEL_ANALYTICS_ID\n[AUTO-GENERATED WHEN YOU ENABLE VERCEL ANALYTICS]\n```\n\n## üìù How to Find Missing Values\n\n### Supabase Keys:\n1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)\n2. Select your project: `frwchtwxpnrlpzksupgm`\n3. Go to **Settings** ‚Üí **API**\n4. Copy:\n   - `anon` key ‚Üí `NEXT_PUBLIC_SUPABASE_ANON_KEY`\n   - `service_role` key ‚Üí `SUPABASE_SERVICE_ROLE_KEY`\n\n### Resend API Key:\n1. Go to [resend.com/api-keys](https://resend.com/api-keys)\n2. Create a new API key\n3. Copy the key ‚Üí `RESEND_API_KEY`\n\n### LemonSqueezy Configuration:\n1. Go to [app.lemonsqueezy.com/settings/api](https://app.lemonsqueezy.com/settings/api)\n2. Create API key ‚Üí `LEMONSQUEEZY_API_KEY`\n3. Go to **Webhooks** ‚Üí Create webhook\n4. Set URL: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n5. Copy signing secret ‚Üí `LEMONSQUEEZY_WEBHOOK_SECRET`\n6. Get Store ID from **Stores** page ‚Üí `LEMONSQUEEZY_STORE_ID`\n\n## ‚úÖ Verification Checklist\n\nAfter adding all variables:\n\n- [ ] Total variables: 13-14 (analytics optional)\n- [ ] All secrets are unique and secure\n- [ ] Supabase keys match your project\n- [ ] LemonSqueezy webhook points to production URL\n- [ ] Email sender domain matches `onedesigner.app`\n- [ ] NODE_ENV is set to `production`\n\n## üö® Important Security Notes\n\n1. **Never commit these values to Git**\n2. **Keep secrets secure and unique**\n3. **Regenerate secrets if compromised**\n4. **Use production keys only for production**\n\n## üîÑ After Setting Variables\n\n1. Go to **Deployments** tab in Vercel\n2. Click **Redeploy** on your latest deployment\n3. Select **Use existing Build Cache: No**\n4. Click **Redeploy**\n\nThis ensures the new environment variables are applied to your deployment.\n\n## üìû Support\n\nIf you encounter issues:\n- Supabase keys not working ‚Üí Check project URL matches\n- LemonSqueezy webhook failing ‚Üí Verify webhook URL and secret\n- Email not sending ‚Üí Verify Resend domain setup\n- Authentication issues ‚Üí Check NEXTAUTH_SECRET and URL"
    }
  ],
  "SUPABASE_SETUP.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Supabase Setup Instructions\n\n## 1. Create Supabase Project\n\n1. Go to [supabase.com](https://supabase.com) and create an account\n2. Click \"New Project\"\n3. Fill in:\n   - Project name: `onedesigner`\n   - Database password: (save this securely!)\n   - Region: Choose closest to your users\n4. Click \"Create new project\" and wait for setup\n\n## 2. Get Your API Keys\n\nAfter project creation:\n1. Go to Settings ‚Üí API\n2. Copy these values to your `.env.local`:\n   ```\n   NEXT_PUBLIC_SUPABASE_URL=<your-project-url>\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>\n   SUPABASE_SERVICE_ROLE_KEY=<your-service-role-key>\n   ```\n\n## 3. Get Database URL\n\n1. Go to Settings ‚Üí Database\n2. Copy the \"Connection string\" ‚Üí \"URI\"\n3. Add to `.env.local`:\n   ```\n   DATABASE_URL=<your-database-url>\n   ```\n\n## 4. Run Database Migrations\n\n### Option A: Using Supabase Dashboard (Recommended)\n1. Go to SQL Editor in Supabase Dashboard\n2. Copy and paste each migration file in order:\n   - First: `supabase/migrations/001_initial_schema.sql`\n   - Then: `supabase/migrations/002_rls_policies.sql`\n3. Click \"Run\" for each\n\n### Option B: Using Supabase CLI\n```bash\n# Install Supabase CLI\nnpm install -g supabase\n\n# Login to Supabase\nsupabase login\n\n# Link your project\nsupabase link --project-ref <your-project-ref>\n\n# Run migrations\nsupabase db push\n```\n\n## 5. Configure Email Settings (Optional for Development)\n\nFor production email sending:\n1. Get a Resend API key from [resend.com](https://resend.com)\n2. Add to `.env.local`:\n   ```\n   RESEND_API_KEY=<your-resend-api-key>\n   ```\n\nFor development, OTPs will be logged to the console.\n\n## 6. Test Your Setup\n\n1. Restart your Next.js dev server:\n   ```bash\n   npm run dev\n   ```\n\n2. Visit http://localhost:3000\n3. Try the client flow:\n   - Click \"I need a designer\"\n   - Fill out the brief\n   - Enter your email\n   - Check console for OTP (in development)\n   - Enter the OTP\n\n## 7. Common Issues\n\n### \"Failed to send OTP\" error\n- Check your Supabase credentials in `.env.local`\n- Ensure tables are created (run migrations)\n\n### \"Invalid or expired code\" error\n- OTPs expire after 10 minutes\n- Check console for the correct OTP\n- Make sure you're using the latest code\n\n### Database connection errors\n- Verify your DATABASE_URL is correct\n- Check if your Supabase project is active\n- Ensure your IP is allowed (check Database Settings ‚Üí Connection Pooling)\n\n## 8. Next Steps\n\n1. Set up Lemon Squeezy for payments\n2. Configure OpenAI for AI matching\n3. Set up Resend for production emails\n4. Deploy to Vercel\n\n## Development Tips\n\n- OTPs are logged to console in development (when RESEND_API_KEY is not set)\n- Use `npx prisma studio` to view your database\n- Check Supabase Dashboard ‚Üí Table Editor to see your data\n- Monitor API usage in Supabase Dashboard ‚Üí Usage"
    }
  ],
  "SUPABASE_EMAIL_SETUP.md": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "# Supabase Email Configuration\n\n## Enable Email Authentication in Supabase\n\n1. **Go to your Supabase Dashboard**\n   - Navigate to [Authentication ‚Üí Providers](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/providers)\n\n2. **Configure Email Provider**\n   - Email should be enabled by default\n   - Make sure \"Enable Email provider\" is ON\n   - Configure these settings:\n     - **Enable email confirmations**: OFF (for easier testing)\n     - **Enable Magic Link**: OFF\n     - **Enable OTP**: ON\n     - **OTP expiry duration**: 3600 (1 hour)\n\n3. **Email Templates** (Optional)\n   - Go to [Authentication ‚Üí Email Templates](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/templates)\n   - You can customize the OTP email template\n   - Default template variables:\n     - `{{ .Token }}` - The 6-digit OTP code\n     - `{{ .SiteURL }}` - Your site URL\n     - `{{ .Email }}` - User's email\n\n4. **SMTP Configuration** (For Production)\n   - Go to [Settings ‚Üí SMTP](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/settings/smtp)\n   - By default, Supabase uses their email service (limited to 30 emails/hour)\n   - For production, configure your own SMTP:\n     - Sender email\n     - Sender name\n     - SMTP host, port, user, pass\n\n## Testing Email OTP Flow\n\n1. **In Development (Default Supabase Email)**\n   - Emails will be sent from `noreply@mail.app.supabase.io`\n   - Check your spam folder\n   - Limited to 30 emails per hour\n\n2. **View Email Logs**\n   - Go to [Authentication ‚Üí Logs](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/logs)\n   - You can see all authentication attempts and email sends\n\n3. **For Local Testing**\n   - You can use [Inbucket](https://github.com/inbucket/inbucket) for local email testing\n   - Or check the Supabase logs for the OTP codes\n\n## Common Issues\n\n### \"Email rate limit exceeded\"\n- You've hit the 30 emails/hour limit\n- Solution: Wait an hour or configure custom SMTP\n\n### OTP not arriving\n- Check spam folder\n- Check email logs in Supabase dashboard\n- Verify email provider is enabled\n\n### \"Invalid OTP\" error\n- OTPs expire after 1 hour (configurable)\n- Make sure you're using the latest code\n- Check that you're entering all 6 digits\n\n## Next Steps\n\n1. For production, set up a proper SMTP provider:\n   - SendGrid\n   - AWS SES\n   - Postmark\n   - Or any SMTP service\n\n2. Customize email templates for branding\n\n3. Consider adding:\n   - Rate limiting on your API endpoints\n   - Captcha for preventing abuse\n   - Email verification requirements"
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "# Supabase Email Configuration\n\n## Enable Email Authentication in Supabase\n\n1. **Go to your Supabase Dashboard**\n   - Navigate to [Authentication ‚Üí Providers](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/providers)\n\n2. **Configure Email Provider**\n   - Email should be enabled by default\n   - Make sure \"Enable Email provider\" is ON\n   - Configure these settings:\n     - **Enable email confirmations**: OFF (for easier testing)\n     - **Enable Magic Link**: OFF\n     - **Enable OTP**: ON\n     - **OTP expiry duration**: 3600 (1 hour)\n\n3. **Email Templates** (Optional)\n   - Go to [Authentication ‚Üí Email Templates](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/templates)\n   - You can customize the OTP email template\n   - Default template variables:\n     - `{{ .Token }}` - The 6-digit OTP code\n     - `{{ .SiteURL }}` - Your site URL\n     - `{{ .Email }}` - User's email\n\n4. **SMTP Configuration** (For Production)\n   - Go to [Settings ‚Üí SMTP](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/settings/smtp)\n   - By default, Supabase uses their email service (limited to 30 emails/hour)\n   - For production, configure your own SMTP:\n     - Sender email\n     - Sender name\n     - SMTP host, port, user, pass\n\n## Testing Email OTP Flow\n\n1. **In Development (Default Supabase Email)**\n   - Emails will be sent from `noreply@mail.app.supabase.io`\n   - Check your spam folder\n   - Limited to 30 emails per hour\n\n2. **View Email Logs**\n   - Go to [Authentication ‚Üí Logs](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/logs)\n   - You can see all authentication attempts and email sends\n\n3. **For Local Testing**\n   - You can use [Inbucket](https://github.com/inbucket/inbucket) for local email testing\n   - Or check the Supabase logs for the OTP codes\n\n## Common Issues\n\n### \"Email rate limit exceeded\"\n- You've hit the 30 emails/hour limit\n- Solution: Wait an hour or configure custom SMTP\n\n### OTP not arriving\n- Check spam folder\n- Check email logs in Supabase dashboard\n- Verify email provider is enabled\n\n### \"Invalid OTP\" error\n- OTPs expire after 1 hour (configurable)\n- Make sure you're using the latest code\n- Check that you're entering all 6 digits\n\n## Next Steps\n\n1. For production, set up a proper SMTP provider:\n   - SendGrid\n   - AWS SES\n   - Postmark\n   - Or any SMTP service\n\n2. Customize email templates for branding\n\n3. Consider adding:\n   - Rate limiting on your API endpoints\n   - Captcha for preventing abuse\n   - Email verification requirements"
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "# Supabase Email Configuration\n\n## Enable Email Authentication in Supabase\n\n1. **Go to your Supabase Dashboard**\n   - Navigate to [Authentication ‚Üí Providers](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/providers)\n\n2. **Configure Email Provider**\n   - Email should be enabled by default\n   - Make sure \"Enable Email provider\" is ON\n   - Configure these settings:\n     - **Enable email confirmations**: OFF (for easier testing)\n     - **Enable Magic Link**: OFF\n     - **Enable OTP**: ON\n     - **OTP expiry duration**: 3600 (1 hour)\n\n3. **Email Templates** (Optional)\n   - Go to [Authentication ‚Üí Email Templates](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/templates)\n   - You can customize the OTP email template\n   - Default template variables:\n     - `{{ .Token }}` - The 6-digit OTP code\n     - `{{ .SiteURL }}` - Your site URL\n     - `{{ .Email }}` - User's email\n\n4. **SMTP Configuration** (For Production)\n   - Go to [Settings ‚Üí SMTP](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/settings/smtp)\n   - By default, Supabase uses their email service (limited to 30 emails/hour)\n   - For production, configure your own SMTP:\n     - Sender email\n     - Sender name\n     - SMTP host, port, user, pass\n\n## Testing Email OTP Flow\n\n1. **In Development (Default Supabase Email)**\n   - Emails will be sent from `noreply@mail.app.supabase.io`\n   - Check your spam folder\n   - Limited to 30 emails per hour\n\n2. **View Email Logs**\n   - Go to [Authentication ‚Üí Logs](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/logs)\n   - You can see all authentication attempts and email sends\n\n3. **For Local Testing**\n   - You can use [Inbucket](https://github.com/inbucket/inbucket) for local email testing\n   - Or check the Supabase logs for the OTP codes\n\n## Common Issues\n\n### \"Email rate limit exceeded\"\n- You've hit the 30 emails/hour limit\n- Solution: Wait an hour or configure custom SMTP\n\n### OTP not arriving\n- Check spam folder\n- Check email logs in Supabase dashboard\n- Verify email provider is enabled\n\n### \"Invalid OTP\" error\n- OTPs expire after 1 hour (configurable)\n- Make sure you're using the latest code\n- Check that you're entering all 6 digits\n\n## Next Steps\n\n1. For production, set up a proper SMTP provider:\n   - SendGrid\n   - AWS SES\n   - Postmark\n   - Or any SMTP service\n\n2. Customize email templates for branding\n\n3. Consider adding:\n   - Rate limiting on your API endpoints\n   - Captcha for preventing abuse\n   - Email verification requirements"
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "# Supabase Email Configuration\n\n## Enable Email Authentication in Supabase\n\n1. **Go to your Supabase Dashboard**\n   - Navigate to [Authentication ‚Üí Providers](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/providers)\n\n2. **Configure Email Provider**\n   - Email should be enabled by default\n   - Make sure \"Enable Email provider\" is ON\n   - Configure these settings:\n     - **Enable email confirmations**: OFF (for easier testing)\n     - **Enable Magic Link**: OFF\n     - **Enable OTP**: ON\n     - **OTP expiry duration**: 3600 (1 hour)\n\n3. **Email Templates** (Optional)\n   - Go to [Authentication ‚Üí Email Templates](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/templates)\n   - You can customize the OTP email template\n   - Default template variables:\n     - `{{ .Token }}` - The 6-digit OTP code\n     - `{{ .SiteURL }}` - Your site URL\n     - `{{ .Email }}` - User's email\n\n4. **SMTP Configuration** (For Production)\n   - Go to [Settings ‚Üí SMTP](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/settings/smtp)\n   - By default, Supabase uses their email service (limited to 30 emails/hour)\n   - For production, configure your own SMTP:\n     - Sender email\n     - Sender name\n     - SMTP host, port, user, pass\n\n## Testing Email OTP Flow\n\n1. **In Development (Default Supabase Email)**\n   - Emails will be sent from `noreply@mail.app.supabase.io`\n   - Check your spam folder\n   - Limited to 30 emails per hour\n\n2. **View Email Logs**\n   - Go to [Authentication ‚Üí Logs](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/auth/logs)\n   - You can see all authentication attempts and email sends\n\n3. **For Local Testing**\n   - You can use [Inbucket](https://github.com/inbucket/inbucket) for local email testing\n   - Or check the Supabase logs for the OTP codes\n\n## Common Issues\n\n### \"Email rate limit exceeded\"\n- You've hit the 30 emails/hour limit\n- Solution: Wait an hour or configure custom SMTP\n\n### OTP not arriving\n- Check spam folder\n- Check email logs in Supabase dashboard\n- Verify email provider is enabled\n\n### \"Invalid OTP\" error\n- OTPs expire after 1 hour (configurable)\n- Make sure you're using the latest code\n- Check that you're entering all 6 digits\n\n## Next Steps\n\n1. For production, set up a proper SMTP provider:\n   - SendGrid\n   - AWS SES\n   - Postmark\n   - Or any SMTP service\n\n2. Customize email templates for branding\n\n3. Consider adding:\n   - Rate limiting on your API endpoints\n   - Captcha for preventing abuse\n   - Email verification requirements"
    }
  ],
  "SPEED_OPTIMIZATION_SETUP.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Speed Optimization Setup Guide\n\nThis guide will help you set up and test the optimized matching system with <50ms initial results.\n\n## Overview\n\nThe optimized matching system uses a three-phase progressive enhancement approach:\n1. **Instant Match** (<50ms) - Local scoring + embeddings\n2. **Refined Match** (~500ms) - Quick AI scoring\n3. **Final Match** (~2s) - Deep AI analysis\n\n## Setup Steps\n\n### 1. Run Database Migration\n\nFirst, run the speed optimization migration to create necessary tables and indexes:\n\n```bash\n# Connect to your Supabase database\npsql $DATABASE_URL < supabase/migrations/007_speed_optimization_tables.sql\n```\n\nThis creates:\n- `designer_embeddings` table for pre-computed embeddings\n- `match_cache` table for caching match results\n- `designer_quick_stats` materialized view for fast lookups\n- Performance indexes on all tables\n\n### 2. Configure Environment Variables\n\nAdd the following to your `.env.local`:\n\n```bash\n# Cron job secret for securing embedding endpoints\nCRON_SECRET=\"your-secure-random-string\"\n\n# Ensure DeepSeek API key is set\nDEEPSEEK_API_KEY=\"sk-your-api-key\"\n```\n\n### 3. Set Up Cron Jobs\n\n#### Option A: Vercel Cron (Recommended for Production)\n\nThe `vercel.json` is already configured. Deploy to Vercel:\n\n```bash\nvercel deploy --prod\n```\n\nVercel will automatically run the embedding cron job hourly.\n\n#### Option B: External Cron Service\n\nUse a service like cron-job.org or GitHub Actions:\n\n```bash\n# Example curl command for manual testing\ncurl -X GET https://your-domain.com/api/cron/embeddings \\\n  -H \"x-cron-secret: your-secure-random-string\"\n```\n\n#### Option C: Local Development\n\nFor local testing, manually trigger the cron job:\n\n```bash\n# Create a test script\nnode -e \"\n  fetch('http://localhost:3000/api/cron/embeddings', {\n    headers: { 'x-cron-secret': process.env.CRON_SECRET }\n  }).then(r => r.json()).then(console.log)\n\"\n```\n\n### 4. Test the Optimized Matching\n\n1. **Enable Optimized Matching**\n   \n   The system automatically uses optimized matching on the `/match` page.\n\n2. **Monitor Performance**\n   \n   Visit the performance dashboard:\n   ```\n   http://localhost:3000/admin/performance\n   ```\n\n3. **Test Progressive Enhancement**\n   \n   Create a new match and watch the phases:\n   - Instant result appears immediately\n   - Score refines after ~500ms\n   - Final analysis completes in ~2s\n\n### 5. Performance Monitoring\n\nThe system tracks performance metrics automatically:\n\n- **Instant Match Target**: <50ms\n- **Refined Match Target**: <500ms  \n- **Final Match Target**: <2s\n\nView real-time metrics at `/admin/performance`\n\n## Testing Checklist\n\n- [ ] Database migration completed successfully\n- [ ] Environment variables configured\n- [ ] Cron job tested (embeddings pre-computed)\n- [ ] Create a new brief and see instant match (<50ms)\n- [ ] Watch progressive enhancement (instant ‚Üí refined ‚Üí final)\n- [ ] Check performance dashboard shows metrics\n- [ ] Verify match quality improves with each phase\n\n## Troubleshooting\n\n### Slow Initial Matches\n1. Check if embeddings are pre-computed: \n   ```sql\n   SELECT COUNT(*) FROM designer_embeddings;\n   ```\n2. Refresh materialized view:\n   ```sql\n   SELECT refresh_designer_quick_stats();\n   ```\n\n### No Streaming Updates\n1. Check browser console for EventSource errors\n2. Verify `/api/match/find-optimized` returns SSE headers\n3. Try the fallback POST endpoint\n\n### High Database Query Time\n1. Check indexes are created:\n   ```sql\n   \\di designer*\n   ```\n2. Analyze slow queries:\n   ```sql\n   EXPLAIN ANALYZE SELECT * FROM designers WHERE is_approved = true;\n   ```\n\n## Production Deployment\n\n1. **Set Production CRON_SECRET**\n   ```bash\n   vercel env add CRON_SECRET production\n   ```\n\n2. **Configure Monitoring**\n   - Set up alerts for P95 > 100ms on instant matches\n   - Monitor cache hit rate (target >60%)\n   - Track AI success rate (target >95%)\n\n3. **Scale Considerations**\n   - Increase `maxDuration` in vercel.json if needed\n   - Consider Redis for distributed caching\n   - Use CDN for static designer data\n\n## Next Steps\n\nAfter setup:\n1. Monitor performance metrics for a week\n2. Tune scoring weights based on match feedback\n3. Adjust cache TTLs based on usage patterns\n4. Consider adding more materialized views for common queries"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Speed Optimization Setup Guide\n\nThis guide will help you set up and test the optimized matching system with <50ms initial results.\n\n## Overview\n\nThe optimized matching system uses a three-phase progressive enhancement approach:\n1. **Instant Match** (<50ms) - Local scoring + embeddings\n2. **Refined Match** (~500ms) - Quick AI scoring\n3. **Final Match** (~2s) - Deep AI analysis\n\n## Setup Steps\n\n### 1. Run Database Migration\n\nFirst, run the speed optimization migration to create necessary tables and indexes:\n\n```bash\n# Connect to your Supabase database\npsql $DATABASE_URL < supabase/migrations/007_speed_optimization_tables.sql\n```\n\nThis creates:\n- `designer_embeddings` table for pre-computed embeddings\n- `match_cache` table for caching match results\n- `designer_quick_stats` materialized view for fast lookups\n- Performance indexes on all tables\n\n### 2. Configure Environment Variables\n\nAdd the following to your `.env.local`:\n\n```bash\n# Cron job secret for securing embedding endpoints\nCRON_SECRET=\"your-secure-random-string\"\n\n# Ensure DeepSeek API key is set\nDEEPSEEK_API_KEY=\"sk-your-api-key\"\n```\n\n### 3. Set Up Cron Jobs\n\n#### Option A: Vercel Cron (Recommended for Production)\n\nThe `vercel.json` is already configured. Deploy to Vercel:\n\n```bash\nvercel deploy --prod\n```\n\nVercel will automatically run the embedding cron job hourly.\n\n#### Option B: External Cron Service\n\nUse a service like cron-job.org or GitHub Actions:\n\n```bash\n# Example curl command for manual testing\ncurl -X GET https://your-domain.com/api/cron/embeddings \\\n  -H \"x-cron-secret: your-secure-random-string\"\n```\n\n#### Option C: Local Development\n\nFor local testing, manually trigger the cron job:\n\n```bash\n# Create a test script\nnode -e \"\n  fetch('http://localhost:3000/api/cron/embeddings', {\n    headers: { 'x-cron-secret': process.env.CRON_SECRET }\n  }).then(r => r.json()).then(console.log)\n\"\n```\n\n### 4. Test the Optimized Matching\n\n1. **Enable Optimized Matching**\n   \n   The system automatically uses optimized matching on the `/match` page.\n\n2. **Monitor Performance**\n   \n   Visit the performance dashboard:\n   ```\n   http://localhost:3000/admin/performance\n   ```\n\n3. **Test Progressive Enhancement**\n   \n   Create a new match and watch the phases:\n   - Instant result appears immediately\n   - Score refines after ~500ms\n   - Final analysis completes in ~2s\n\n### 5. Performance Monitoring\n\nThe system tracks performance metrics automatically:\n\n- **Instant Match Target**: <50ms\n- **Refined Match Target**: <500ms  \n- **Final Match Target**: <2s\n\nView real-time metrics at `/admin/performance`\n\n## Testing Checklist\n\n- [ ] Database migration completed successfully\n- [ ] Environment variables configured\n- [ ] Cron job tested (embeddings pre-computed)\n- [ ] Create a new brief and see instant match (<50ms)\n- [ ] Watch progressive enhancement (instant ‚Üí refined ‚Üí final)\n- [ ] Check performance dashboard shows metrics\n- [ ] Verify match quality improves with each phase\n\n## Troubleshooting\n\n### Slow Initial Matches\n1. Check if embeddings are pre-computed: \n   ```sql\n   SELECT COUNT(*) FROM designer_embeddings;\n   ```\n2. Refresh materialized view:\n   ```sql\n   SELECT refresh_designer_quick_stats();\n   ```\n\n### No Streaming Updates\n1. Check browser console for EventSource errors\n2. Verify `/api/match/find-optimized` returns SSE headers\n3. Try the fallback POST endpoint\n\n### High Database Query Time\n1. Check indexes are created:\n   ```sql\n   \\di designer*\n   ```\n2. Analyze slow queries:\n   ```sql\n   EXPLAIN ANALYZE SELECT * FROM designers WHERE is_approved = true;\n   ```\n\n## Production Deployment\n\n1. **Set Production CRON_SECRET**\n   ```bash\n   vercel env add CRON_SECRET production\n   ```\n\n2. **Configure Monitoring**\n   - Set up alerts for P95 > 100ms on instant matches\n   - Monitor cache hit rate (target >60%)\n   - Track AI success rate (target >95%)\n\n3. **Scale Considerations**\n   - Increase `maxDuration` in vercel.json if needed\n   - Consider Redis for distributed caching\n   - Use CDN for static designer data\n\n## Next Steps\n\nAfter setup:\n1. Monitor performance metrics for a week\n2. Tune scoring weights based on match feedback\n3. Adjust cache TTLs based on usage patterns\n4. Consider adding more materialized views for common queries"
    }
  ],
  "SAFE_MIGRATION_EXAMPLE.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Safe Migration Example - Step by Step\n\n## Example: Migrating Navigation Component Safely\n\n### üî¥ Current State (Don't Touch Yet!)\n```typescript\n// /src/app/client/purchase/page.tsx (lines 135-180)\n<nav className=\"px-8 py-4\">\n  <div className=\"max-w-6xl mx-auto flex justify-between items-center\">\n    <Link href=\"/\" className=\"flex items-center gap-2 text-xl font-bold transition-colors duration-300\" style={{ color: theme.text.primary }}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill={theme.accent} stroke={theme.accent} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <circle cx=\"12\" cy=\"12\" r=\"1\"/>\n        <path d=\"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z\"/>\n        <path d=\"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z\"/>\n      </svg>\n      OneDesigner\n    </Link>\n    <button onClick={toggleTheme} className=\"relative w-14 h-7 rounded-full...\">\n      {/* Theme toggle */}\n    </button>\n  </div>\n</nav>\n```\n\n### üü° Step 1: Create Exact Copy (NEW FILE)\n```typescript\n// NEW FILE: /src/components/shared/Navigation/index.tsx\nimport Link from 'next/link'\n\ninterface NavigationProps {\n  theme: any  // Keep same as original\n  toggleTheme: () => void\n}\n\nexport const Navigation = ({ theme, toggleTheme }: NavigationProps) => {\n  // EXACT COPY - Don't change anything!\n  return (\n    <nav className=\"px-8 py-4\">\n      <div className=\"max-w-6xl mx-auto flex justify-between items-center\">\n        <Link href=\"/\" className=\"flex items-center gap-2 text-xl font-bold transition-colors duration-300\" style={{ color: theme.text.primary }}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill={theme.accent} stroke={theme.accent} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n            <circle cx=\"12\" cy=\"12\" r=\"1\"/>\n            <path d=\"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z\"/>\n            <path d=\"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z\"/>\n          </svg>\n          OneDesigner\n        </Link>\n        <button onClick={toggleTheme} className=\"relative w-14 h-7 rounded-full transition-colors duration-300 focus:outline-none hover:shadow-md\" style={{ backgroundColor: isDarkMode ? '#374151' : '#E5E7EB' }}>\n          {/* EXACT same theme toggle */}\n        </button>\n      </div>\n    </nav>\n  )\n}\n```\n\n### üü¢ Step 2: Test in Isolated Page First\n```typescript\n// NEW TEST FILE: /src/app/test-nav/page.tsx\n'use client'\nimport { useState } from 'react'\nimport { Navigation } from '@/components/shared/Navigation'\nimport { getTheme } from '@/lib/design-system'\n\nexport default function TestNavPage() {\n  // SAME state as original pages\n  const [isDarkMode, setIsDarkMode] = useState(true)\n  const theme = getTheme(isDarkMode)\n  const toggleTheme = () => setIsDarkMode(!isDarkMode)\n  \n  return (\n    <main>\n      {/* Test new component */}\n      <Navigation theme={theme} toggleTheme={toggleTheme} />\n      \n      {/* Compare with old version side by side */}\n      <div className=\"mt-8 border-t pt-8\">\n        <h2>Original Navigation (for comparison)</h2>\n        <nav className=\"px-8 py-4\">\n          {/* Copy of original for visual comparison */}\n        </nav>\n      </div>\n    </main>\n  )\n}\n```\n\n### ‚úÖ Step 3: Verify Everything Works\n```bash\n# Run these tests:\n1. npm run dev\n2. Visit http://localhost:3000/test-nav\n3. Compare both navigations visually\n4. Test theme toggle on both\n5. Test logo link on both\n6. Check responsive design\n7. Verify no console errors\n```\n\n### üîÑ Step 4: Replace in ONE Real Page\n```typescript\n// MODIFY: /src/app/client/purchase/page.tsx\n'use client'\nimport { useState } from 'react'\nimport { Navigation } from '@/components/shared/Navigation'  // NEW\nimport { getTheme } from '@/lib/design-system'\n\nexport default function PurchasePage() {\n  const [isDarkMode, setIsDarkMode] = useState(true)\n  const theme = getTheme(isDarkMode)\n  const toggleTheme = () => setIsDarkMode(!isDarkMode)\n  \n  return (\n    <main style={{ backgroundColor: theme.bg }}>\n      {/* Replace 45 lines with 1 line */}\n      <Navigation theme={theme} toggleTheme={toggleTheme} />\n      \n      {/* REST OF PAGE UNCHANGED */}\n      <div className=\"max-w-4xl mx-auto px-4 py-16\">\n        {/* All existing content */}\n      </div>\n    </main>\n  )\n}\n```\n\n### üìã Migration Checklist\n- [ ] Created new component file\n- [ ] Copied code EXACTLY (no changes)\n- [ ] Created test page\n- [ ] Visually compared both versions\n- [ ] Theme toggle works\n- [ ] Links work\n- [ ] No console errors\n- [ ] Responsive design works\n- [ ] Replaced in one page\n- [ ] App still runs\n- [ ] Page looks identical\n- [ ] All features work\n\n### ‚ö†Ô∏è Common Mistakes to Avoid\n\n‚ùå **DON'T DO THIS:**\n```typescript\n// DON'T \"improve\" while migrating\nexport const Navigation = ({ theme, toggleTheme, user }) => {\n  // DON'T add new features\n  const { credits } = useUserStore()  // NEW FEATURE - NO!\n  \n  return (\n    <nav className=\"px-8 py-6\">  {/* Changed padding - NO! */}\n      <NewLogo />  {/* Different component - NO! */}\n    </nav>\n  )\n}\n```\n\n‚úÖ **DO THIS:**\n```typescript\n// Keep EVERYTHING the same\nexport const Navigation = ({ theme, toggleTheme }) => {\n  // Exact copy of original\n  return (\n    <nav className=\"px-8 py-4\">  {/* Same padding */}\n      {/* Same SVG logo */}\n      {/* Same classes */}\n      {/* Same behavior */}\n    </nav>\n  )\n}\n```\n\n## Safe API Migration Example\n\n### üî¥ Current API Call\n```typescript\n// In multiple files\nconst response = await fetch('/api/auth/send-otp', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({ email }),\n})\n\nif (!response.ok) {\n  throw new Error('Failed to send OTP')\n}\n```\n\n### üü° Step 1: Create Service (Don't Change Logic)\n```typescript\n// NEW FILE: /src/lib/services/auth.service.ts\nexport const authService = {\n  sendOTP: async (email: string) => {\n    // EXACT same logic\n    const response = await fetch('/api/auth/send-otp', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email }),\n    })\n    \n    if (!response.ok) {\n      throw new Error('Failed to send OTP')  // Same error\n    }\n    \n    return response  // Same return\n  }\n}\n```\n\n### üü¢ Step 2: Test Service\n```typescript\n// Test that it works exactly the same\nconst testService = async () => {\n  try {\n    // Old way\n    const response1 = await fetch('/api/auth/send-otp', {...})\n    \n    // New way  \n    const response2 = await authService.sendOTP(email)\n    \n    // Should be identical\n    console.log('Responses match:', response1 === response2)\n  } catch (error) {\n    console.error('Service test failed:', error)\n  }\n}\n```\n\n### ‚úÖ Step 3: Replace One Usage\n```typescript\n// BEFORE: /src/app/designer/login/page.tsx\ntry {\n  const response = await fetch('/api/auth/send-otp', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ email }),\n  })\n  \n  if (!response.ok) {\n    throw new Error('Failed to send OTP')\n  }\n}\n\n// AFTER: Same file\nimport { authService } from '@/lib/services/auth.service'\n\ntry {\n  const response = await authService.sendOTP(email)\n  // Rest stays the same\n}\n```\n\n## The Golden Rules\n\n### 1. One Change at a Time\n- Replace in ONE file\n- Test thoroughly\n- Commit that change\n- Then move to next file\n\n### 2. No Logic Changes\n- Same inputs\n- Same outputs\n- Same side effects\n- Same error handling\n\n### 3. No Style Changes\n- Same classes\n- Same inline styles\n- Same responsive behavior\n- Same animations\n\n### 4. Test Everything\n- Visual comparison\n- Functional testing\n- Error scenarios\n- Edge cases\n\n### 5. Keep Rollback Simple\n```bash\n# If something breaks:\ngit revert HEAD\n# Back to working state instantly\n```\n\n## Progress Tracking\n\n### Week 1 Progress:\n- [ ] Day 1: Navigation component created\n- [ ] Day 2: Tested in isolation\n- [ ] Day 3: Replaced in 1 page\n- [ ] Day 4: Replaced in 5 pages\n- [ ] Day 5: Replaced in 10 pages\n\n### Safe Metrics:\n- Pages migrated: 10/35\n- Bugs introduced: 0\n- Rollbacks needed: 0\n- Tests passing: 100%\n\nThis approach ensures ZERO risk while achieving cleaner code!"
    }
  ],
  "RUN_SEED_DATA.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Run Designer Seed Data\n\nTo populate your database with sample designers, run this SQL in your Supabase SQL Editor:\n\n1. Go to [SQL Editor](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new)\n2. Copy the entire contents of `/supabase/seeds/designers.sql`\n3. Paste and run it\n\nThis will create 5 sample designers with different specialties:\n- Sarah Chen - Brand Identity (San Francisco)\n- Michael Rodriguez - UI/UX (New York)\n- Emma Thompson - Product Design (London)\n- David Kim - Visual Design (Seoul)\n- Lisa Martinez - Web Design (Barcelona)\n\nAfter running the seed data, test the full flow:\n1. Go to http://localhost:3000\n2. Click \"I need a designer\"\n3. Fill out the brief\n4. Enter your email\n5. Get OTP from console\n6. See your matched designer!"
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "# Run Designer Seed Data\n\nTo populate your database with sample designers, run this SQL in your Supabase SQL Editor:\n\n1. Go to [SQL Editor](https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new)\n2. Copy the entire contents of `/supabase/seeds/designers.sql`\n3. Paste and run it\n\nThis will create 5 sample designers with different specialties:\n- Sarah Chen - Brand Identity (San Francisco)\n- Michael Rodriguez - UI/UX (New York)\n- Emma Thompson - Product Design (London)\n- David Kim - Visual Design (Seoul)\n- Lisa Martinez - Web Design (Barcelona)\n\nAfter running the seed data, test the full flow:\n1. Go to http://localhost:3000\n2. Click \"I need a designer\"\n3. Fill out the brief\n4. Enter your email\n5. Get OTP from console\n6. See your matched designer!"
    }
  ],
  "README.md": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# OneDesigner Platform\n\n**AI-Powered Designer-Client Matching Platform**\n\nOneDesigner connects clients with pre-vetted designers using advanced AI-powered matching algorithms. The platform analyzes project requirements and designer profiles to find perfect creative matches with 15+ compatibility factors.\n\nüîó **Live Platform**: [onedesigner.app](https://onedesigner.app)\n\n## ‚ú® Key Features\n\n### üéØ AI-Powered Matching System\n- **DeepSeek AI Integration** - Advanced matching with realistic scoring (50-80% typical range)\n- **Category-Specific Questions** - Detailed briefs for 6 design categories\n- **Progressive Enhancement** - 3-phase matching (instant ‚Üí refined ‚Üí final)\n- **Persistent Matches** - Results saved to prevent re-matching on navigation\n\n### üí≥ Flexible Payment System\n- **LemonSqueezy Integration** - Secure payment processing\n- **Match-Based Credits** - 1 credit = 1 designer unlock\n- **Package Options**: Starter ($5/3), Growth ($15/10), Scale ($30/25)\n- **Instant Credit Application** via webhook\n\n### üë®‚Äçüíº Multi-User System\n- **Client Portal** - Brief creation, match viewing, designer unlocking\n- **Designer Portal** - Profile management, application system, approval workflow\n- **Admin Dashboard** - Designer approval, performance monitoring, system management\n\n### üöÄ Performance Optimized\n- **Speed Optimization** - Sub-50ms instant matches using embeddings\n- **Database Caching** - Pre-computed vectors and materialized views\n- **Progressive Loading** - Animated feedback during AI analysis\n- **Streaming Support** - SSE for real-time match updates\n\n## üèóÔ∏è Technical Architecture\n\n### Frontend\n- **Next.js 14** with App Router\n- **TypeScript** for type safety\n- **Tailwind CSS** with custom design system\n- **React Server Components** for optimal performance\n\n### Backend\n- **Supabase** - PostgreSQL database with real-time features\n- **DeepSeek AI** - Advanced language model for matching\n- **LemonSqueezy** - Payment processing and webhook handling\n- **Resend** - Email notifications and templates\n\n### Database Schema\n```sql\n-- Core Tables\ndesigners (is_approved, is_verified, categories, styles, etc.)\nclients (email, match_credits, created_at)\nbriefs (design_category, timeline_type, budget_range, etc.)\nmatches (score, reasons[], status, created_at)\nclient_designers (tracks unlocked relationships)\n\n-- Performance Tables\ndesigner_embeddings (vector similarity for fast matching)\nmatch_cache (AI analysis caching)\ndesigner_quick_stats (materialized view for dashboard)\n```\n\n## üé® Design Categories\n\n1. **Branding & Logo Design** - Brand identity, logo creation, style guides\n2. **Web & Mobile Design** - UI/UX, responsive design, app interfaces\n3. **Social Media Graphics** - Posts, stories, promotional content\n4. **Motion Graphics** - Animations, video editing, kinetic typography\n5. **Photography & Video** - Product shots, marketing videos, content creation\n6. **Presentations** - Pitch decks, corporate presentations, infographics\n\n## üîß Development Setup\n\n### Prerequisites\n- Node.js 18+ and npm\n- Supabase account with project setup\n- DeepSeek API key\n- LemonSqueezy store setup\n\n### Environment Variables\n```bash\n# AI & Database\nDEEPSEEK_API_KEY=your_deepseek_key\nNEXT_PUBLIC_SUPABASE_URL=your_supabase_url\nSUPABASE_SERVICE_ROLE_KEY=your_service_key\n\n# Authentication & Security\nNEXTAUTH_SECRET=your_nextauth_secret\nNEXTAUTH_URL=https://onedesigner.app\n\n# Payment & Email\nLEMONSQUEEZY_API_KEY=your_lemonsqueezy_key\nRESEND_API_KEY=your_resend_key\n\n# Performance\nCRON_SECRET=your_cron_secret\n```\n\n### Installation\n```bash\n# Clone repository\ngit clone https://github.com/osamakhalil/OneDesigner.git\ncd OneDesigner\n\n# Install dependencies\nnpm install\n\n# Set up environment variables\ncp .env.example .env.local\n# Edit .env.local with your keys\n\n# Run database migrations\n# Execute migration files 001-008 in order via Supabase SQL editor\n\n# Start development server\nnpm run dev\n```\n\n### Available Scripts\n```bash\nnpm run dev          # Start development server\nnpm run build        # Build for production\nnpm run start        # Start production server\nnpm run lint         # Run ESLint\nnpm run typecheck    # Run TypeScript checks\n```\n\n## üöÄ Deployment\n\n### Production Deployment (Vercel)\n```bash\n# Build and deploy\ngit add .\ngit commit -m \"Your changes\"\ngit push origin main\nvercel --prod\n```\n\n### Database Migrations\nExecute SQL migrations in order:\n1. `001_initial_schema.sql` - Core tables\n2. `002_add_client_credits.sql` - Credit system\n3. `003_enhance_designers.sql` - Designer profiles\n4. `004_match_improvements.sql` - Match system\n5. `005_brief_enhancements.sql` - Enhanced brief fields\n6. `006_performance_indexes.sql` - Database optimization\n7. `007_speed_optimization_tables_fixed.sql` - Embeddings & cache\n8. `008_track_profile_edits.sql` - Profile edit tracking\n\n## üìä Key Metrics & Performance\n\n- **Match Speed**: <50ms for instant phase, ~2s for complete AI analysis\n- **Accuracy**: 85%+ satisfaction rate with AI-suggested matches\n- **Designer Pool**: Pre-vetted, approved designers across 6 categories\n- **Credit Utilization**: Average 2.3 matches per client before finding ideal designer\n\n## üîê Security & Authentication\n\n- **Session-based Auth** with secure HTTP-only cookies\n- **OTP Verification** for email-based login\n- **Role-based Access** (Client, Designer, Admin)\n- **API Rate Limiting** and request validation\n- **Webhook Signature Verification** for payments\n\n## üì± Mobile Support\n\n- **Fully Responsive** design across all breakpoints\n- **Touch-optimized** interfaces for mobile users\n- **Progressive Web App** capabilities\n- **Mobile-first** approach to UI/UX design\n\n## üéØ Business Model\n\n- **Pay-per-Match** - Clients purchase credits to unlock designers\n- **Designer Vetting** - Quality control through admin approval process\n- **No Subscriptions** - Simple credit-based pricing\n- **Performance Tracking** - Data-driven matching improvements\n\n## üõ†Ô∏è Recent Updates (Latest Session)\n\n‚úÖ **Fixed Brief Submission Errors** - Added missing validation fields\n‚úÖ **Corrected Match Display Issues** - Fixed database query problems  \n‚úÖ **Unified Credit Display** - Consistent match credit information\n‚úÖ **Implemented Persistent Matching** - Matches saved across navigation\n‚úÖ **Added Find New Match** - Additional match discovery functionality\n‚úÖ **Fixed TypeScript Errors** - Resolved null reference issues\n‚úÖ **Enhanced UX Flow** - Improved user experience throughout\n\n## üìö Documentation\n\n- **CLAUDE.md** - Comprehensive development knowledge base\n- **API Documentation** - Available in `/src/app/api/` endpoints\n- **Database Schema** - Documented in migration files\n- **Design System** - Centralized in `/src/lib/design-system/`\n\n## ü§ù Contributing\n\n1. Fork the repository\n2. Create feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit changes (`git commit -m 'Add amazing feature'`)\n4. Push to branch (`git push origin feature/amazing-feature`)\n5. Open Pull Request\n\n## üìÑ License\n\nThis project is proprietary software. All rights reserved.\n\n---\n\n**Built with ‚ù§Ô∏è for the creative community**"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# OneDesigner Platform\n\n**AI-Powered Designer-Client Matching Platform**\n\nOneDesigner connects clients with pre-vetted designers using advanced AI-powered matching algorithms. The platform analyzes project requirements and designer profiles to find perfect creative matches with 15+ compatibility factors.\n\nüîó **Live Platform**: [onedesigner.app](https://onedesigner.app)\n\n## ‚ú® Key Features\n\n### üéØ AI-Powered Matching System\n- **DeepSeek AI Integration** - Advanced matching with realistic scoring (50-80% typical range)\n- **Category-Specific Questions** - Detailed briefs for 6 design categories\n- **Progressive Enhancement** - 3-phase matching (instant ‚Üí refined ‚Üí final)\n- **Persistent Matches** - Results saved to prevent re-matching on navigation\n\n### üí≥ Flexible Payment System\n- **LemonSqueezy Integration** - Secure payment processing\n- **Match-Based Credits** - 1 credit = 1 designer unlock\n- **Package Options**: Starter ($5/3), Growth ($15/10), Scale ($30/25)\n- **Instant Credit Application** via webhook\n\n### üë®‚Äçüíº Multi-User System\n- **Client Portal** - Brief creation, match viewing, designer unlocking\n- **Designer Portal** - Profile management, application system, approval workflow\n- **Admin Dashboard** - Designer approval, performance monitoring, system management\n\n### üöÄ Performance Optimized\n- **Speed Optimization** - Sub-50ms instant matches using embeddings\n- **Database Caching** - Pre-computed vectors and materialized views\n- **Progressive Loading** - Animated feedback during AI analysis\n- **Streaming Support** - SSE for real-time match updates\n\n## üèóÔ∏è Technical Architecture\n\n### Frontend\n- **Next.js 14** with App Router\n- **TypeScript** for type safety\n- **Tailwind CSS** with custom design system\n- **React Server Components** for optimal performance\n\n### Backend\n- **Supabase** - PostgreSQL database with real-time features\n- **DeepSeek AI** - Advanced language model for matching\n- **LemonSqueezy** - Payment processing and webhook handling\n- **Resend** - Email notifications and templates\n\n### Database Schema\n```sql\n-- Core Tables\ndesigners (is_approved, is_verified, categories, styles, etc.)\nclients (email, match_credits, created_at)\nbriefs (design_category, timeline_type, budget_range, etc.)\nmatches (score, reasons[], status, created_at)\nclient_designers (tracks unlocked relationships)\n\n-- Performance Tables\ndesigner_embeddings (vector similarity for fast matching)\nmatch_cache (AI analysis caching)\ndesigner_quick_stats (materialized view for dashboard)\n```\n\n## üé® Design Categories\n\n1. **Branding & Logo Design** - Brand identity, logo creation, style guides\n2. **Web & Mobile Design** - UI/UX, responsive design, app interfaces\n3. **Social Media Graphics** - Posts, stories, promotional content\n4. **Motion Graphics** - Animations, video editing, kinetic typography\n5. **Photography & Video** - Product shots, marketing videos, content creation\n6. **Presentations** - Pitch decks, corporate presentations, infographics\n\n## üîß Development Setup\n\n### Prerequisites\n- Node.js 18+ and npm\n- Supabase account with project setup\n- DeepSeek API key\n- LemonSqueezy store setup\n\n### Environment Variables\n```bash\n# AI & Database\nDEEPSEEK_API_KEY=your_deepseek_key\nNEXT_PUBLIC_SUPABASE_URL=your_supabase_url\nSUPABASE_SERVICE_ROLE_KEY=your_service_key\n\n# Authentication & Security\nNEXTAUTH_SECRET=your_nextauth_secret\nNEXTAUTH_URL=https://onedesigner.app\n\n# Payment & Email\nLEMONSQUEEZY_API_KEY=your_lemonsqueezy_key\nRESEND_API_KEY=your_resend_key\n\n# Performance\nCRON_SECRET=your_cron_secret\n```\n\n### Installation\n```bash\n# Clone repository\ngit clone https://github.com/osamakhalil/OneDesigner.git\ncd OneDesigner\n\n# Install dependencies\nnpm install\n\n# Set up environment variables\ncp .env.example .env.local\n# Edit .env.local with your keys\n\n# Run database migrations\n# Execute migration files 001-008 in order via Supabase SQL editor\n\n# Start development server\nnpm run dev\n```\n\n### Available Scripts\n```bash\nnpm run dev          # Start development server\nnpm run build        # Build for production\nnpm run start        # Start production server\nnpm run lint         # Run ESLint\nnpm run typecheck    # Run TypeScript checks\n```\n\n## üöÄ Deployment\n\n### Production Deployment (Vercel)\n```bash\n# Build and deploy\ngit add .\ngit commit -m \"Your changes\"\ngit push origin main\nvercel --prod\n```\n\n### Database Migrations\nExecute SQL migrations in order:\n1. `001_initial_schema.sql` - Core tables\n2. `002_add_client_credits.sql` - Credit system\n3. `003_enhance_designers.sql` - Designer profiles\n4. `004_match_improvements.sql` - Match system\n5. `005_brief_enhancements.sql` - Enhanced brief fields\n6. `006_performance_indexes.sql` - Database optimization\n7. `007_speed_optimization_tables_fixed.sql` - Embeddings & cache\n8. `008_track_profile_edits.sql` - Profile edit tracking\n\n## üìä Key Metrics & Performance\n\n- **Match Speed**: <50ms for instant phase, ~2s for complete AI analysis\n- **Accuracy**: 85%+ satisfaction rate with AI-suggested matches\n- **Designer Pool**: Pre-vetted, approved designers across 6 categories\n- **Credit Utilization**: Average 2.3 matches per client before finding ideal designer\n\n## üîê Security & Authentication\n\n- **Session-based Auth** with secure HTTP-only cookies\n- **OTP Verification** for email-based login\n- **Role-based Access** (Client, Designer, Admin)\n- **API Rate Limiting** and request validation\n- **Webhook Signature Verification** for payments\n\n## üì± Mobile Support\n\n- **Fully Responsive** design across all breakpoints\n- **Touch-optimized** interfaces for mobile users\n- **Progressive Web App** capabilities\n- **Mobile-first** approach to UI/UX design\n\n## üéØ Business Model\n\n- **Pay-per-Match** - Clients purchase credits to unlock designers\n- **Designer Vetting** - Quality control through admin approval process\n- **No Subscriptions** - Simple credit-based pricing\n- **Performance Tracking** - Data-driven matching improvements\n\n## üõ†Ô∏è Recent Updates (Latest Session)\n\n‚úÖ **Fixed Brief Submission Errors** - Added missing validation fields\n‚úÖ **Corrected Match Display Issues** - Fixed database query problems  \n‚úÖ **Unified Credit Display** - Consistent match credit information\n‚úÖ **Implemented Persistent Matching** - Matches saved across navigation\n‚úÖ **Added Find New Match** - Additional match discovery functionality\n‚úÖ **Fixed TypeScript Errors** - Resolved null reference issues\n‚úÖ **Enhanced UX Flow** - Improved user experience throughout\n\n## üìö Documentation\n\n- **CLAUDE.md** - Comprehensive development knowledge base\n- **API Documentation** - Available in `/src/app/api/` endpoints\n- **Database Schema** - Documented in migration files\n- **Design System** - Centralized in `/src/lib/design-system/`\n\n## ü§ù Contributing\n\n1. Fork the repository\n2. Create feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit changes (`git commit -m 'Add amazing feature'`)\n4. Push to branch (`git push origin feature/amazing-feature`)\n5. Open Pull Request\n\n## üìÑ License\n\nThis project is proprietary software. All rights reserved.\n\n---\n\n**Built with ‚ù§Ô∏è for the creative community**"
    }
  ],
  "PRODUCTION_DEPLOYMENT.md": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Production Deployment Guide for OneDesigner.app\n\n## üöÄ Deployment Checklist\n\n### 1. Domain Configuration\n- [x] Domain: `onedesigner.app` \n- [ ] DNS pointed to Vercel\n- [ ] SSL certificate configured\n\n### 2. Vercel Setup\n1. **Connect Repository**:\n   - Import project from GitHub: `ruzmaco/onedesigner`\n   - Set framework preset to: `Next.js`\n   - Set build command to: `npm run build`\n\n2. **Environment Variables** (Add in Vercel Dashboard):\n   ```\n   NEXT_PUBLIC_APP_URL=https://onedesigner.app\n   NEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n   NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-supabase-anon-key]\n   SUPABASE_SERVICE_ROLE_KEY=[your-supabase-service-key]\n   NEXTAUTH_URL=https://onedesigner.app\n   NEXTAUTH_SECRET=[generate-random-string]\n   RESEND_API_KEY=[your-resend-key]\n   EMAIL_FROM=magic@onedesigner.app\n   LEMONSQUEEZY_API_KEY=[your-lemon-squeezy-key]\n   LEMONSQUEEZY_WEBHOOK_SECRET=[your-webhook-secret]\n   LEMONSQUEEZY_STORE_ID=[your-store-id]\n   DEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\n   CRON_SECRET=[generate-random-string]\n   NODE_ENV=production\n   ```\n\n3. **Domain Configuration**:\n   - Add custom domain: `onedesigner.app`\n   - Add redirect from `www.onedesigner.app` to `onedesigner.app`\n\n### 3. Supabase Configuration\n\n1. **Authentication URLs**:\n   - Site URL: `https://onedesigner.app`\n   - Redirect URLs: \n     - `https://onedesigner.app/auth/callback`\n     - `https://onedesigner.app/auth/verify`\n     - `https://onedesigner.app/admin/verify`\n     - `https://onedesigner.app/designer/login/verify`\n\n2. **CORS Origins**:\n   - Add: `https://onedesigner.app`\n   - Add: `https://*.vercel.app` (for preview deployments)\n\n### 4. LemonSqueezy Configuration\n\n1. **Webhook URL**:\n   - Set to: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n\n2. **Store Settings**:\n   - Update store domain to: `onedesigner.app`\n   - Update return URLs to use production domain\n\n### 5. Email Configuration\n\n1. **Resend Domain**:\n   - Add and verify domain: `onedesigner.app`\n   - Set up SPF, DKIM, DMARC records\n\n2. **Email Templates**:\n   - Update all email templates to use `onedesigner.app` branding\n\n### 6. Post-Deployment Testing\n\n- [ ] Homepage loads correctly\n- [ ] Authentication flow works (OTP emails)\n- [ ] Admin panel accessible\n- [ ] Designer registration works\n- [ ] Client brief submission works\n- [ ] Payment flow functional\n- [ ] AI matching system works\n- [ ] Cron jobs running (check `/api/cron/embeddings`)\n\n### 7. Monitoring Setup\n\n1. **Vercel Analytics**:\n   - Enable Web Analytics\n   - Enable Speed Insights\n\n2. **Error Monitoring**:\n   - Set up error tracking (Sentry recommended)\n\n### 8. SEO & Performance\n\n1. **Meta Tags**:\n   - Verify all pages have proper meta descriptions\n   - Check OpenGraph tags\n\n2. **Performance**:\n   - Run Lighthouse audits\n   - Optimize Core Web Vitals\n\n## üîß Commands for Deployment\n\n```bash\n# Build and test locally first\nnpm run build\nnpm run start\n\n# Deploy to Vercel (automatic on push to main)\ngit push origin main\n\n# Manual deployment (if needed)\nnpx vercel --prod\n```\n\n## üìä Post-Launch Monitoring\n\n- **Performance**: Monitor Core Web Vitals in Vercel\n- **Errors**: Check Vercel Function logs for API errors\n- **Database**: Monitor Supabase usage and performance\n- **Payments**: Track LemonSqueezy webhook success rates\n- **AI**: Monitor DeepSeek API usage and costs\n\n## üö® Troubleshooting\n\n### Common Issues:\n\n1. **Authentication not working**:\n   - Check Supabase auth URLs configuration\n   - Verify NEXTAUTH_URL environment variable\n\n2. **Payments failing**:\n   - Verify LemonSqueezy webhook URL\n   - Check webhook secret matches\n\n3. **AI matching not working**:\n   - Verify DEEPSEEK_API_KEY is set\n   - Check Supabase RLS policies for matches table\n\n4. **Emails not sending**:\n   - Verify Resend domain setup\n   - Check EMAIL_FROM matches verified domain\n\n5. **Cron jobs not running**:\n   - Check CRON_SECRET environment variable\n   - Verify Vercel cron configuration\n\n## üìû Support Contacts\n\n- **Vercel Support**: support@vercel.com\n- **Supabase Support**: support@supabase.io  \n- **LemonSqueezy Support**: support@lemonsqueezy.com\n- **Resend Support**: support@resend.com"
    }
  ],
  "PHASE_8_EMAIL_SERVICE.md": [
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 1,
      "context": "# Phase 8: Centralized Email Service - COMPLETE ‚úÖ\n\n## Overview\nPhase 8 introduces a comprehensive centralized email service that consolidates 12 different email sending implementations into a single, feature-rich service. This provides templating, queuing, retry logic, rate limiting, and tracking for all email operations.\n\n## üéØ Implementation Status: COMPLETE\n\n### Files Created\n1. **`/src/lib/core/email-service.ts`** (687 lines)\n   - Main EmailService class with singleton pattern\n   - Template-based email system\n   - Email queue with retry logic\n   - Rate limiting (60 emails/minute)\n   - Automatic retry with exponential backoff\n   - Multiple pre-built templates\n\n2. **`/src/app/api/test-email-service/route.ts`** (159 lines)\n   - Test endpoint for all email operations\n   - Template sending, direct sending, OTP emails\n   - Queue management and status\n   - Template registration\n\n3. **`/test/test-email-service.sh`** (285 lines)\n   - Comprehensive test suite\n   - Validates all EmailService features\n   - Checks templates and queue\n   - Tests rate limiting and retry\n\n## üöÄ Key Features\n\n### 1. **Template-Based Emails**\n```typescript\n// Pre-built templates with variables\nawait emailService.sendTemplatedEmail('welcome', {\n  to: 'user@example.com',\n  variables: {\n    name: 'John Doe',\n    dashboardUrl: 'https://app.com/dashboard'\n  }\n})\n```\n\n### 2. **Direct Email Sending**\n```typescript\nawait emailService.sendEmail({\n  to: 'user@example.com',\n  subject: 'Custom Email',\n  html: '<h1>Hello</h1>',\n  text: 'Hello'\n})\n```\n\n### 3. **Email Queue with Retry**\n- Automatic queuing when rate limited\n- Exponential backoff for retries\n- Max 3 retry attempts\n- Queue processing every 10 seconds\n```typescript\n{\n  queueEnabled: true,\n  maxRetries: 3,\n  retryDelay: 5000 // 5 seconds base\n}\n```\n\n### 4. **Rate Limiting**\n- 60 emails per minute default\n- Automatic queuing when exceeded\n- Per-minute tracking\n```typescript\nif (!this.checkRateLimit()) {\n  return this.queueEmail(options)\n}\n```\n\n### 5. **Pre-Built Templates**\n1. **OTP** - Verification codes\n2. **Welcome** - New user onboarding\n3. **Designer Approved** - Approval notification\n4. **Designer Rejected** - Rejection with feedback\n5. **Match Found** - Client-designer match\n6. **Designer Request** - New project request\n\n### 6. **Variable Replacement**\n```typescript\n// Template with variables\nhtml: `<h1>Welcome {{name}}!</h1>\n       <a href=\"{{dashboardUrl}}\">Go to Dashboard</a>`\n\n// Variables replaced automatically\nvariables: { name: 'John', dashboardUrl: 'https://...' }\n```\n\n## üìä Consolidation Analysis\n\n### Current Email Implementations Found\n- **50 references** to email sending across the codebase\n- **12 different implementations** with varying logic\n- **22 files** with email sending code\n\n### Files with Email Logic\n- `/app/api/auth/verify-otp/route.ts`\n- `/app/api/designer/apply/route.ts`\n- `/app/api/designer/verify/route.ts`\n- `/app/api/admin/designers/[id]/approve/route.ts`\n- `/app/api/admin/designers/[id]/reject/route.ts`\n- `/app/api/match/find/route.ts`\n- `/app/api/messages/send/route.ts`\n- `/lib/email/send-email.ts`\n- `/lib/email/send-otp.ts`\n- And 13 more files...\n\n### Consolidation Benefits\n- **Single source of truth** for email logic\n- **Consistent templates** across all emails\n- **Centralized configuration** management\n- **Unified rate limiting** for all emails\n- **Reliable delivery** with retry logic\n- **Reduced code duplication** (~800 lines saved)\n\n## üîß Configuration\n\n### Environment Variables\n```bash\n# Enable Email Service\nUSE_EMAIL_SERVICE=true\n\n# Resend Configuration\nRESEND_API_KEY=re_xxxxxxxxxxxxx\nEMAIL_FROM=noreply@onedesigner.app\nEMAIL_REPLY_TO=support@onedesigner.app\n\n# Email Configuration (optional)\nEMAIL_RATE_LIMIT=60        # Emails per minute\nEMAIL_MAX_RETRIES=3        # Retry attempts\nEMAIL_RETRY_DELAY=5000     # Milliseconds\nEMAIL_QUEUE_ENABLED=true   # Enable queue\n```\n\n### Feature Flag\n```typescript\nFeatures.USE_EMAIL_SERVICE // Controlled via environment or ConfigManager\n```\n\n### Configuration Object\n```typescript\n{\n  from: 'OneDesigner <noreply@onedesigner.app>',\n  replyTo: 'support@onedesigner.app',\n  apiKey: 'resend_api_key',\n  maxRetries: 3,\n  retryDelay: 5000,\n  rateLimit: 60,\n  queueEnabled: true,\n  trackingEnabled: true\n}\n```\n\n## üéØ Usage Examples\n\n### Send OTP Email\n```typescript\nimport { emailService } from '@/lib/core/email-service'\n\nawait emailService.sendOTPEmail(\n  'user@example.com',\n  '123456',\n  'client',\n  'login'\n)\n```\n\n### Send Welcome Email\n```typescript\nawait emailService.sendWelcomeEmail(\n  'user@example.com',\n  'John Doe',\n  'client',\n  'https://app.com/dashboard'\n)\n```\n\n### Send Designer Approval\n```typescript\nawait emailService.sendDesignerApprovalEmail(\n  'designer@example.com',\n  'Jane Smith',\n  true, // approved\n  'Great portfolio!' // reason (optional)\n)\n```\n\n### Custom Template\n```typescript\n// Register custom template\nemailService.registerTemplate('invoice', {\n  subject: 'Invoice #{{invoiceNumber}}',\n  html: `<h1>Invoice</h1>\n         <p>Amount: ${{amount}}</p>`,\n  text: 'Invoice #{{invoiceNumber}} - Amount: ${{amount}}'\n})\n\n// Send using custom template\nawait emailService.sendTemplatedEmail('invoice', {\n  to: 'client@example.com',\n  variables: {\n    invoiceNumber: 'INV-001',\n    amount: '99.99'\n  }\n})\n```\n\n### Queue Management\n```typescript\n// Check queue status\nconst status = emailService.getQueueStatus()\nconsole.log(`Pending: ${status.pending}, Sent: ${status.sent}`)\n\n// Clear queue\nemailService.clearQueue()\n```\n\n## üîÑ Migration Strategy\n\n### Phase 1: Enable Feature Flag\n```bash\nexport USE_EMAIL_SERVICE=true\n```\n\n### Phase 2: Update Existing Endpoints\nReplace legacy email code:\n```typescript\n// Before (multiple implementations)\nconst resend = new Resend(process.env.RESEND_API_KEY)\nawait resend.emails.send({\n  from: 'noreply@app.com',\n  to: email,\n  subject: 'Welcome',\n  html: '<h1>Welcome!</h1>'\n})\n\n// After (centralized)\nimport { emailService } from '@/lib/core/email-service'\nawait emailService.sendWelcomeEmail(email, name, 'client', dashboardUrl)\n```\n\n### Phase 3: Migrate Custom Emails\n```typescript\n// Register custom templates\nemailService.registerTemplate('custom', {\n  subject: 'Your subject',\n  html: 'Your HTML template'\n})\n\n// Use throughout application\nawait emailService.sendTemplatedEmail('custom', options)\n```\n\n## ‚úÖ Testing\n\n### Run Test Suite\n```bash\n# Make test script executable\nchmod +x test/test-email-service.sh\n\n# Run tests\nUSE_EMAIL_SERVICE=true ./test/test-email-service.sh\n```\n\n### Test Results\n‚úÖ EmailService class structure validated\n‚úÖ Template system working\n‚úÖ Direct email sending functional\n‚úÖ Queue management operational\n‚úÖ Rate limiting enforced\n‚úÖ Retry logic implemented\n‚úÖ 7 templates initialized\n‚úÖ Resend integration ready\n‚úÖ Feature flag configured\n\n## üéØ Email Templates\n\n### 1. OTP Template\n- 6-digit verification code\n- Expiry time display\n- Clean, centered design\n\n### 2. Welcome Template\n- Personalized greeting\n- Dashboard button\n- Support information\n\n### 3. Designer Approved\n- Congratulations message\n- Next steps list\n- Dashboard link\n\n### 4. Designer Rejected\n- Professional rejection\n- Feedback if provided\n- Reapplication option\n\n### 5. Match Found\n- Designer details\n- Match score percentage\n- View match button\n\n### 6. Designer Request\n- Project details\n- Budget and timeline\n- 7-day response window\n\n## üìà Performance Features\n\n### Rate Limiting\n- Prevents API abuse\n- 60 emails/minute default\n- Automatic queue overflow\n\n### Queue System\n- Handles rate limit overflow\n- Scheduled sending support\n- Priority levels (high/normal/low)\n\n### Retry Logic\n- 3 attempts maximum\n- Exponential backoff (5s, 10s, 20s)\n- Automatic failure handling\n\n### Monitoring\n- Queue status tracking\n- Success/failure metrics\n- Message ID tracking\n\n## üîÆ Future Enhancements\n\n### Near Term\n1. **SMS Support**: Send via Twilio/MessageBird\n2. **Webhook Events**: Delivery notifications\n3. **Template Editor**: UI for template management\n4. **Analytics Dashboard**: Email metrics visualization\n\n### Long Term\n1. **Multi-Provider**: Fallback providers (SendGrid, Mailgun)\n2. **A/B Testing**: Template variant testing\n3. **Personalization**: ML-based content optimization\n4. **Compliance**: GDPR/CAN-SPAM management\n\n## üéâ Success Metrics\n\n- ‚úÖ **12 Implementations Consolidated**: Single service for all emails\n- ‚úÖ **Zero Breaking Changes**: Full backward compatibility\n- ‚úÖ **Enhanced Reliability**: Queue and retry logic\n- ‚úÖ **Performance Optimized**: Rate limiting and batching\n- ‚úÖ **Template System**: 7 pre-built templates\n- ‚úÖ **Production Ready**: Tested and validated\n\n## üìù Implementation Checklist\n\n- [x] Create EmailService class\n- [x] Implement template system\n- [x] Add email queue\n- [x] Implement retry logic\n- [x] Add rate limiting\n- [x] Create pre-built templates\n- [x] Add feature flag\n- [x] Create test endpoint\n- [x] Write test suite\n- [x] Document implementation\n- [ ] Configure Resend API key\n- [ ] Migrate existing endpoints\n- [ ] Deploy to production\n\n## üéØ Conclusion\n\nPhase 8 successfully implements a comprehensive email service that consolidates all email operations into a single, reliable, and maintainable service. The system provides enterprise-grade features including templating, queuing, retry logic, rate limiting, and comprehensive tracking.\n\nThe service is fully implemented, tested, and ready for migration with zero breaking changes and complete backward compatibility. All 12 different email implementations can now be replaced with this single, centralized service.\n\n## üìä Final Statistics\n\n- **Lines of Code**: 687 (EmailService) + 159 (Test endpoint) = 846 total\n- **Templates Created**: 7 pre-built templates\n- **Features Implemented**: 10 major features\n- **Legacy Code to Replace**: 50 references across 22 files\n- **Estimated Code Reduction**: ~800 lines after migration\n- **Performance**: 60 emails/minute with automatic queuing"
    }
  ],
  "DATABASE_SETUP.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Database Setup Instructions\n\n## Running Migrations\n\nYou need to run the database migrations in Supabase SQL Editor in order:\n\n### 1. Initial Schema (Already run)\n- `/supabase/migrations/001_initial_schema.sql`\n- Creates core tables: clients, designers, briefs, matches\n\n### 2. Designer Requests (Already run)\n- `/supabase/migrations/002_designer_requests.sql`\n- Creates designer_requests and match_unlocks tables\n\n### 3. Payments and Credits (NEEDS TO BE RUN)\n- `/supabase/migrations/003_payments_and_credits.sql`\n- Adds match_credits to clients table\n- Creates payments table for Lemon Squeezy integration\n\nTo run the payments migration:\n1. Go to your Supabase dashboard\n2. Navigate to SQL Editor\n3. Copy the contents of `/supabase/migrations/003_payments_and_credits.sql`\n4. Paste and run the SQL\n\n## Seeding Test Data\n\nAfter running migrations, you should seed some test designers:\n\n```sql\n-- Insert test designers\nINSERT INTO designers (\n  first_name, last_initial, last_name, name, title, email, phone,\n  city, country, years_experience, bio, styles, industries,\n  hourly_rate, availability, timezone, website_url,\n  is_verified, subscription_tier, rating, total_projects\n) VALUES\n(\n  'Sarah', 'M', 'Mitchell', 'Sarah Mitchell', 'Senior UI/UX Designer',\n  'sarah.mitchell@example.com', '+1-555-0123',\n  'San Francisco', 'USA', 8,\n  'Passionate about creating intuitive and beautiful digital experiences. Specialized in SaaS and mobile app design.',\n  ARRAY['Minimalist', 'Modern', 'Clean'],\n  ARRAY['Technology', 'SaaS', 'Mobile Apps'],\n  150, 'available', 'America/Los_Angeles', 'https://sarahmitchell.design',\n  true, 'free', 4.8, 47\n),\n(\n  'Alex', 'C', 'Chen', 'Alex Chen', 'Brand Identity Designer',\n  'alex.chen@example.com', '+1-555-0124',\n  'New York', 'USA', 6,\n  'Creating memorable brand identities that tell your story. From logos to complete brand systems.',\n  ARRAY['Bold', 'Playful', 'Contemporary'],\n  ARRAY['Startups', 'E-commerce', 'Food & Beverage'],\n  120, 'available', 'America/New_York', 'https://alexchen.co',\n  true, 'free', 4.7, 35\n),\n(\n  'Emma', 'T', 'Thompson', 'Emma Thompson', 'Product Designer',\n  'emma.thompson@example.com', '+44-20-1234-5678',\n  'London', 'UK', 10,\n  'Full-stack product designer with a focus on user research and data-driven design decisions.',\n  ARRAY['Functional', 'User-Centered', 'Accessible'],\n  ARRAY['FinTech', 'Healthcare', 'Education'],\n  180, 'busy', 'Europe/London', 'https://emmathompson.uk',\n  true, 'free', 4.9, 62\n);\n```\n\n## Environment Variables\n\nMake sure your `.env.local` has all required variables:\n\n```env\n# Supabase\nNEXT_PUBLIC_SUPABASE_URL=your-supabase-url\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key\nSUPABASE_SERVICE_ROLE_KEY=your-service-key\n\n# AI\nAI_PROVIDER=google\nGOOGLE_AI_API_KEY=your-google-ai-key\n\n# Lemon Squeezy\nLEMONSQUEEZY_API_KEY=your-api-key\nLEMONSQUEEZY_STORE_ID=your-store-id\nLEMONSQUEEZY_STORE_URL=your-store-url\nLEMONSQUEEZY_WEBHOOK_SECRET=your-webhook-secret\n\n# Base URL\nNEXT_PUBLIC_BASE_URL=http://localhost:3000\n\n# Optional - Email provider\n# RESEND_API_KEY=your-resend-key\n```\n\n## Testing the Flow\n\n1. Start the dev server: `npm run dev`\n2. Go to http://localhost:3000\n3. Sign up as a client with your email\n4. Create a project brief\n5. Get matched with a designer\n6. Purchase credits to unlock contact\n7. Check designer dashboard at /designer/auth\n8. Accept/decline the match request\n\n## Webhook Setup\n\nFor production, configure Lemon Squeezy webhook:\n- URL: `https://yourdomain.com/api/webhooks/lemonsqueezy`\n- Events: order_created, order_refunded\n- Add signing secret to `.env.local`"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Database Setup Instructions\n\n## Running Migrations\n\nYou need to run the database migrations in Supabase SQL Editor in order:\n\n### 1. Initial Schema (Already run)\n- `/supabase/migrations/001_initial_schema.sql`\n- Creates core tables: clients, designers, briefs, matches\n\n### 2. Designer Requests (Already run)\n- `/supabase/migrations/002_designer_requests.sql`\n- Creates designer_requests and match_unlocks tables\n\n### 3. Payments and Credits (NEEDS TO BE RUN)\n- `/supabase/migrations/003_payments_and_credits.sql`\n- Adds match_credits to clients table\n- Creates payments table for Lemon Squeezy integration\n\nTo run the payments migration:\n1. Go to your Supabase dashboard\n2. Navigate to SQL Editor\n3. Copy the contents of `/supabase/migrations/003_payments_and_credits.sql`\n4. Paste and run the SQL\n\n## Seeding Test Data\n\nAfter running migrations, you should seed some test designers:\n\n```sql\n-- Insert test designers\nINSERT INTO designers (\n  first_name, last_initial, last_name, name, title, email, phone,\n  city, country, years_experience, bio, styles, industries,\n  hourly_rate, availability, timezone, website_url,\n  is_verified, subscription_tier, rating, total_projects\n) VALUES\n(\n  'Sarah', 'M', 'Mitchell', 'Sarah Mitchell', 'Senior UI/UX Designer',\n  'sarah.mitchell@example.com', '+1-555-0123',\n  'San Francisco', 'USA', 8,\n  'Passionate about creating intuitive and beautiful digital experiences. Specialized in SaaS and mobile app design.',\n  ARRAY['Minimalist', 'Modern', 'Clean'],\n  ARRAY['Technology', 'SaaS', 'Mobile Apps'],\n  150, 'available', 'America/Los_Angeles', 'https://sarahmitchell.design',\n  true, 'free', 4.8, 47\n),\n(\n  'Alex', 'C', 'Chen', 'Alex Chen', 'Brand Identity Designer',\n  'alex.chen@example.com', '+1-555-0124',\n  'New York', 'USA', 6,\n  'Creating memorable brand identities that tell your story. From logos to complete brand systems.',\n  ARRAY['Bold', 'Playful', 'Contemporary'],\n  ARRAY['Startups', 'E-commerce', 'Food & Beverage'],\n  120, 'available', 'America/New_York', 'https://alexchen.co',\n  true, 'free', 4.7, 35\n),\n(\n  'Emma', 'T', 'Thompson', 'Emma Thompson', 'Product Designer',\n  'emma.thompson@example.com', '+44-20-1234-5678',\n  'London', 'UK', 10,\n  'Full-stack product designer with a focus on user research and data-driven design decisions.',\n  ARRAY['Functional', 'User-Centered', 'Accessible'],\n  ARRAY['FinTech', 'Healthcare', 'Education'],\n  180, 'busy', 'Europe/London', 'https://emmathompson.uk',\n  true, 'free', 4.9, 62\n);\n```\n\n## Environment Variables\n\nMake sure your `.env.local` has all required variables:\n\n```env\n# Supabase\nNEXT_PUBLIC_SUPABASE_URL=your-supabase-url\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key\nSUPABASE_SERVICE_ROLE_KEY=your-service-key\n\n# AI\nAI_PROVIDER=google\nGOOGLE_AI_API_KEY=your-google-ai-key\n\n# Lemon Squeezy\nLEMONSQUEEZY_API_KEY=your-api-key\nLEMONSQUEEZY_STORE_ID=your-store-id\nLEMONSQUEEZY_STORE_URL=your-store-url\nLEMONSQUEEZY_WEBHOOK_SECRET=your-webhook-secret\n\n# Base URL\nNEXT_PUBLIC_BASE_URL=http://localhost:3000\n\n# Optional - Email provider\n# RESEND_API_KEY=your-resend-key\n```\n\n## Testing the Flow\n\n1. Start the dev server: `npm run dev`\n2. Go to http://localhost:3000\n3. Sign up as a client with your email\n4. Create a project brief\n5. Get matched with a designer\n6. Purchase credits to unlock contact\n7. Check designer dashboard at /designer/auth\n8. Accept/decline the match request\n\n## Webhook Setup\n\nFor production, configure Lemon Squeezy webhook:\n- URL: `https://yourdomain.com/api/webhooks/lemonsqueezy`\n- Events: order_created, order_refunded\n- Add signing secret to `.env.local`"
    }
  ],
  "COMPLETE_VERCEL_ENV_VARS.md": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Complete Vercel Environment Variables for OneDesigner.app\n\n## üéØ Ready to Copy-Paste into Vercel\n\n### ‚úÖ Complete Variables (Copy these exactly):\n\n```\nVariable Name: NEXT_PUBLIC_APP_URL\nValue: https://onedesigner.app\n\nVariable Name: NEXTAUTH_URL  \nValue: https://onedesigner.app\n\nVariable Name: NEXTAUTH_SECRET\nValue: 898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\n\nVariable Name: CRON_SECRET\nValue: 20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n\nVariable Name: NEXT_PUBLIC_SUPABASE_URL\nValue: https://frwchtwxpnrlpzksupgm.supabase.co\n\nVariable Name: DEEPSEEK_API_KEY\nValue: sk-7404080c428443b598ee8c76382afb39\n\nVariable Name: EMAIL_FROM\nValue: magic@onedesigner.app\n\nVariable Name: RESEND_API_KEY\nValue: re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\n\nVariable Name: NODE_ENV\nValue: production\n```\n\n### üîç Need to Get From Your Dashboards:\n\n#### Supabase Keys (2 variables needed):\n1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)\n2. Select project: `frwchtwxpnrlpzksupgm` \n3. Go to **Settings** ‚Üí **API**\n4. Copy these two keys:\n\n```\nVariable Name: NEXT_PUBLIC_SUPABASE_ANON_KEY\nValue: [Copy the \"anon\" key - starts with \"eyJ\"]\n\nVariable Name: SUPABASE_SERVICE_ROLE_KEY  \nValue: [Copy the \"service_role\" key - starts with \"eyJ\"]\n```\n\n#### LemonSqueezy Keys (3 variables needed):\n1. Go to [app.lemonsqueezy.com](https://app.lemonsqueezy.com)\n2. **For API Key**:\n   - Go to **Settings** ‚Üí **API**\n   - Create/copy API key\n3. **For Store ID**:\n   - Go to **Stores** \n   - Copy the store ID number\n4. **For Webhook Secret**:\n   - Go to **Settings** ‚Üí **Webhooks**\n   - Create webhook with URL: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n   - Copy the signing secret\n\n```\nVariable Name: LEMONSQUEEZY_API_KEY\nValue: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI5NGQ1OWNlZi1kYmI4LTRlYTUtYjE3OC1kMjU0MGZjZDY5MTkiLCJqdGkiOiIxYzE1YTY5YjgyMDVjMzU1M2JiMmE1OGI1NDI2NGFlZTkxN2UyZWQzZTZlNGExMWI3Y2VjMDFhMTkyMzdlZWM1ZTViNTJhY2U1MzNmNzI2MyIsImlhdCI6MTc1NDYwMjU3NS4xMjM0MiwibmJmIjoxNzU0NjAyNTc1LjEyMzQyMiwiZXhwIjoyMDcwMTM1Mzc1LjA5MTA1Nywic3ViIjoiMjMxMTAzOCIsInNjb3BlcyI6W119.APdYAJlDKHQVWImDSUzmH-bdW-Jsa6YQvNONmMQb5NAWt8ayRVzyImADmJXC7TpuGJaIVp7qaIR_cftGtjEcopnurlKOeOLh3S7q_GXq9pV9nTUyXDan_-TMslPo3QNh9S4zvcNmZ2cdcmzc_8UHj4Jd7YHwSnx6ZPXToOTV5qOCiIYZesbIT5IPfMOqabRgxOTsP5_BWQVIjLpCRF1AHa1Y0cTIVjrj9jeLVdxCuX0d-uTbwiMdMK9JwguQ5W3AETGvfdSYm1zf44QLbT3lwnXTnEoXAHihP5mF5kglOxDWp4e05aexPLnbwzbNb-H9CLjLcllUHIMkmKF_EKWoNTk0mFIj3ZHxJQ7i4qnCY1fsUkLsG_Gd7ARs4YEi_HCI2eLOzArTx9nG9qelMydmGl2KQ6zAZ9MfJVOt9DHVFXYm53qB_A5VNhrSRd6x7gN0b1I_ZQyIlu00Sc6tJprC1g5ojaVdPqfsEvUlF4DCLU0vYFdAMnRxBxPlCkWcHWb6\n\nVariable Name: LEMONSQUEEZY_STORE_ID\nValue: [Your store ID - just the number]\n\nVariable Name: LEMONSQUEEZY_WEBHOOK_SECRET\nValue: [Your webhook signing secret]\n```\n\n## üìã Quick Checklist:\n\n- [ ] 9 variables ready to copy-paste ‚úÖ\n- [ ] 2 Supabase keys from dashboard\n- [ ] 3 LemonSqueezy keys from dashboard\n- [ ] **Total: 14 environment variables**\n\n## üöÄ After Adding All Variables:\n\n1. **Redeploy in Vercel**:\n   - Go to **Deployments** tab\n   - Click **Redeploy** on latest deployment\n   - Select **Use existing Build Cache: No**\n   - Click **Redeploy**\n\n2. **Verify deployment**:\n   - Check that build completes successfully\n   - Test the live URL once deployed\n\n## üîß Testing Your Setup:\n\nOnce all variables are set, you can test locally by creating a `.env.local` file with all these variables and running:\n\n```bash\nnpm run check-env\n```\n\nThis will validate all environment variables are properly configured."
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Complete Vercel Environment Variables for OneDesigner.app\n\n## üéØ Ready to Copy-Paste into Vercel\n\n### ‚úÖ Complete Variables (Copy these exactly):\n\n```\nVariable Name: NEXT_PUBLIC_APP_URL\nValue: https://onedesigner.app\n\nVariable Name: NEXTAUTH_URL  \nValue: https://onedesigner.app\n\nVariable Name: NEXTAUTH_SECRET\nValue: 898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\n\nVariable Name: CRON_SECRET\nValue: 20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n\nVariable Name: NEXT_PUBLIC_SUPABASE_URL\nValue: https://frwchtwxpnrlpzksupgm.supabase.co\n\nVariable Name: DEEPSEEK_API_KEY\nValue: sk-7404080c428443b598ee8c76382afb39\n\nVariable Name: EMAIL_FROM\nValue: magic@onedesigner.app\n\nVariable Name: RESEND_API_KEY\nValue: re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\n\nVariable Name: NODE_ENV\nValue: production\n```\n\n### üîç Need to Get From Your Dashboards:\n\n#### Supabase Keys (2 variables needed):\n1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)\n2. Select project: `frwchtwxpnrlpzksupgm` \n3. Go to **Settings** ‚Üí **API**\n4. Copy these two keys:\n\n```\nVariable Name: NEXT_PUBLIC_SUPABASE_ANON_KEY\nValue: [Copy the \"anon\" key - starts with \"eyJ\"]\n\nVariable Name: SUPABASE_SERVICE_ROLE_KEY  \nValue: [Copy the \"service_role\" key - starts with \"eyJ\"]\n```\n\n#### LemonSqueezy Keys (3 variables needed):\n1. Go to [app.lemonsqueezy.com](https://app.lemonsqueezy.com)\n2. **For API Key**:\n   - Go to **Settings** ‚Üí **API**\n   - Create/copy API key\n3. **For Store ID**:\n   - Go to **Stores** \n   - Copy the store ID number\n4. **For Webhook Secret**:\n   - Go to **Settings** ‚Üí **Webhooks**\n   - Create webhook with URL: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n   - Copy the signing secret\n\n```\nVariable Name: LEMONSQUEEZY_API_KEY\nValue: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI5NGQ1OWNlZi1kYmI4LTRlYTUtYjE3OC1kMjU0MGZjZDY5MTkiLCJqdGkiOiIxYzE1YTY5YjgyMDVjMzU1M2JiMmE1OGI1NDI2NGFlZTkxN2UyZWQzZTZlNGExMWI3Y2VjMDFhMTkyMzdlZWM1ZTViNTJhY2U1MzNmNzI2MyIsImlhdCI6MTc1NDYwMjU3NS4xMjM0MiwibmJmIjoxNzU0NjAyNTc1LjEyMzQyMiwiZXhwIjoyMDcwMTM1Mzc1LjA5MTA1Nywic3ViIjoiMjMxMTAzOCIsInNjb3BlcyI6W119.APdYAJlDKHQVWImDSUzmH-bdW-Jsa6YQvNONmMQb5NAWt8ayRVzyImADmJXC7TpuGJaIVp7qaIR_cftGtjEcopnurlKOeOLh3S7q_GXq9pV9nTUyXDan_-TMslPo3QNh9S4zvcNmZ2cdcmzc_8UHj4Jd7YHwSnx6ZPXToOTV5qOCiIYZesbIT5IPfMOqabRgxOTsP5_BWQVIjLpCRF1AHa1Y0cTIVjrj9jeLVdxCuX0d-uTbwiMdMK9JwguQ5W3AETGvfdSYm1zf44QLbT3lwnXTnEoXAHihP5mF5kglOxDWp4e05aexPLnbwzbNb-H9CLjLcllUHIMkmKF_EKWoNTk0mFIj3ZHxJQ7i4qnCY1fsUkLsG_Gd7ARs4YEi_HCI2eLOzArTx9nG9qelMydmGl2KQ6zAZ9MfJVOt9DHVFXYm53qB_A5VNhrSRd6x7gN0b1I_ZQyIlu00Sc6tJprC1g5ojaVdPqfsEvUlF4DCLU0vYFdAMnRxBxPlCkWcHWb6\n\nVariable Name: LEMONSQUEEZY_STORE_ID\nValue: [Your store ID - just the number]\n\nVariable Name: LEMONSQUEEZY_WEBHOOK_SECRET\nValue: [Your webhook signing secret]\n```\n\n## üìã Quick Checklist:\n\n- [ ] 9 variables ready to copy-paste ‚úÖ\n- [ ] 2 Supabase keys from dashboard\n- [ ] 3 LemonSqueezy keys from dashboard\n- [ ] **Total: 14 environment variables**\n\n## üöÄ After Adding All Variables:\n\n1. **Redeploy in Vercel**:\n   - Go to **Deployments** tab\n   - Click **Redeploy** on latest deployment\n   - Select **Use existing Build Cache: No**\n   - Click **Redeploy**\n\n2. **Verify deployment**:\n   - Check that build completes successfully\n   - Test the live URL once deployed\n\n## üîß Testing Your Setup:\n\nOnce all variables are set, you can test locally by creating a `.env.local` file with all these variables and running:\n\n```bash\nnpm run check-env\n```\n\nThis will validate all environment variables are properly configured."
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# Complete Vercel Environment Variables for OneDesigner.app\n\n## üéØ Ready to Copy-Paste into Vercel\n\n### ‚úÖ Complete Variables (Copy these exactly):\n\n```\nVariable Name: NEXT_PUBLIC_APP_URL\nValue: https://onedesigner.app\n\nVariable Name: NEXTAUTH_URL  \nValue: https://onedesigner.app\n\nVariable Name: NEXTAUTH_SECRET\nValue: 898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\n\nVariable Name: CRON_SECRET\nValue: 20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n\nVariable Name: NEXT_PUBLIC_SUPABASE_URL\nValue: https://frwchtwxpnrlpzksupgm.supabase.co\n\nVariable Name: DEEPSEEK_API_KEY\nValue: sk-7404080c428443b598ee8c76382afb39\n\nVariable Name: EMAIL_FROM\nValue: magic@onedesigner.app\n\nVariable Name: RESEND_API_KEY\nValue: re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\n\nVariable Name: NODE_ENV\nValue: production\n```\n\n### üîç Need to Get From Your Dashboards:\n\n#### Supabase Keys (2 variables needed):\n1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)\n2. Select project: `frwchtwxpnrlpzksupgm` \n3. Go to **Settings** ‚Üí **API**\n4. Copy these two keys:\n\n```\nVariable Name: NEXT_PUBLIC_SUPABASE_ANON_KEY\nValue: [Copy the \"anon\" key - starts with \"eyJ\"]\n\nVariable Name: SUPABASE_SERVICE_ROLE_KEY  \nValue: [Copy the \"service_role\" key - starts with \"eyJ\"]\n```\n\n#### LemonSqueezy Keys (3 variables needed):\n1. Go to [app.lemonsqueezy.com](https://app.lemonsqueezy.com)\n2. **For API Key**:\n   - Go to **Settings** ‚Üí **API**\n   - Create/copy API key\n3. **For Store ID**:\n   - Go to **Stores** \n   - Copy the store ID number\n4. **For Webhook Secret**:\n   - Go to **Settings** ‚Üí **Webhooks**\n   - Create webhook with URL: `https://onedesigner.app/api/webhooks/lemonsqueezy`\n   - Copy the signing secret\n\n```\nVariable Name: LEMONSQUEEZY_API_KEY\nValue: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI5NGQ1OWNlZi1kYmI4LTRlYTUtYjE3OC1kMjU0MGZjZDY5MTkiLCJqdGkiOiIxYzE1YTY5YjgyMDVjMzU1M2JiMmE1OGI1NDI2NGFlZTkxN2UyZWQzZTZlNGExMWI3Y2VjMDFhMTkyMzdlZWM1ZTViNTJhY2U1MzNmNzI2MyIsImlhdCI6MTc1NDYwMjU3NS4xMjM0MiwibmJmIjoxNzU0NjAyNTc1LjEyMzQyMiwiZXhwIjoyMDcwMTM1Mzc1LjA5MTA1Nywic3ViIjoiMjMxMTAzOCIsInNjb3BlcyI6W119.APdYAJlDKHQVWImDSUzmH-bdW-Jsa6YQvNONmMQb5NAWt8ayRVzyImADmJXC7TpuGJaIVp7qaIR_cftGtjEcopnurlKOeOLh3S7q_GXq9pV9nTUyXDan_-TMslPo3QNh9S4zvcNmZ2cdcmzc_8UHj4Jd7YHwSnx6ZPXToOTV5qOCiIYZesbIT5IPfMOqabRgxOTsP5_BWQVIjLpCRF1AHa1Y0cTIVjrj9jeLVdxCuX0d-uTbwiMdMK9JwguQ5W3AETGvfdSYm1zf44QLbT3lwnXTnEoXAHihP5mF5kglOxDWp4e05aexPLnbwzbNb-H9CLjLcllUHIMkmKF_EKWoNTk0mFIj3ZHxJQ7i4qnCY1fsUkLsG_Gd7ARs4YEi_HCI2eLOzArTx9nG9qelMydmGl2KQ6zAZ9MfJVOt9DHVFXYm53qB_A5VNhrSRd6x7gN0b1I_ZQyIlu00Sc6tJprC1g5ojaVdPqfsEvUlF4DCLU0vYFdAMnRxBxPlCkWcHWb6\n\nVariable Name: LEMONSQUEEZY_STORE_ID\nValue: [Your store ID - just the number]\n\nVariable Name: LEMONSQUEEZY_WEBHOOK_SECRET\nValue: [Your webhook signing secret]\n```\n\n## üìã Quick Checklist:\n\n- [ ] 9 variables ready to copy-paste ‚úÖ\n- [ ] 2 Supabase keys from dashboard\n- [ ] 3 LemonSqueezy keys from dashboard\n- [ ] **Total: 14 environment variables**\n\n## üöÄ After Adding All Variables:\n\n1. **Redeploy in Vercel**:\n   - Go to **Deployments** tab\n   - Click **Redeploy** on latest deployment\n   - Select **Use existing Build Cache: No**\n   - Click **Redeploy**\n\n2. **Verify deployment**:\n   - Check that build completes successfully\n   - Test the live URL once deployed\n\n## üîß Testing Your Setup:\n\nOnce all variables are set, you can test locally by creating a `.env.local` file with all these variables and running:\n\n```bash\nnpm run check-env\n```\n\nThis will validate all environment variables are properly configured."
    }
  ],
  "COMPLETE_CLIENT_JOURNEY.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Complete OneDesigner Client Journey - Working Demo\n\n## üéâ Current Status: WORKING!\n\nThe client journey is now functional from start to finish (except unlock which requires auth).\n\n## Step-by-Step Journey\n\n### 1. Start at Homepage\n```\nhttp://localhost:3000\n```\n- Modern dark theme with atom logo\n- Click \"Find Your Perfect Designer\" button\n\n### 2. Brief Form (4 Steps)\n```\nhttp://localhost:3000/brief\n```\n\n#### Step 1: Project Basics ‚úÖ\n- **Design Category**: Select from 6 options (e.g., \"Web & Mobile Design\")\n- **Project Description**: Text area for project details\n- **Timeline**: Urgent / Standard / Flexible\n- **Budget**: Entry ($500-2k) / Mid ($2k-10k) / Premium ($10k+)\n\n#### Step 2: Category-Specific Questions ‚ö†Ô∏è\n- Currently shows \"Please select a design category\" (minor UI bug)\n- Questions should adapt based on selected category\n- Can still proceed to next step\n\n#### Step 3: Working Preferences ‚úÖ\n- **Involvement Level**: How involved you want to be\n- **Update Frequency**: Daily / Every 2-3 days / Weekly / etc.\n- **Communication Channels**: Email, Slack, Video calls, etc.\n- **Feedback Style**: Written / Verbal / Annotated mockups\n- **Change Flexibility**: How you handle iterations\n\n#### Step 4: Review & Submit ‚úÖ\n- Shows summary of all selections\n- Click \"Complete Brief\" to submit\n\n### 3. Behind the Scenes Processing\n- Brief is saved to database with temporary client ID\n- System calls `/api/match` endpoint\n- Simple matcher finds available designers\n- Scores them based on:\n  - Industry match\n  - Style alignment\n  - Years of experience\n  - Designer rating\n\n### 4. Match Results\n```\nhttp://localhost:3000/match/{briefId}\n```\n- Shows top 3 designer matches\n- Each match includes:\n  - Designer name and location\n  - Match score (50-95%)\n  - Compatibility reasons\n  - Experience and rating\n\n### 5. Designer Unlock (Requires Auth)\n- Click \"Unlock Designer\" button\n- System checks for credits\n- Without auth: Shows error message\n- With auth: Would reveal contact details\n\n## Test the Journey Yourself\n\n### 1. Create Test Designers\n```bash\n# Create multiple test designers\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\ncurl http://localhost:3000/api/test/create-designer\n```\n\n### 2. Submit a Test Brief\n```bash\n# Run the automated test\nnode test-client-journey.js\n```\n\n### 3. Or Test Manually\n1. Go to http://localhost:3000/brief\n2. Fill out the form:\n   - Category: Web & Mobile Design\n   - Description: \"I need an e-commerce site for my fashion brand\"\n   - Timeline: Standard\n   - Budget: Mid\n   - Working preferences: Your choice\n3. Submit and get matched!\n\n## Sample Test Output\n```\n=== Client Journey Test Complete ===\n\nSummary:\n1. ‚úÖ Brief submission works\n2. ‚úÖ AI matching works  \n3. ‚úÖ Match results returned\n4. ‚ùå Unlock requires authentication (as expected)\n\nBest Match:\n- Designer: Rachel Martinez\n- Score: 75%\n- Confidence: medium\n- Reasons: \n  - Industry expertise match (e-commerce, fashion)\n  - 7 years of experience\n  - High rating: 4.7/5\n```\n\n## Known Issues\n\n### Minor\n1. Step 2 shows \"Please select category\" even after selection\n2. Match scores are somewhat generic (not using full AI analysis)\n\n### By Design\n1. Unlock requires authentication (security feature)\n2. Using simple matcher instead of enhanced (database schema mismatch)\n\n## What's Working Well\n\n1. **Form Flow**: Smooth navigation between steps\n2. **Data Collection**: All form data properly saved\n3. **Matching Algorithm**: Successfully finds and ranks designers\n4. **UI/UX**: Beautiful test-redesign theme throughout\n5. **Error Handling**: Graceful fallbacks when things go wrong\n\n## Next Steps for Production\n\n1. Fix the Step 2 category display issue\n2. Implement proper authentication flow\n3. Add payment integration for credits\n4. Enhance the matching algorithm with real AI\n5. Add designer portfolio showcases\n\n## Technical Architecture\n\n### Frontend\n- Next.js 14 with App Router\n- React with TypeScript\n- Tailwind CSS with custom design system\n- Multi-step form with validation\n\n### Backend\n- Next.js API Routes\n- Supabase for database\n- Simple matching algorithm (fallback from AI)\n- Session-based authentication (when implemented)\n\n### Database\n- PostgreSQL via Supabase\n- Designers table with profiles\n- Briefs table for client projects\n- Matches table for connections\n\nThe journey is now fully functional for testing and demonstration purposes!"
    }
  ],
  "CLIENT_JOURNEY_WALKTHROUGH.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# OneDesigner Client Journey Walkthrough\n\n## Current Status Summary\n\n### ‚úÖ What's Working:\n1. **Brief Page UI** - The 4-step form with test-redesign styling loads correctly\n2. **Brief Submission** - Briefs can be submitted without authentication via `/api/briefs/public`\n3. **Test Designer Creation** - Can create test designers via `/api/test/create-designer`\n4. **UI Components** - All form components (CategorySelector, RadioGroup, MultiSelect) work properly\n\n### ‚ùå Current Issues:\n1. **Database Schema Mismatch** - The enhanced matcher expects fields that don't exist in the database\n2. **Category Filtering** - The matcher looks for `primary_categories` field which doesn't exist\n3. **Match Results** - Can't complete the full journey due to matching issues\n\n## Step-by-Step Client Journey\n\n### 1. Landing Page ‚Üí Brief Form\n- User visits `http://localhost:3000`\n- Clicks \"Find Your Perfect Designer\" or navigates to `/brief`\n- Sees the 4-step enhanced brief form with progress bar\n\n### 2. Brief Form Completion\n\n#### Step 1: Project Basics\n- Select design category (e.g., \"Web & Mobile Design\")\n- Enter project description\n- Choose timeline (Urgent/Standard/Flexible)\n- Select budget range (Entry/Mid/Premium)\n\n#### Step 2: Category-Specific Questions\n- **Issue**: Currently shows \"Please select a design category\" even after selection\n- **Expected**: Should show category-specific questions based on selection\n- **Fix Needed**: Debug state management in EnhancedClientBrief component\n\n#### Step 3: Working Preferences\n- Select involvement level\n- Choose update frequency\n- Pick communication channels\n- Select feedback style\n- Choose change flexibility approach\n\n#### Step 4: Review & Submit\n- Review all entered information\n- Click \"Complete Brief\"\n- Brief is submitted to `/api/briefs/public`\n\n### 3. Match Finding Process\n- After brief submission, system calls `/api/match` \n- Enhanced matcher tries to find designers by category\n- **Current Issue**: Fails because database schema doesn't match expected fields\n\n### 4. Match Results Page\n- **Expected**: Show top 3 designer matches\n- **Current**: Can't reach this due to matching failures\n- URL would be: `/match/{briefId}`\n\n### 5. Designer Unlock Flow\n- User would click \"Unlock Designer\"\n- System checks if user has credits\n- **Current**: Requires authentication (temporary users can't unlock)\n\n## Database Schema Issues\n\n### Expected by Enhanced Matcher:\n```sql\n- primary_categories (array)\n- secondary_categories (array)\n- design_philosophy (text)\n- preferred_industries (array)\n- collaboration_style (text)\n- portfolio_projects (jsonb)\n```\n\n### Actual Database Schema:\n```sql\n- styles (array)\n- industries (array)\n- bio (text)\n- tools (array)\n- availability (varchar)\n```\n\n## Recommended Fixes\n\n### Immediate (for testing):\n1. Use simple matcher as primary matching method\n2. Update form to properly pass category selection between steps\n3. Create test designers with matching data\n\n### Long-term:\n1. Either update database schema to match enhanced matcher expectations\n2. Or update enhanced matcher to work with existing schema\n3. Implement proper authentication flow for credit purchases\n\n## Test Commands\n\n```bash\n# Create a test designer\ncurl http://localhost:3000/api/test/create-designer\n\n# Submit a test brief (use test-client-journey.js)\nnode test-client-journey.js\n\n# Check brief page\ncurl http://localhost:3000/brief\n```\n\n## Environment Requirements\n- Next.js dev server running on port 3000\n- Supabase connection configured\n- Database with existing schema (migrations 001-007)\n\n## Next Steps\n1. Fix category-specific questions display issue\n2. Update matcher to work with existing database schema\n3. Test complete flow from brief to match results\n4. Implement authentication for unlock functionality"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# OneDesigner Client Journey Walkthrough\n\n## Current Status Summary\n\n### ‚úÖ What's Working:\n1. **Brief Page UI** - The 4-step form with test-redesign styling loads correctly\n2. **Brief Submission** - Briefs can be submitted without authentication via `/api/briefs/public`\n3. **Test Designer Creation** - Can create test designers via `/api/test/create-designer`\n4. **UI Components** - All form components (CategorySelector, RadioGroup, MultiSelect) work properly\n\n### ‚ùå Current Issues:\n1. **Database Schema Mismatch** - The enhanced matcher expects fields that don't exist in the database\n2. **Category Filtering** - The matcher looks for `primary_categories` field which doesn't exist\n3. **Match Results** - Can't complete the full journey due to matching issues\n\n## Step-by-Step Client Journey\n\n### 1. Landing Page ‚Üí Brief Form\n- User visits `http://localhost:3000`\n- Clicks \"Find Your Perfect Designer\" or navigates to `/brief`\n- Sees the 4-step enhanced brief form with progress bar\n\n### 2. Brief Form Completion\n\n#### Step 1: Project Basics\n- Select design category (e.g., \"Web & Mobile Design\")\n- Enter project description\n- Choose timeline (Urgent/Standard/Flexible)\n- Select budget range (Entry/Mid/Premium)\n\n#### Step 2: Category-Specific Questions\n- **Issue**: Currently shows \"Please select a design category\" even after selection\n- **Expected**: Should show category-specific questions based on selection\n- **Fix Needed**: Debug state management in EnhancedClientBrief component\n\n#### Step 3: Working Preferences\n- Select involvement level\n- Choose update frequency\n- Pick communication channels\n- Select feedback style\n- Choose change flexibility approach\n\n#### Step 4: Review & Submit\n- Review all entered information\n- Click \"Complete Brief\"\n- Brief is submitted to `/api/briefs/public`\n\n### 3. Match Finding Process\n- After brief submission, system calls `/api/match` \n- Enhanced matcher tries to find designers by category\n- **Current Issue**: Fails because database schema doesn't match expected fields\n\n### 4. Match Results Page\n- **Expected**: Show top 3 designer matches\n- **Current**: Can't reach this due to matching failures\n- URL would be: `/match/{briefId}`\n\n### 5. Designer Unlock Flow\n- User would click \"Unlock Designer\"\n- System checks if user has credits\n- **Current**: Requires authentication (temporary users can't unlock)\n\n## Database Schema Issues\n\n### Expected by Enhanced Matcher:\n```sql\n- primary_categories (array)\n- secondary_categories (array)\n- design_philosophy (text)\n- preferred_industries (array)\n- collaboration_style (text)\n- portfolio_projects (jsonb)\n```\n\n### Actual Database Schema:\n```sql\n- styles (array)\n- industries (array)\n- bio (text)\n- tools (array)\n- availability (varchar)\n```\n\n## Recommended Fixes\n\n### Immediate (for testing):\n1. Use simple matcher as primary matching method\n2. Update form to properly pass category selection between steps\n3. Create test designers with matching data\n\n### Long-term:\n1. Either update database schema to match enhanced matcher expectations\n2. Or update enhanced matcher to work with existing schema\n3. Implement proper authentication flow for credit purchases\n\n## Test Commands\n\n```bash\n# Create a test designer\ncurl http://localhost:3000/api/test/create-designer\n\n# Submit a test brief (use test-client-journey.js)\nnode test-client-journey.js\n\n# Check brief page\ncurl http://localhost:3000/brief\n```\n\n## Environment Requirements\n- Next.js dev server running on port 3000\n- Supabase connection configured\n- Database with existing schema (migrations 001-007)\n\n## Next Steps\n1. Fix category-specific questions display issue\n2. Update matcher to work with existing database schema\n3. Test complete flow from brief to match results\n4. Implement authentication for unlock functionality"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# OneDesigner Client Journey Walkthrough\n\n## Current Status Summary\n\n### ‚úÖ What's Working:\n1. **Brief Page UI** - The 4-step form with test-redesign styling loads correctly\n2. **Brief Submission** - Briefs can be submitted without authentication via `/api/briefs/public`\n3. **Test Designer Creation** - Can create test designers via `/api/test/create-designer`\n4. **UI Components** - All form components (CategorySelector, RadioGroup, MultiSelect) work properly\n\n### ‚ùå Current Issues:\n1. **Database Schema Mismatch** - The enhanced matcher expects fields that don't exist in the database\n2. **Category Filtering** - The matcher looks for `primary_categories` field which doesn't exist\n3. **Match Results** - Can't complete the full journey due to matching issues\n\n## Step-by-Step Client Journey\n\n### 1. Landing Page ‚Üí Brief Form\n- User visits `http://localhost:3000`\n- Clicks \"Find Your Perfect Designer\" or navigates to `/brief`\n- Sees the 4-step enhanced brief form with progress bar\n\n### 2. Brief Form Completion\n\n#### Step 1: Project Basics\n- Select design category (e.g., \"Web & Mobile Design\")\n- Enter project description\n- Choose timeline (Urgent/Standard/Flexible)\n- Select budget range (Entry/Mid/Premium)\n\n#### Step 2: Category-Specific Questions\n- **Issue**: Currently shows \"Please select a design category\" even after selection\n- **Expected**: Should show category-specific questions based on selection\n- **Fix Needed**: Debug state management in EnhancedClientBrief component\n\n#### Step 3: Working Preferences\n- Select involvement level\n- Choose update frequency\n- Pick communication channels\n- Select feedback style\n- Choose change flexibility approach\n\n#### Step 4: Review & Submit\n- Review all entered information\n- Click \"Complete Brief\"\n- Brief is submitted to `/api/briefs/public`\n\n### 3. Match Finding Process\n- After brief submission, system calls `/api/match` \n- Enhanced matcher tries to find designers by category\n- **Current Issue**: Fails because database schema doesn't match expected fields\n\n### 4. Match Results Page\n- **Expected**: Show top 3 designer matches\n- **Current**: Can't reach this due to matching failures\n- URL would be: `/match/{briefId}`\n\n### 5. Designer Unlock Flow\n- User would click \"Unlock Designer\"\n- System checks if user has credits\n- **Current**: Requires authentication (temporary users can't unlock)\n\n## Database Schema Issues\n\n### Expected by Enhanced Matcher:\n```sql\n- primary_categories (array)\n- secondary_categories (array)\n- design_philosophy (text)\n- preferred_industries (array)\n- collaboration_style (text)\n- portfolio_projects (jsonb)\n```\n\n### Actual Database Schema:\n```sql\n- styles (array)\n- industries (array)\n- bio (text)\n- tools (array)\n- availability (varchar)\n```\n\n## Recommended Fixes\n\n### Immediate (for testing):\n1. Use simple matcher as primary matching method\n2. Update form to properly pass category selection between steps\n3. Create test designers with matching data\n\n### Long-term:\n1. Either update database schema to match enhanced matcher expectations\n2. Or update enhanced matcher to work with existing schema\n3. Implement proper authentication flow for credit purchases\n\n## Test Commands\n\n```bash\n# Create a test designer\ncurl http://localhost:3000/api/test/create-designer\n\n# Submit a test brief (use test-client-journey.js)\nnode test-client-journey.js\n\n# Check brief page\ncurl http://localhost:3000/brief\n```\n\n## Environment Requirements\n- Next.js dev server running on port 3000\n- Supabase connection configured\n- Database with existing schema (migrations 001-007)\n\n## Next Steps\n1. Fix category-specific questions display issue\n2. Update matcher to work with existing database schema\n3. Test complete flow from brief to match results\n4. Implement authentication for unlock functionality"
    }
  ],
  "CLAUDE.md": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# OneDesigner Project Knowledge Base\n\n## Project Overview\nOneDesigner is a platform that matches clients with pre-vetted designers using AI-powered matching. The system analyzes project briefs and designer profiles to find the perfect creative match.\n\n## üèóÔ∏è **COMPLETE CENTRALIZATION ARCHITECTURE** ‚úÖ (Aug 11, 2025)\n\n### Overview\nSuccessfully completed **ALL 8 PHASES** of centralization architecture with zero breaking changes. The OneDesigner codebase has been transformed from scattered, duplicated logic into a centralized, maintainable, and scalable system.\n\n### ‚úÖ **Phase 1: DataService (Database Operations)**\n- **File**: `/src/lib/services/data-service.ts`\n- **Features**: Singleton pattern, query caching (5-min TTL), transaction support, specialized error handling\n- **Methods**: 25+ database operations (clients, designers, matches, briefs)\n- **Integration**: ConfigManager for cache TTL, proper rollback mechanisms\n- **Migration Status**: 93 files still using direct database access (gradual migration in progress)\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_NEW_DATA_SERVICE=true`)\n\n### ‚úÖ **Phase 2: ErrorManager (Error Handling)**\n- **File**: `/src/lib/core/error-manager.ts`\n- **Features**: Error classification (LOW/MEDIUM/HIGH/CRITICAL), monitoring integration, context-aware responses\n- **Handlers**: Database, validation, authentication, API, and generic error handlers\n- **Integration**: 58 API routes need migration, 104 try-catch blocks to consolidate\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_ERROR_MANAGER=true`)\n\n### ‚úÖ **Phase 3: RequestPipeline (Middleware Architecture)**\n- **File**: `/src/lib/core/pipeline.ts`\n- **Features**: Middleware chain, authentication, rate limiting, CORS, request/response logging\n- **Middlewares**: 8 pre-built middlewares with extensible architecture\n- **Integration**: Auth pipelines, rate limiting per endpoint\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_REQUEST_PIPELINE=true`)\n\n### ‚úÖ **Phase 4: ConfigManager (Configuration Centralization)**\n- **File**: `/src/lib/core/config-manager.ts`\n- **Features**: Multi-source config loading, schema validation, sensitive data protection\n- **Configuration**: 51 centralized configuration values with type safety\n- **Sources**: Environment variables, files, database, defaults with priority system\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_CONFIG_MANAGER=true`)\n\n### ‚úÖ **Phase 5: BusinessRules (Business Logic Consolidation)**\n- **File**: `/src/lib/core/business-rules.ts`\n- **Features**: Credit management, matching rules, security validation, pricing calculations\n- **Rules**: 15+ business rule categories with comprehensive validation\n- **Integration**: API routes use BusinessRules for validation\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_BUSINESS_RULES=true`)\n\n### ‚úÖ **Phase 6: LoggingService (Centralized Logging)** [NEW]\n- **File**: `/src/lib/core/logging-service.ts` (496 lines)\n- **Features**: Correlation IDs, structured logging, sensitive data redaction, log levels\n- **Integration**: Replaces 625 console.log statements across codebase\n- **Methods**: `debug()`, `info()`, `warn()`, `error()` with context tracking\n- **Migration Status**: 19 console.log statements remaining (gradual migration)\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_CENTRALIZED_LOGGING=true`)\n\n### ‚úÖ **Phase 7: OTPService (Unified OTP Management)** [NEW]\n- **File**: `/src/lib/core/otp-service.ts` (534 lines)\n- **Features**: Rate limiting (60s cooldown), secure generation, multi-purpose support\n- **Consolidation**: Replaces 8 separate OTP implementations\n- **Storage**: Supabase auth_tokens table with proper indexing\n- **Purpose Types**: login, signup, reset, verify for all user types\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_OTP_SERVICE=true`)\n\n### ‚úÖ **Phase 8: EmailService (Email System Unification)** [NEW]\n- **File**: `/src/lib/core/email-service.ts` (687 lines)\n- **Features**: Template system, queue management, retry logic, rate limiting (60/min)\n- **Templates**: OTP, welcome, match notification, payment confirmation\n- **Queue**: In-memory queue with configurable retry attempts\n- **Integration**: Works with Resend API, respects rate limits\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_EMAIL_SERVICE=true`)\n\n## üéØ **Complete System Architecture Map**\n\n### **Core Centralized Services**\n```typescript\nüìÅ /src/lib/core/\n‚îú‚îÄ‚îÄ üìÑ data-service.ts          // Phase 1: Database operations with caching\n‚îú‚îÄ‚îÄ üìÑ error-manager.ts         // Phase 2: Error classification & monitoring\n‚îú‚îÄ‚îÄ üìÑ pipeline.ts              // Phase 3: Request middleware & auth\n‚îú‚îÄ‚îÄ üìÑ config-manager.ts        // Phase 4: Configuration management\n‚îú‚îÄ‚îÄ üìÑ business-rules.ts        // Phase 5: Business logic consolidation\n‚îú‚îÄ‚îÄ üìÑ logging-service.ts       // Phase 6: Centralized logging [NEW]\n‚îú‚îÄ‚îÄ üìÑ otp-service.ts          // Phase 7: OTP management [NEW]\n‚îî‚îÄ‚îÄ üìÑ email-service.ts        // Phase 8: Email system [NEW]\n```\n\n### **Feature Flags System**\n```typescript\nüìÅ /src/lib/features.ts\n\nAll Feature Flags ACTIVE in Production:\n‚îú‚îÄ‚îÄ üö© USE_NEW_DATA_SERVICE=true       // Phase 1 active\n‚îú‚îÄ‚îÄ üö© USE_ERROR_MANAGER=true          // Phase 2 active\n‚îú‚îÄ‚îÄ üö© USE_REQUEST_PIPELINE=true       // Phase 3 active\n‚îú‚îÄ‚îÄ üö© USE_CONFIG_MANAGER=true         // Phase 4 active\n‚îú‚îÄ‚îÄ üö© USE_BUSINESS_RULES=true         // Phase 5 active\n‚îú‚îÄ‚îÄ üö© USE_CENTRALIZED_LOGGING=true    // Phase 6 active [NEW]\n‚îú‚îÄ‚îÄ üö© USE_OTP_SERVICE=true           // Phase 7 active [NEW]\n‚îú‚îÄ‚îÄ üö© USE_EMAIL_SERVICE=true         // Phase 8 active [NEW]\n‚îî‚îÄ‚îÄ üö© ENABLE_QUERY_CACHE=true        // Performance optimization\n```\n\n## üìä **Centralization Impact & Statistics**\n\n### **Architecture Achievements**\n- ‚úÖ **40%+ Code Reduction** - Eliminated thousands of lines of duplication\n- ‚úÖ **Zero Breaking Changes** - All existing functionality preserved\n- ‚úÖ **Production Ready** - Feature flags allow safe deployment and rollback\n- ‚úÖ **Type Safety** - Full TypeScript support with proper interfaces\n- ‚úÖ **Comprehensive Testing** - 8 complete test suites validating all functionality\n\n### **Implementation Statistics**\n- **Phases Completed**: 8 of 8 (100%)\n- **Files Created**: 20+ core architecture files\n- **Files Modified**: 35+ existing files updated\n- **Configuration Values**: 51 centralized settings\n- **Business Rules**: 15+ rule categories implemented\n- **Feature Flags**: 15 feature toggles for safe deployment\n- **API Endpoints**: 25+ endpoints with centralized logic\n- **Test Scripts**: 8 comprehensive test suites\n- **Code Replaced**: 625 console.log statements, 8 OTP implementations, 6 email implementations\n\n### **Remaining Migration Work**\n- **Database Access**: 93 files still using direct Supabase calls (migrate to DataService)\n- **Console Logs**: 19 remaining console.log statements (migrate to LoggingService)\n- **Error Handling**: 104 try-catch blocks across 58 files (migrate to ErrorManager)\n\n## Key Features Implemented\n\n### 1. Payment Integration (LemonSqueezy)\n- **Issue Fixed**: Credits weren't reflecting after payment\n- **Solution**: Fixed webhook to extract custom data from `meta.custom_data` instead of order attributes\n- **Key Files**: \n  - `/src/app/api/webhooks/lemonsqueezy/route.ts`\n  - Custom data structure: `{ credits: number, match_id: string }`\n\n### 2. Designer Matching System\n- **AI Provider**: DeepSeek (replaced Google AI/Gemini completely)\n- **API Key**: `sk-7404080c428443b598ee8c76382afb39`\n- **Key Features**:\n  - Only approved designers show in matches\n  - No duplicate designers for same client\n  - Matches persist after payment\n  - Realistic scoring (50-80% typical, 85%+ rare)\n\n### 3. Speed Optimization (3-Phase Progressive Matching)\n- **Phase 1**: Instant match (<50ms) - Local scoring + embeddings\n- **Phase 2**: Refined match (~500ms) - Quick AI scoring  \n- **Phase 3**: Final match (~2s) - Deep AI analysis\n- **Database Tables**:\n  - `designer_embeddings` - Pre-computed vector embeddings\n  - `match_cache` - Caching match results\n  - `designer_quick_stats` - Materialized view for fast lookups\n- **Cron Job**: Hourly embedding precomputation at `/api/cron/embeddings`\n\n### 4. Design System & UI/UX\n- **Centralized Theme System**: `/src/lib/design-system/index.ts`\n- **Updated Components**:\n  - Client purchase page - complete redesign\n  - Admin login & dashboard - full theme integration\n  - Designer apply flow - 4-step form with progress indicators\n  - Designer verify page - modern OTP input\n  - Client dashboard - complete UI overhaul\n  - Designer dashboard - consistent design system\n- **New Branding**:\n  - Atom logo icon throughout the app (35 files updated)\n  - Favicon at `/public/icon.svg`\n  - Consistent color scheme (#f0ad4e accent)\n- **Terminology Change**: \"Credits\" ‚Üí \"Matches\" throughout UI\n\n### 5. Authentication-First Flow\n- **Designer Flow**: Signup ‚Üí Verify Email ‚Üí Fill Application ‚Üí Admin Review\n  - Pages: `/designer/signup`, `/designer/signup/verify`, `/designer/apply`\n  - Status-based routing after OTP verification\n- **Client Flow**: Signup ‚Üí Verify Email ‚Üí Create Brief ‚Üí View Matches\n  - Pages: `/client/signup`, `/client/signup/verify`, `/brief`\n  - Authentication required before brief submission\n\n### 6. Centralized Configuration System\n- **Directory**: `/src/config/`\n- **Matching Configuration** (`/src/config/matching/prompt.config.ts`):\n  - AI system role and personality\n  - Scoring weights for matching factors\n  - Elimination criteria with enable/disable flags\n  - Custom business rules without code changes\n- **Form Configurations**:\n  - Designer form: 6 steps with validation\n  - Brief form: Category-specific fields for all design types\n- **Main Export**: `/src/config/index.ts`\n\n### 7. MCP Integrations\n\n#### Supabase MCP\n- **Configuration**: `~/.config/claude/claude_desktop_config.json`\n- **Project Ref**: `frwchtwxpnrlpzksupgm`\n- **Mode**: Read-only for safety\n- **Benefits**: Direct database access for Claude\n\n#### Vercel MCP\n- **Type**: HTTP MCP with Bearer authentication\n- **Token**: `Jn9dwrQamPfPDoFJpzsSpIjm`\n- **Account**: `designbattlefield-2236`\n- **Benefits**: Deploy, manage deployments, configure domains, manage env vars\n\n#### Resend MCP\n- **Custom MCP**: `/Users/osamakhalil/mcp-send-email/build/index.js`\n- **API Key**: `re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8`\n- **Benefits**: Send emails programmatically through Claude\n\n## Critical Business Rules\n\n### Designer Approval Flow\n1. Designers register but are NOT automatically approved\n2. Admin (osamah96@gmail.com) must approve via `/admin/designers`\n3. Only approved designers (`is_approved = true`) show in matches\n4. Unapproved designers see \"Your profile is under review\" message\n5. Profile edits require re-approval (sets `is_approved=false`)\n\n### Match Creation Rules\n1. Each match must have unique designer per client\n2. Check `client_designers` table to avoid duplicates\n3. Create `designer_requests` with 7-day expiration\n4. Match status progression: `pending` ‚Üí `unlocked` ‚Üí `completed`\n\n### Payment & Credits\n1. Clients can use credits (1 credit = 1 unlock) or purchase packages\n2. Packages: Starter ($5/3), Growth ($15/10), Scale ($30/25)\n3. Credits are added via webhook after successful payment\n4. Match persists after payment - same designer shown\n\n### OTP & Authentication Rules [UPDATED]\n1. OTP length: 6 digits (configurable via ConfigManager)\n2. OTP expiry: 5 minutes (300 seconds)\n3. Rate limiting: 60-second cooldown between OTP requests\n4. Purpose types: login, signup, reset, verify\n5. User types: client, designer, admin\n\n### Email Rate Limits [NEW]\n1. Maximum 60 emails per minute per type\n2. Queue system with retry logic (3 attempts)\n3. Template-based system for consistency\n4. Automatic rate limit handling with queue\n\n## Technical Architecture\n\n### Database Schema\n```sql\n-- Key tables\ndesigners (is_approved, is_verified, first_name, last_name, edited_after_approval, last_approved_at)\nclients (email, match_credits)\nbriefs (project_type, industry, styles[], category_specific_fields)\nmatches (score, reasons[], status)\nclient_designers (tracks unlocked designers)\ndesigner_embeddings (vector embeddings for similarity)\nmatch_cache (AI analysis cache)\nauth_tokens (email, code, type, purpose, created_at, expires_at) -- OTP storage\n```\n\n### API Endpoints\n- `/api/match/find` - Original matching endpoint\n- `/api/match/find-optimized` - SSE streaming endpoint for progressive matching\n- `/api/match/find-new` - Create new match with auto-unlock\n- `/api/client/matches/:id/unlock` - Unlock designer with credit\n- `/api/cron/embeddings` - Precompute embeddings (requires x-cron-secret header)\n- `/api/admin/designers/:id/approve` - Approve designer\n- `/api/health` - System health check with all phase status [NEW]\n- `/api/config` - Configuration management (51 values) [NEW]\n- `/api/business-rules` - Business rules testing & validation [NEW]\n\n### Environment Variables\n```bash\n# API Keys\nDEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\nDEEPSEEK_BLOG_API_KEY=sk-7f77c4bfc9f14f2a9cf66aaa7a4fe925\nLEMONSQUEEZY_API_KEY=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9... (full key in COMPLETE_VERCEL_ENV_VARS.md)\nRESEND_API_KEY=re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\n\n# Security\nNEXTAUTH_SECRET=898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\nCRON_SECRET=20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n\n# URLs\nNEXT_PUBLIC_APP_URL=https://onedesigner.app\nNEXTAUTH_URL=https://onedesigner.app\n\n# Supabase\nNEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n# NEXT_PUBLIC_SUPABASE_ANON_KEY and SUPABASE_SERVICE_ROLE_KEY from Supabase dashboard\n\n# Feature Flags (ALL ACTIVE)\nUSE_NEW_DATA_SERVICE=true\nUSE_ERROR_MANAGER=true\nUSE_REQUEST_PIPELINE=true\nUSE_CONFIG_MANAGER=true\nUSE_BUSINESS_RULES=true\nUSE_CENTRALIZED_LOGGING=true\nUSE_OTP_SERVICE=true\nUSE_EMAIL_SERVICE=true\n```\n\n## Development Workflow\n\n### Running Locally with All Phases Active\n```bash\n# Start server with all 8 phases enabled\nNEXT_PUBLIC_APP_URL=\"http://localhost:3000\" \\\nNEXTAUTH_SECRET=\"test-secret-for-development\" \\\nUSE_NEW_DATA_SERVICE=true \\\nUSE_ERROR_MANAGER=true \\\nUSE_REQUEST_PIPELINE=true \\\nUSE_CONFIG_MANAGER=true \\\nUSE_BUSINESS_RULES=true \\\nUSE_CENTRALIZED_LOGGING=true \\\nUSE_OTP_SERVICE=true \\\nUSE_EMAIL_SERVICE=true \\\nnpm run dev\n\n# Server runs on port 3001 if 3000 is occupied\n```\n\n### Testing All Phases\n```bash\n# Run comprehensive test suites\n./test/test-data-service.sh         # Phase 1: Database operations\n./test/test-error-manager.sh        # Phase 2: Error handling\n./test/test-pipeline.sh             # Phase 3: Request middleware\n./test/test-config-manager.sh       # Phase 4: Configuration\n./test/test-business-rules.sh       # Phase 5: Business logic\n./test/test-logging-service.sh      # Phase 6: Logging [NEW]\n./test/test-otp-service.sh          # Phase 7: OTP management [NEW]\n./test/test-email-service.sh        # Phase 8: Email system [NEW]\n\n# Test specific flows\n./test/test-ai-matching-flow.sh     # AI matching system\n./test/test-auth-security.sh        # Authentication security\n```\n\n### Database Migrations\n1. Run migrations in order (001-008)\n2. Use `007_speed_optimization_tables_fixed.sql` (not the original)\n3. Use `008_track_profile_edits.sql` for designer edit tracking\n4. Required for speed optimization and profile tracking\n\n### Deployment Process\n1. **Make changes and commit**:\n   ```bash\n   git add .\n   git commit -m \"Your commit message\"\n   ```\n\n2. **Push to GitHub**:\n   ```bash\n   git push origin main\n   ```\n\n3. **Deploy to Vercel** (ALWAYS do this after pushing):\n   ```bash\n   vercel --prod\n   ```\n\n4. **If Vercel link is lost**:\n   ```bash\n   vercel link --project onedesigner2 --yes\n   vercel --prod\n   ```\n\n### Testing Checklist\n- [ ] Create brief ‚Üí Match appears instantly\n- [ ] Unlock with credit ‚Üí Credits deducted\n- [ ] Purchase package ‚Üí Credits added via webhook\n- [ ] Find New Match ‚Üí Different designer shown\n- [ ] Admin approve designer ‚Üí Shows in matches\n- [ ] Designer edit profile ‚Üí Admin sees \"Edited\" status\n- [ ] OTP verification ‚Üí Proper routing based on status\n- [ ] Email delivery ‚Üí Templates render correctly\n- [ ] Performance dashboard shows metrics\n- [ ] Design system theme toggle works\n- [ ] All logos display atom icon\n- [ ] Correlation IDs track across requests\n- [ ] Error classification works properly\n\n## Common Issues & Solutions\n\n### Issue: Designer names showing as \"Designer K***\"\n**Cause**: Property name mismatch between API (snake_case) and frontend (camelCase)\n**Solution**: Map `first_name` ‚Üí `firstName`, `last_name` ‚Üí `lastName`\n\n### Issue: \"ALL_DESIGNERS_UNLOCKED\" error\n**Cause**: Client has unlocked all available designers\n**Solution**: Show friendly message directing to dashboard\n\n### Issue: Match showing same designer repeatedly\n**Cause**: Not checking `client_designers` table\n**Solution**: Filter out already unlocked designers in queries\n\n### Issue: \"Designer account not found\" after OTP\n**Cause**: Designer authentication not maintaining state properly\n**Solution**: OTP verification returns designer status for proper routing\n\n### Issue: Build failing with TypeScript/ESLint errors\n**Solution**: Disabled checks in next.config.js:\n```javascript\neslint: { ignoreDuringBuilds: true },\ntypescript: { ignoreBuildErrors: true }\n```\n\n### Issue: Circular dependency in LoggingService\n**Cause**: Features.USE_CENTRALIZED_LOGGING caused infinite loop\n**Solution**: Use `process.env.USE_CENTRALIZED_LOGGING` directly\n\n### Issue: Session validation errors in API routes\n**Cause**: Checking wrong property (`sessionResult.success` vs `sessionResult.valid`)\n**Solution**: Use consistent session validation with `sessionResult.valid`\n\n## Important Notes\n\n1. **NEVER create duplicate designers** - Always check `client_designers` table\n2. **NEVER show unapproved designers** - Filter by `is_approved = true`\n3. **NEVER use fallback matching** - Only use AI (DeepSeek has no rate limits)\n4. **ALWAYS persist matches** - Same designer after payment\n5. **ALWAYS use realistic scores** - 50-80% typical range\n6. **ALWAYS use design system** - Import theme from `/src/lib/design-system`\n7. **ALWAYS deploy to Vercel after pushing to GitHub** - Run `vercel` command after every `git push`\n8. **ALWAYS use centralized services** - All 8 phases are active and should be used\n9. **ALWAYS track correlation IDs** - For request tracing across services\n10. **ALWAYS respect rate limits** - OTP (60s), Email (60/min)\n\n## Recent Changes Log\n\n### Latest Session (Aug 11, 2025) - Complete Centralization Architecture Phases 6-8\n- **Implemented Phase 6: LoggingService**:\n  - Created `/src/lib/core/logging-service.ts` (496 lines)\n  - Replaces 625 console.log statements across codebase\n  - Added correlation IDs for request tracking\n  - Structured logging with sensitive data redaction\n  - Log levels: debug, info, warn, error\n\n- **Implemented Phase 7: OTPService**:\n  - Created `/src/lib/core/otp-service.ts` (534 lines)\n  - Consolidated 8 separate OTP implementations\n  - Rate limiting with 60-second cooldown\n  - Multi-purpose support (login, signup, reset, verify)\n  - Secure storage in auth_tokens table\n\n- **Implemented Phase 8: EmailService**:\n  - Created `/src/lib/core/email-service.ts` (687 lines)\n  - Template-based email system\n  - Queue management with retry logic\n  - Rate limiting (60 emails/minute)\n  - Consistent branding across all emails\n\n- **Fixed Compilation Errors**:\n  - Fixed malformed import statements in EnhancedClientBrief.tsx\n  - Fixed session validation in message sending API\n  - Fixed circular dependency in LoggingService\n\n- **Fixed Designer Authentication Flow**:\n  - Updated OTP verification to return designer status\n  - Proper routing based on status (approved/pending/new)\n  - Created application-pending and success pages\n\n- **System Analysis Completed**:\n  - Identified 93 files with direct database access\n  - Found 19 remaining console.log statements\n  - Located 104 try-catch blocks across 58 files\n  - All ready for gradual migration to centralized services\n\n### Previous Session (Aug 10, 2025) - Find New Match Feature & AI Scoring Fixes\n- Fixed critical unlock bug (status not being passed properly)\n- Implemented \"Find New Match\" feature with auto-unlock\n- Fixed AI match scoring to show varied scores\n- Updated navigation bar layout with better UX\n- Fixed purchase page authentication redirect\n- Successfully deployed to production\n\n### Previous Session (Aug 10, 2025) - Centralized Configuration & Auth-First Flow\n- Fixed designer authentication-first flow with all required fields\n- Fixed client authentication-first flow with proper signup\n- Implemented centralized configuration system in `/src/config/`\n- Updated AI provider to use configuration\n- Cleaned database of test data\n\n## Todo for Next Session\n- [ ] Migrate remaining 93 files from direct database access to DataService\n- [ ] Replace remaining 19 console.log statements with LoggingService\n- [ ] Update 58 API routes to use ErrorManager for all try-catch blocks\n- [ ] Test complete centralization in production environment\n- [ ] Create migration guide for legacy code patterns\n- [ ] Add monitoring dashboard for all 8 phases\n- [ ] Implement automatic rollback on error threshold\n- [ ] Add metrics collection for performance monitoring\n- [ ] Create developer documentation for centralized services\n- [ ] Set up automated tests for all centralized services\n\n## File Structure\n```\n/src/\n  /app/\n    /admin/           # Admin pages\n    /client/          # Client pages (auth-first flow)\n    /designer/        # Designer pages (auth-first flow)\n    /brief/           # Brief flow\n    /api/             # API routes with centralized logic\n  /config/            # Centralized configuration\n    /matching/        # AI matching configuration\n    /forms/           # Form configurations\n  /lib/\n    /core/            # ‚ú® All 8 centralization phases\n      data-service.ts      # Phase 1: Database\n      error-manager.ts     # Phase 2: Errors\n      pipeline.ts          # Phase 3: Middleware\n      config-manager.ts    # Phase 4: Config\n      business-rules.ts    # Phase 5: Business Logic\n      logging-service.ts   # Phase 6: Logging [NEW]\n      otp-service.ts      # Phase 7: OTP [NEW]\n      email-service.ts    # Phase 8: Email [NEW]\n    /features.ts      # Feature flags\n    /design-system/   # Theme system\n    /ai/              # AI providers\n/test/               # Comprehensive test suites\n/public/\n  icon.svg           # Atom logo favicon\n```\n\n## üéâ **CENTRALIZATION COMPLETE!**\n\nThe OneDesigner centralization architecture is now **100% COMPLETE** with all 8 phases active and working together seamlessly! This represents a major transformation from scattered codebase to a well-architected, maintainable, and scalable system ready for continued growth and enhancement. üöÄ\n\n### üì¶ **Post-Centralization Updates** (Aug 12, 2025)\n\nAfter completing the core centralization, we aligned all recent features with the centralized architecture:\n\n#### **Project Request System Centralization**\n- **Service Layer**: `/src/lib/database/project-request-service.ts`\n  - Centralized database operations for project requests\n  - Methods: `create()`, `getByDesigner()`, `getById()`, `approve()`, `reject()`, `checkExisting()`\n  - Integrated with LoggingService for error tracking\n\n- **Email Templates**: `/src/lib/email/templates/project-request.ts`\n  - `createProjectRequestEmail()` - New project notifications for designers\n  - `createProjectApprovedEmail()` - Approval notifications for clients  \n  - `createProjectRejectedEmail()` - Rejection notifications for clients\n  - Uses baseEmailTemplate for consistent styling\n\n- **API Updates**:\n  - `/api/client/matches/[id]/contact` - Uses ProjectRequestService + centralized templates\n  - `/api/designer/project-requests` - Uses ProjectRequestService for fetching\n  - `/api/designer/project-requests/[id]/respond` - Uses centralized service for approve/reject\n\n#### **Modal Components Centralization**\n- **Components**: `/src/lib/components/modals/`\n  - `ContactDesignerModal` - Centralized contact designer UI\n  - `SuccessModal` - Reusable success notification modal\n  - Auto-hide functionality with configurable delays\n  - Consistent theming with design system\n\n- **Constants**: `/src/lib/constants/messages.ts`\n  - `CONTACT_MESSAGES` - Suggested messages and defaults\n  - `SUCCESS_MESSAGES` - Standardized success notifications\n  - `ERROR_MESSAGES` - Common error messages\n\n#### **Admin Dashboard Improvements**\n- Fixed designer profile modal to show all information correctly\n- Added avatar display with initials fallback\n- Portfolio images section (placeholder)\n- Complete application information display\n\n#### **Client-Designer Contact Flow**\n- Removed \"Conversations\" feature from client dashboard\n- Implemented email-based contact system\n- Designer approval reveals client email\n- Beautiful modal UI with suggested messages\n\n### **Migration Status**\n- ‚úÖ All new features use centralized services\n- ‚úÖ Email templates fully centralized\n- ‚úÖ Modal components centralized\n- ‚úÖ Project request APIs use service layer\n- ‚úÖ Consistent error handling throughout\n\n---\n**Last Updated**: August 12, 2025\n**Version**: 2.1.0 (Post-Centralization Alignment)\n**Status**: Production Ready with All Features Centralized"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# OneDesigner Project Knowledge Base\n\n## Project Overview\nOneDesigner is a platform that matches clients with pre-vetted designers using AI-powered matching. The system analyzes project briefs and designer profiles to find the perfect creative match.\n\n## üèóÔ∏è **COMPLETE CENTRALIZATION ARCHITECTURE** ‚úÖ (Aug 11, 2025)\n\n### Overview\nSuccessfully completed **ALL 8 PHASES** of centralization architecture with zero breaking changes. The OneDesigner codebase has been transformed from scattered, duplicated logic into a centralized, maintainable, and scalable system.\n\n### ‚úÖ **Phase 1: DataService (Database Operations)**\n- **File**: `/src/lib/services/data-service.ts`\n- **Features**: Singleton pattern, query caching (5-min TTL), transaction support, specialized error handling\n- **Methods**: 25+ database operations (clients, designers, matches, briefs)\n- **Integration**: ConfigManager for cache TTL, proper rollback mechanisms\n- **Migration Status**: 93 files still using direct database access (gradual migration in progress)\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_NEW_DATA_SERVICE=true`)\n\n### ‚úÖ **Phase 2: ErrorManager (Error Handling)**\n- **File**: `/src/lib/core/error-manager.ts`\n- **Features**: Error classification (LOW/MEDIUM/HIGH/CRITICAL), monitoring integration, context-aware responses\n- **Handlers**: Database, validation, authentication, API, and generic error handlers\n- **Integration**: 58 API routes need migration, 104 try-catch blocks to consolidate\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_ERROR_MANAGER=true`)\n\n### ‚úÖ **Phase 3: RequestPipeline (Middleware Architecture)**\n- **File**: `/src/lib/core/pipeline.ts`\n- **Features**: Middleware chain, authentication, rate limiting, CORS, request/response logging\n- **Middlewares**: 8 pre-built middlewares with extensible architecture\n- **Integration**: Auth pipelines, rate limiting per endpoint\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_REQUEST_PIPELINE=true`)\n\n### ‚úÖ **Phase 4: ConfigManager (Configuration Centralization)**\n- **File**: `/src/lib/core/config-manager.ts`\n- **Features**: Multi-source config loading, schema validation, sensitive data protection\n- **Configuration**: 51 centralized configuration values with type safety\n- **Sources**: Environment variables, files, database, defaults with priority system\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_CONFIG_MANAGER=true`)\n\n### ‚úÖ **Phase 5: BusinessRules (Business Logic Consolidation)**\n- **File**: `/src/lib/core/business-rules.ts`\n- **Features**: Credit management, matching rules, security validation, pricing calculations\n- **Rules**: 15+ business rule categories with comprehensive validation\n- **Integration**: API routes use BusinessRules for validation\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_BUSINESS_RULES=true`)\n\n### ‚úÖ **Phase 6: LoggingService (Centralized Logging)** [NEW]\n- **File**: `/src/lib/core/logging-service.ts` (496 lines)\n- **Features**: Correlation IDs, structured logging, sensitive data redaction, log levels\n- **Integration**: Replaces 625 console.log statements across codebase\n- **Methods**: `debug()`, `info()`, `warn()`, `error()` with context tracking\n- **Migration Status**: 19 console.log statements remaining (gradual migration)\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_CENTRALIZED_LOGGING=true`)\n\n### ‚úÖ **Phase 7: OTPService (Unified OTP Management)** [NEW]\n- **File**: `/src/lib/core/otp-service.ts` (534 lines)\n- **Features**: Rate limiting (60s cooldown), secure generation, multi-purpose support\n- **Consolidation**: Replaces 8 separate OTP implementations\n- **Storage**: Supabase auth_tokens table with proper indexing\n- **Purpose Types**: login, signup, reset, verify for all user types\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_OTP_SERVICE=true`)\n\n### ‚úÖ **Phase 8: EmailService (Email System Unification)** [NEW]\n- **File**: `/src/lib/core/email-service.ts` (687 lines)\n- **Features**: Template system, queue management, retry logic, rate limiting (60/min)\n- **Templates**: OTP, welcome, match notification, payment confirmation\n- **Queue**: In-memory queue with configurable retry attempts\n- **Integration**: Works with Resend API, respects rate limits\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_EMAIL_SERVICE=true`)\n\n## üéØ **Complete System Architecture Map**\n\n### **Core Centralized Services**\n```typescript\nüìÅ /src/lib/core/\n‚îú‚îÄ‚îÄ üìÑ data-service.ts          // Phase 1: Database operations with caching\n‚îú‚îÄ‚îÄ üìÑ error-manager.ts         // Phase 2: Error classification & monitoring\n‚îú‚îÄ‚îÄ üìÑ pipeline.ts              // Phase 3: Request middleware & auth\n‚îú‚îÄ‚îÄ üìÑ config-manager.ts        // Phase 4: Configuration management\n‚îú‚îÄ‚îÄ üìÑ business-rules.ts        // Phase 5: Business logic consolidation\n‚îú‚îÄ‚îÄ üìÑ logging-service.ts       // Phase 6: Centralized logging [NEW]\n‚îú‚îÄ‚îÄ üìÑ otp-service.ts          // Phase 7: OTP management [NEW]\n‚îî‚îÄ‚îÄ üìÑ email-service.ts        // Phase 8: Email system [NEW]\n```\n\n### **Feature Flags System**\n```typescript\nüìÅ /src/lib/features.ts\n\nAll Feature Flags ACTIVE in Production:\n‚îú‚îÄ‚îÄ üö© USE_NEW_DATA_SERVICE=true       // Phase 1 active\n‚îú‚îÄ‚îÄ üö© USE_ERROR_MANAGER=true          // Phase 2 active\n‚îú‚îÄ‚îÄ üö© USE_REQUEST_PIPELINE=true       // Phase 3 active\n‚îú‚îÄ‚îÄ üö© USE_CONFIG_MANAGER=true         // Phase 4 active\n‚îú‚îÄ‚îÄ üö© USE_BUSINESS_RULES=true         // Phase 5 active\n‚îú‚îÄ‚îÄ üö© USE_CENTRALIZED_LOGGING=true    // Phase 6 active [NEW]\n‚îú‚îÄ‚îÄ üö© USE_OTP_SERVICE=true           // Phase 7 active [NEW]\n‚îú‚îÄ‚îÄ üö© USE_EMAIL_SERVICE=true         // Phase 8 active [NEW]\n‚îî‚îÄ‚îÄ üö© ENABLE_QUERY_CACHE=true        // Performance optimization\n```\n\n## üìä **Centralization Impact & Statistics**\n\n### **Architecture Achievements**\n- ‚úÖ **40%+ Code Reduction** - Eliminated thousands of lines of duplication\n- ‚úÖ **Zero Breaking Changes** - All existing functionality preserved\n- ‚úÖ **Production Ready** - Feature flags allow safe deployment and rollback\n- ‚úÖ **Type Safety** - Full TypeScript support with proper interfaces\n- ‚úÖ **Comprehensive Testing** - 8 complete test suites validating all functionality\n\n### **Implementation Statistics**\n- **Phases Completed**: 8 of 8 (100%)\n- **Files Created**: 20+ core architecture files\n- **Files Modified**: 35+ existing files updated\n- **Configuration Values**: 51 centralized settings\n- **Business Rules**: 15+ rule categories implemented\n- **Feature Flags**: 15 feature toggles for safe deployment\n- **API Endpoints**: 25+ endpoints with centralized logic\n- **Test Scripts**: 8 comprehensive test suites\n- **Code Replaced**: 625 console.log statements, 8 OTP implementations, 6 email implementations\n\n### **Remaining Migration Work**\n- **Database Access**: 93 files still using direct Supabase calls (migrate to DataService)\n- **Console Logs**: 19 remaining console.log statements (migrate to LoggingService)\n- **Error Handling**: 104 try-catch blocks across 58 files (migrate to ErrorManager)\n\n## Key Features Implemented\n\n### 1. Payment Integration (LemonSqueezy)\n- **Issue Fixed**: Credits weren't reflecting after payment\n- **Solution**: Fixed webhook to extract custom data from `meta.custom_data` instead of order attributes\n- **Key Files**: \n  - `/src/app/api/webhooks/lemonsqueezy/route.ts`\n  - Custom data structure: `{ credits: number, match_id: string }`\n\n### 2. Designer Matching System\n- **AI Provider**: DeepSeek (replaced Google AI/Gemini completely)\n- **API Key**: `sk-7404080c428443b598ee8c76382afb39`\n- **Key Features**:\n  - Only approved designers show in matches\n  - No duplicate designers for same client\n  - Matches persist after payment\n  - Realistic scoring (50-80% typical, 85%+ rare)\n\n### 3. Speed Optimization (3-Phase Progressive Matching)\n- **Phase 1**: Instant match (<50ms) - Local scoring + embeddings\n- **Phase 2**: Refined match (~500ms) - Quick AI scoring  \n- **Phase 3**: Final match (~2s) - Deep AI analysis\n- **Database Tables**:\n  - `designer_embeddings` - Pre-computed vector embeddings\n  - `match_cache` - Caching match results\n  - `designer_quick_stats` - Materialized view for fast lookups\n- **Cron Job**: Hourly embedding precomputation at `/api/cron/embeddings`\n\n### 4. Design System & UI/UX\n- **Centralized Theme System**: `/src/lib/design-system/index.ts`\n- **Updated Components**:\n  - Client purchase page - complete redesign\n  - Admin login & dashboard - full theme integration\n  - Designer apply flow - 4-step form with progress indicators\n  - Designer verify page - modern OTP input\n  - Client dashboard - complete UI overhaul\n  - Designer dashboard - consistent design system\n- **New Branding**:\n  - Atom logo icon throughout the app (35 files updated)\n  - Favicon at `/public/icon.svg`\n  - Consistent color scheme (#f0ad4e accent)\n- **Terminology Change**: \"Credits\" ‚Üí \"Matches\" throughout UI\n\n### 5. Authentication-First Flow\n- **Designer Flow**: Signup ‚Üí Verify Email ‚Üí Fill Application ‚Üí Admin Review\n  - Pages: `/designer/signup`, `/designer/signup/verify`, `/designer/apply`\n  - Status-based routing after OTP verification\n- **Client Flow**: Signup ‚Üí Verify Email ‚Üí Create Brief ‚Üí View Matches\n  - Pages: `/client/signup`, `/client/signup/verify`, `/brief`\n  - Authentication required before brief submission\n\n### 6. Centralized Configuration System\n- **Directory**: `/src/config/`\n- **Matching Configuration** (`/src/config/matching/prompt.config.ts`):\n  - AI system role and personality\n  - Scoring weights for matching factors\n  - Elimination criteria with enable/disable flags\n  - Custom business rules without code changes\n- **Form Configurations**:\n  - Designer form: 6 steps with validation\n  - Brief form: Category-specific fields for all design types\n- **Main Export**: `/src/config/index.ts`\n\n### 7. MCP Integrations\n\n#### Supabase MCP\n- **Configuration**: `~/.config/claude/claude_desktop_config.json`\n- **Project Ref**: `frwchtwxpnrlpzksupgm`\n- **Mode**: Read-only for safety\n- **Benefits**: Direct database access for Claude\n\n#### Vercel MCP\n- **Type**: HTTP MCP with Bearer authentication\n- **Token**: `Jn9dwrQamPfPDoFJpzsSpIjm`\n- **Account**: `designbattlefield-2236`\n- **Benefits**: Deploy, manage deployments, configure domains, manage env vars\n\n#### Resend MCP\n- **Custom MCP**: `/Users/osamakhalil/mcp-send-email/build/index.js`\n- **API Key**: `re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8`\n- **Benefits**: Send emails programmatically through Claude\n\n## Critical Business Rules\n\n### Designer Approval Flow\n1. Designers register but are NOT automatically approved\n2. Admin (osamah96@gmail.com) must approve via `/admin/designers`\n3. Only approved designers (`is_approved = true`) show in matches\n4. Unapproved designers see \"Your profile is under review\" message\n5. Profile edits require re-approval (sets `is_approved=false`)\n\n### Match Creation Rules\n1. Each match must have unique designer per client\n2. Check `client_designers` table to avoid duplicates\n3. Create `designer_requests` with 7-day expiration\n4. Match status progression: `pending` ‚Üí `unlocked` ‚Üí `completed`\n\n### Payment & Credits\n1. Clients can use credits (1 credit = 1 unlock) or purchase packages\n2. Packages: Starter ($5/3), Growth ($15/10), Scale ($30/25)\n3. Credits are added via webhook after successful payment\n4. Match persists after payment - same designer shown\n\n### OTP & Authentication Rules [UPDATED]\n1. OTP length: 6 digits (configurable via ConfigManager)\n2. OTP expiry: 5 minutes (300 seconds)\n3. Rate limiting: 60-second cooldown between OTP requests\n4. Purpose types: login, signup, reset, verify\n5. User types: client, designer, admin\n\n### Email Rate Limits [NEW]\n1. Maximum 60 emails per minute per type\n2. Queue system with retry logic (3 attempts)\n3. Template-based system for consistency\n4. Automatic rate limit handling with queue\n\n## Technical Architecture\n\n### Database Schema\n```sql\n-- Key tables\ndesigners (is_approved, is_verified, first_name, last_name, edited_after_approval, last_approved_at)\nclients (email, match_credits)\nbriefs (project_type, industry, styles[], category_specific_fields)\nmatches (score, reasons[], status)\nclient_designers (tracks unlocked designers)\ndesigner_embeddings (vector embeddings for similarity)\nmatch_cache (AI analysis cache)\nauth_tokens (email, code, type, purpose, created_at, expires_at) -- OTP storage\n```\n\n### API Endpoints\n- `/api/match/find` - Original matching endpoint\n- `/api/match/find-optimized` - SSE streaming endpoint for progressive matching\n- `/api/match/find-new` - Create new match with auto-unlock\n- `/api/client/matches/:id/unlock` - Unlock designer with credit\n- `/api/cron/embeddings` - Precompute embeddings (requires x-cron-secret header)\n- `/api/admin/designers/:id/approve` - Approve designer\n- `/api/health` - System health check with all phase status [NEW]\n- `/api/config` - Configuration management (51 values) [NEW]\n- `/api/business-rules` - Business rules testing & validation [NEW]\n\n### Environment Variables\n```bash\n# API Keys\nDEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\nDEEPSEEK_BLOG_API_KEY=sk-7f77c4bfc9f14f2a9cf66aaa7a4fe925\nLEMONSQUEEZY_API_KEY=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9... (full key in COMPLETE_VERCEL_ENV_VARS.md)\nRESEND_API_KEY=re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\n\n# Security\nNEXTAUTH_SECRET=898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\nCRON_SECRET=20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n\n# URLs\nNEXT_PUBLIC_APP_URL=https://onedesigner.app\nNEXTAUTH_URL=https://onedesigner.app\n\n# Supabase\nNEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n# NEXT_PUBLIC_SUPABASE_ANON_KEY and SUPABASE_SERVICE_ROLE_KEY from Supabase dashboard\n\n# Feature Flags (ALL ACTIVE)\nUSE_NEW_DATA_SERVICE=true\nUSE_ERROR_MANAGER=true\nUSE_REQUEST_PIPELINE=true\nUSE_CONFIG_MANAGER=true\nUSE_BUSINESS_RULES=true\nUSE_CENTRALIZED_LOGGING=true\nUSE_OTP_SERVICE=true\nUSE_EMAIL_SERVICE=true\n```\n\n## Development Workflow\n\n### Running Locally with All Phases Active\n```bash\n# Start server with all 8 phases enabled\nNEXT_PUBLIC_APP_URL=\"http://localhost:3000\" \\\nNEXTAUTH_SECRET=\"test-secret-for-development\" \\\nUSE_NEW_DATA_SERVICE=true \\\nUSE_ERROR_MANAGER=true \\\nUSE_REQUEST_PIPELINE=true \\\nUSE_CONFIG_MANAGER=true \\\nUSE_BUSINESS_RULES=true \\\nUSE_CENTRALIZED_LOGGING=true \\\nUSE_OTP_SERVICE=true \\\nUSE_EMAIL_SERVICE=true \\\nnpm run dev\n\n# Server runs on port 3001 if 3000 is occupied\n```\n\n### Testing All Phases\n```bash\n# Run comprehensive test suites\n./test/test-data-service.sh         # Phase 1: Database operations\n./test/test-error-manager.sh        # Phase 2: Error handling\n./test/test-pipeline.sh             # Phase 3: Request middleware\n./test/test-config-manager.sh       # Phase 4: Configuration\n./test/test-business-rules.sh       # Phase 5: Business logic\n./test/test-logging-service.sh      # Phase 6: Logging [NEW]\n./test/test-otp-service.sh          # Phase 7: OTP management [NEW]\n./test/test-email-service.sh        # Phase 8: Email system [NEW]\n\n# Test specific flows\n./test/test-ai-matching-flow.sh     # AI matching system\n./test/test-auth-security.sh        # Authentication security\n```\n\n### Database Migrations\n1. Run migrations in order (001-008)\n2. Use `007_speed_optimization_tables_fixed.sql` (not the original)\n3. Use `008_track_profile_edits.sql` for designer edit tracking\n4. Required for speed optimization and profile tracking\n\n### Deployment Process\n1. **Make changes and commit**:\n   ```bash\n   git add .\n   git commit -m \"Your commit message\"\n   ```\n\n2. **Push to GitHub**:\n   ```bash\n   git push origin main\n   ```\n\n3. **Deploy to Vercel** (ALWAYS do this after pushing):\n   ```bash\n   vercel --prod\n   ```\n\n4. **If Vercel link is lost**:\n   ```bash\n   vercel link --project onedesigner2 --yes\n   vercel --prod\n   ```\n\n### Testing Checklist\n- [ ] Create brief ‚Üí Match appears instantly\n- [ ] Unlock with credit ‚Üí Credits deducted\n- [ ] Purchase package ‚Üí Credits added via webhook\n- [ ] Find New Match ‚Üí Different designer shown\n- [ ] Admin approve designer ‚Üí Shows in matches\n- [ ] Designer edit profile ‚Üí Admin sees \"Edited\" status\n- [ ] OTP verification ‚Üí Proper routing based on status\n- [ ] Email delivery ‚Üí Templates render correctly\n- [ ] Performance dashboard shows metrics\n- [ ] Design system theme toggle works\n- [ ] All logos display atom icon\n- [ ] Correlation IDs track across requests\n- [ ] Error classification works properly\n\n## Common Issues & Solutions\n\n### Issue: Designer names showing as \"Designer K***\"\n**Cause**: Property name mismatch between API (snake_case) and frontend (camelCase)\n**Solution**: Map `first_name` ‚Üí `firstName`, `last_name` ‚Üí `lastName`\n\n### Issue: \"ALL_DESIGNERS_UNLOCKED\" error\n**Cause**: Client has unlocked all available designers\n**Solution**: Show friendly message directing to dashboard\n\n### Issue: Match showing same designer repeatedly\n**Cause**: Not checking `client_designers` table\n**Solution**: Filter out already unlocked designers in queries\n\n### Issue: \"Designer account not found\" after OTP\n**Cause**: Designer authentication not maintaining state properly\n**Solution**: OTP verification returns designer status for proper routing\n\n### Issue: Build failing with TypeScript/ESLint errors\n**Solution**: Disabled checks in next.config.js:\n```javascript\neslint: { ignoreDuringBuilds: true },\ntypescript: { ignoreBuildErrors: true }\n```\n\n### Issue: Circular dependency in LoggingService\n**Cause**: Features.USE_CENTRALIZED_LOGGING caused infinite loop\n**Solution**: Use `process.env.USE_CENTRALIZED_LOGGING` directly\n\n### Issue: Session validation errors in API routes\n**Cause**: Checking wrong property (`sessionResult.success` vs `sessionResult.valid`)\n**Solution**: Use consistent session validation with `sessionResult.valid`\n\n## Important Notes\n\n1. **NEVER create duplicate designers** - Always check `client_designers` table\n2. **NEVER show unapproved designers** - Filter by `is_approved = true`\n3. **NEVER use fallback matching** - Only use AI (DeepSeek has no rate limits)\n4. **ALWAYS persist matches** - Same designer after payment\n5. **ALWAYS use realistic scores** - 50-80% typical range\n6. **ALWAYS use design system** - Import theme from `/src/lib/design-system`\n7. **ALWAYS deploy to Vercel after pushing to GitHub** - Run `vercel` command after every `git push`\n8. **ALWAYS use centralized services** - All 8 phases are active and should be used\n9. **ALWAYS track correlation IDs** - For request tracing across services\n10. **ALWAYS respect rate limits** - OTP (60s), Email (60/min)\n\n## Recent Changes Log\n\n### Latest Session (Aug 11, 2025) - Complete Centralization Architecture Phases 6-8\n- **Implemented Phase 6: LoggingService**:\n  - Created `/src/lib/core/logging-service.ts` (496 lines)\n  - Replaces 625 console.log statements across codebase\n  - Added correlation IDs for request tracking\n  - Structured logging with sensitive data redaction\n  - Log levels: debug, info, warn, error\n\n- **Implemented Phase 7: OTPService**:\n  - Created `/src/lib/core/otp-service.ts` (534 lines)\n  - Consolidated 8 separate OTP implementations\n  - Rate limiting with 60-second cooldown\n  - Multi-purpose support (login, signup, reset, verify)\n  - Secure storage in auth_tokens table\n\n- **Implemented Phase 8: EmailService**:\n  - Created `/src/lib/core/email-service.ts` (687 lines)\n  - Template-based email system\n  - Queue management with retry logic\n  - Rate limiting (60 emails/minute)\n  - Consistent branding across all emails\n\n- **Fixed Compilation Errors**:\n  - Fixed malformed import statements in EnhancedClientBrief.tsx\n  - Fixed session validation in message sending API\n  - Fixed circular dependency in LoggingService\n\n- **Fixed Designer Authentication Flow**:\n  - Updated OTP verification to return designer status\n  - Proper routing based on status (approved/pending/new)\n  - Created application-pending and success pages\n\n- **System Analysis Completed**:\n  - Identified 93 files with direct database access\n  - Found 19 remaining console.log statements\n  - Located 104 try-catch blocks across 58 files\n  - All ready for gradual migration to centralized services\n\n### Previous Session (Aug 10, 2025) - Find New Match Feature & AI Scoring Fixes\n- Fixed critical unlock bug (status not being passed properly)\n- Implemented \"Find New Match\" feature with auto-unlock\n- Fixed AI match scoring to show varied scores\n- Updated navigation bar layout with better UX\n- Fixed purchase page authentication redirect\n- Successfully deployed to production\n\n### Previous Session (Aug 10, 2025) - Centralized Configuration & Auth-First Flow\n- Fixed designer authentication-first flow with all required fields\n- Fixed client authentication-first flow with proper signup\n- Implemented centralized configuration system in `/src/config/`\n- Updated AI provider to use configuration\n- Cleaned database of test data\n\n## Todo for Next Session\n- [ ] Migrate remaining 93 files from direct database access to DataService\n- [ ] Replace remaining 19 console.log statements with LoggingService\n- [ ] Update 58 API routes to use ErrorManager for all try-catch blocks\n- [ ] Test complete centralization in production environment\n- [ ] Create migration guide for legacy code patterns\n- [ ] Add monitoring dashboard for all 8 phases\n- [ ] Implement automatic rollback on error threshold\n- [ ] Add metrics collection for performance monitoring\n- [ ] Create developer documentation for centralized services\n- [ ] Set up automated tests for all centralized services\n\n## File Structure\n```\n/src/\n  /app/\n    /admin/           # Admin pages\n    /client/          # Client pages (auth-first flow)\n    /designer/        # Designer pages (auth-first flow)\n    /brief/           # Brief flow\n    /api/             # API routes with centralized logic\n  /config/            # Centralized configuration\n    /matching/        # AI matching configuration\n    /forms/           # Form configurations\n  /lib/\n    /core/            # ‚ú® All 8 centralization phases\n      data-service.ts      # Phase 1: Database\n      error-manager.ts     # Phase 2: Errors\n      pipeline.ts          # Phase 3: Middleware\n      config-manager.ts    # Phase 4: Config\n      business-rules.ts    # Phase 5: Business Logic\n      logging-service.ts   # Phase 6: Logging [NEW]\n      otp-service.ts      # Phase 7: OTP [NEW]\n      email-service.ts    # Phase 8: Email [NEW]\n    /features.ts      # Feature flags\n    /design-system/   # Theme system\n    /ai/              # AI providers\n/test/               # Comprehensive test suites\n/public/\n  icon.svg           # Atom logo favicon\n```\n\n## üéâ **CENTRALIZATION COMPLETE!**\n\nThe OneDesigner centralization architecture is now **100% COMPLETE** with all 8 phases active and working together seamlessly! This represents a major transformation from scattered codebase to a well-architected, maintainable, and scalable system ready for continued growth and enhancement. üöÄ\n\n### üì¶ **Post-Centralization Updates** (Aug 12, 2025)\n\nAfter completing the core centralization, we aligned all recent features with the centralized architecture:\n\n#### **Project Request System Centralization**\n- **Service Layer**: `/src/lib/database/project-request-service.ts`\n  - Centralized database operations for project requests\n  - Methods: `create()`, `getByDesigner()`, `getById()`, `approve()`, `reject()`, `checkExisting()`\n  - Integrated with LoggingService for error tracking\n\n- **Email Templates**: `/src/lib/email/templates/project-request.ts`\n  - `createProjectRequestEmail()` - New project notifications for designers\n  - `createProjectApprovedEmail()` - Approval notifications for clients  \n  - `createProjectRejectedEmail()` - Rejection notifications for clients\n  - Uses baseEmailTemplate for consistent styling\n\n- **API Updates**:\n  - `/api/client/matches/[id]/contact` - Uses ProjectRequestService + centralized templates\n  - `/api/designer/project-requests` - Uses ProjectRequestService for fetching\n  - `/api/designer/project-requests/[id]/respond` - Uses centralized service for approve/reject\n\n#### **Modal Components Centralization**\n- **Components**: `/src/lib/components/modals/`\n  - `ContactDesignerModal` - Centralized contact designer UI\n  - `SuccessModal` - Reusable success notification modal\n  - Auto-hide functionality with configurable delays\n  - Consistent theming with design system\n\n- **Constants**: `/src/lib/constants/messages.ts`\n  - `CONTACT_MESSAGES` - Suggested messages and defaults\n  - `SUCCESS_MESSAGES` - Standardized success notifications\n  - `ERROR_MESSAGES` - Common error messages\n\n#### **Admin Dashboard Improvements**\n- Fixed designer profile modal to show all information correctly\n- Added avatar display with initials fallback\n- Portfolio images section (placeholder)\n- Complete application information display\n\n#### **Client-Designer Contact Flow**\n- Removed \"Conversations\" feature from client dashboard\n- Implemented email-based contact system\n- Designer approval reveals client email\n- Beautiful modal UI with suggested messages\n\n### **Migration Status**\n- ‚úÖ All new features use centralized services\n- ‚úÖ Email templates fully centralized\n- ‚úÖ Modal components centralized\n- ‚úÖ Project request APIs use service layer\n- ‚úÖ Consistent error handling throughout\n\n---\n**Last Updated**: August 12, 2025\n**Version**: 2.1.0 (Post-Centralization Alignment)\n**Status**: Production Ready with All Features Centralized"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# OneDesigner Project Knowledge Base\n\n## Project Overview\nOneDesigner is a platform that matches clients with pre-vetted designers using AI-powered matching. The system analyzes project briefs and designer profiles to find the perfect creative match.\n\n## üèóÔ∏è **COMPLETE CENTRALIZATION ARCHITECTURE** ‚úÖ (Aug 11, 2025)\n\n### Overview\nSuccessfully completed **ALL 8 PHASES** of centralization architecture with zero breaking changes. The OneDesigner codebase has been transformed from scattered, duplicated logic into a centralized, maintainable, and scalable system.\n\n### ‚úÖ **Phase 1: DataService (Database Operations)**\n- **File**: `/src/lib/services/data-service.ts`\n- **Features**: Singleton pattern, query caching (5-min TTL), transaction support, specialized error handling\n- **Methods**: 25+ database operations (clients, designers, matches, briefs)\n- **Integration**: ConfigManager for cache TTL, proper rollback mechanisms\n- **Migration Status**: 93 files still using direct database access (gradual migration in progress)\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_NEW_DATA_SERVICE=true`)\n\n### ‚úÖ **Phase 2: ErrorManager (Error Handling)**\n- **File**: `/src/lib/core/error-manager.ts`\n- **Features**: Error classification (LOW/MEDIUM/HIGH/CRITICAL), monitoring integration, context-aware responses\n- **Handlers**: Database, validation, authentication, API, and generic error handlers\n- **Integration**: 58 API routes need migration, 104 try-catch blocks to consolidate\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_ERROR_MANAGER=true`)\n\n### ‚úÖ **Phase 3: RequestPipeline (Middleware Architecture)**\n- **File**: `/src/lib/core/pipeline.ts`\n- **Features**: Middleware chain, authentication, rate limiting, CORS, request/response logging\n- **Middlewares**: 8 pre-built middlewares with extensible architecture\n- **Integration**: Auth pipelines, rate limiting per endpoint\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_REQUEST_PIPELINE=true`)\n\n### ‚úÖ **Phase 4: ConfigManager (Configuration Centralization)**\n- **File**: `/src/lib/core/config-manager.ts`\n- **Features**: Multi-source config loading, schema validation, sensitive data protection\n- **Configuration**: 51 centralized configuration values with type safety\n- **Sources**: Environment variables, files, database, defaults with priority system\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_CONFIG_MANAGER=true`)\n\n### ‚úÖ **Phase 5: BusinessRules (Business Logic Consolidation)**\n- **File**: `/src/lib/core/business-rules.ts`\n- **Features**: Credit management, matching rules, security validation, pricing calculations\n- **Rules**: 15+ business rule categories with comprehensive validation\n- **Integration**: API routes use BusinessRules for validation\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_BUSINESS_RULES=true`)\n\n### ‚úÖ **Phase 6: LoggingService (Centralized Logging)** [NEW]\n- **File**: `/src/lib/core/logging-service.ts` (496 lines)\n- **Features**: Correlation IDs, structured logging, sensitive data redaction, log levels\n- **Integration**: Replaces 625 console.log statements across codebase\n- **Methods**: `debug()`, `info()`, `warn()`, `error()` with context tracking\n- **Migration Status**: 19 console.log statements remaining (gradual migration)\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_CENTRALIZED_LOGGING=true`)\n\n### ‚úÖ **Phase 7: OTPService (Unified OTP Management)** [NEW]\n- **File**: `/src/lib/core/otp-service.ts` (534 lines)\n- **Features**: Rate limiting (60s cooldown), secure generation, multi-purpose support\n- **Consolidation**: Replaces 8 separate OTP implementations\n- **Storage**: Supabase auth_tokens table with proper indexing\n- **Purpose Types**: login, signup, reset, verify for all user types\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_OTP_SERVICE=true`)\n\n### ‚úÖ **Phase 8: EmailService (Email System Unification)** [NEW]\n- **File**: `/src/lib/core/email-service.ts` (687 lines)\n- **Features**: Template system, queue management, retry logic, rate limiting (60/min)\n- **Templates**: OTP, welcome, match notification, payment confirmation\n- **Queue**: In-memory queue with configurable retry attempts\n- **Integration**: Works with Resend API, respects rate limits\n- **Status**: **ACTIVE** ‚úÖ (Flag: `USE_EMAIL_SERVICE=true`)\n\n## üéØ **Complete System Architecture Map**\n\n### **Core Centralized Services**\n```typescript\nüìÅ /src/lib/core/\n‚îú‚îÄ‚îÄ üìÑ data-service.ts          // Phase 1: Database operations with caching\n‚îú‚îÄ‚îÄ üìÑ error-manager.ts         // Phase 2: Error classification & monitoring\n‚îú‚îÄ‚îÄ üìÑ pipeline.ts              // Phase 3: Request middleware & auth\n‚îú‚îÄ‚îÄ üìÑ config-manager.ts        // Phase 4: Configuration management\n‚îú‚îÄ‚îÄ üìÑ business-rules.ts        // Phase 5: Business logic consolidation\n‚îú‚îÄ‚îÄ üìÑ logging-service.ts       // Phase 6: Centralized logging [NEW]\n‚îú‚îÄ‚îÄ üìÑ otp-service.ts          // Phase 7: OTP management [NEW]\n‚îî‚îÄ‚îÄ üìÑ email-service.ts        // Phase 8: Email system [NEW]\n```\n\n### **Feature Flags System**\n```typescript\nüìÅ /src/lib/features.ts\n\nAll Feature Flags ACTIVE in Production:\n‚îú‚îÄ‚îÄ üö© USE_NEW_DATA_SERVICE=true       // Phase 1 active\n‚îú‚îÄ‚îÄ üö© USE_ERROR_MANAGER=true          // Phase 2 active\n‚îú‚îÄ‚îÄ üö© USE_REQUEST_PIPELINE=true       // Phase 3 active\n‚îú‚îÄ‚îÄ üö© USE_CONFIG_MANAGER=true         // Phase 4 active\n‚îú‚îÄ‚îÄ üö© USE_BUSINESS_RULES=true         // Phase 5 active\n‚îú‚îÄ‚îÄ üö© USE_CENTRALIZED_LOGGING=true    // Phase 6 active [NEW]\n‚îú‚îÄ‚îÄ üö© USE_OTP_SERVICE=true           // Phase 7 active [NEW]\n‚îú‚îÄ‚îÄ üö© USE_EMAIL_SERVICE=true         // Phase 8 active [NEW]\n‚îî‚îÄ‚îÄ üö© ENABLE_QUERY_CACHE=true        // Performance optimization\n```\n\n## üìä **Centralization Impact & Statistics**\n\n### **Architecture Achievements**\n- ‚úÖ **40%+ Code Reduction** - Eliminated thousands of lines of duplication\n- ‚úÖ **Zero Breaking Changes** - All existing functionality preserved\n- ‚úÖ **Production Ready** - Feature flags allow safe deployment and rollback\n- ‚úÖ **Type Safety** - Full TypeScript support with proper interfaces\n- ‚úÖ **Comprehensive Testing** - 8 complete test suites validating all functionality\n\n### **Implementation Statistics**\n- **Phases Completed**: 8 of 8 (100%)\n- **Files Created**: 20+ core architecture files\n- **Files Modified**: 35+ existing files updated\n- **Configuration Values**: 51 centralized settings\n- **Business Rules**: 15+ rule categories implemented\n- **Feature Flags**: 15 feature toggles for safe deployment\n- **API Endpoints**: 25+ endpoints with centralized logic\n- **Test Scripts**: 8 comprehensive test suites\n- **Code Replaced**: 625 console.log statements, 8 OTP implementations, 6 email implementations\n\n### **Remaining Migration Work**\n- **Database Access**: 93 files still using direct Supabase calls (migrate to DataService)\n- **Console Logs**: 19 remaining console.log statements (migrate to LoggingService)\n- **Error Handling**: 104 try-catch blocks across 58 files (migrate to ErrorManager)\n\n## Key Features Implemented\n\n### 1. Payment Integration (LemonSqueezy)\n- **Issue Fixed**: Credits weren't reflecting after payment\n- **Solution**: Fixed webhook to extract custom data from `meta.custom_data` instead of order attributes\n- **Key Files**: \n  - `/src/app/api/webhooks/lemonsqueezy/route.ts`\n  - Custom data structure: `{ credits: number, match_id: string }`\n\n### 2. Designer Matching System\n- **AI Provider**: DeepSeek (replaced Google AI/Gemini completely)\n- **API Key**: `sk-7404080c428443b598ee8c76382afb39`\n- **Key Features**:\n  - Only approved designers show in matches\n  - No duplicate designers for same client\n  - Matches persist after payment\n  - Realistic scoring (50-80% typical, 85%+ rare)\n\n### 3. Speed Optimization (3-Phase Progressive Matching)\n- **Phase 1**: Instant match (<50ms) - Local scoring + embeddings\n- **Phase 2**: Refined match (~500ms) - Quick AI scoring  \n- **Phase 3**: Final match (~2s) - Deep AI analysis\n- **Database Tables**:\n  - `designer_embeddings` - Pre-computed vector embeddings\n  - `match_cache` - Caching match results\n  - `designer_quick_stats` - Materialized view for fast lookups\n- **Cron Job**: Hourly embedding precomputation at `/api/cron/embeddings`\n\n### 4. Design System & UI/UX\n- **Centralized Theme System**: `/src/lib/design-system/index.ts`\n- **Updated Components**:\n  - Client purchase page - complete redesign\n  - Admin login & dashboard - full theme integration\n  - Designer apply flow - 4-step form with progress indicators\n  - Designer verify page - modern OTP input\n  - Client dashboard - complete UI overhaul\n  - Designer dashboard - consistent design system\n- **New Branding**:\n  - Atom logo icon throughout the app (35 files updated)\n  - Favicon at `/public/icon.svg`\n  - Consistent color scheme (#f0ad4e accent)\n- **Terminology Change**: \"Credits\" ‚Üí \"Matches\" throughout UI\n\n### 5. Authentication-First Flow\n- **Designer Flow**: Signup ‚Üí Verify Email ‚Üí Fill Application ‚Üí Admin Review\n  - Pages: `/designer/signup`, `/designer/signup/verify`, `/designer/apply`\n  - Status-based routing after OTP verification\n- **Client Flow**: Signup ‚Üí Verify Email ‚Üí Create Brief ‚Üí View Matches\n  - Pages: `/client/signup`, `/client/signup/verify`, `/brief`\n  - Authentication required before brief submission\n\n### 6. Centralized Configuration System\n- **Directory**: `/src/config/`\n- **Matching Configuration** (`/src/config/matching/prompt.config.ts`):\n  - AI system role and personality\n  - Scoring weights for matching factors\n  - Elimination criteria with enable/disable flags\n  - Custom business rules without code changes\n- **Form Configurations**:\n  - Designer form: 6 steps with validation\n  - Brief form: Category-specific fields for all design types\n- **Main Export**: `/src/config/index.ts`\n\n### 7. MCP Integrations\n\n#### Supabase MCP\n- **Configuration**: `~/.config/claude/claude_desktop_config.json`\n- **Project Ref**: `frwchtwxpnrlpzksupgm`\n- **Mode**: Read-only for safety\n- **Benefits**: Direct database access for Claude\n\n#### Vercel MCP\n- **Type**: HTTP MCP with Bearer authentication\n- **Token**: `Jn9dwrQamPfPDoFJpzsSpIjm`\n- **Account**: `designbattlefield-2236`\n- **Benefits**: Deploy, manage deployments, configure domains, manage env vars\n\n#### Resend MCP\n- **Custom MCP**: `/Users/osamakhalil/mcp-send-email/build/index.js`\n- **API Key**: `re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8`\n- **Benefits**: Send emails programmatically through Claude\n\n## Critical Business Rules\n\n### Designer Approval Flow\n1. Designers register but are NOT automatically approved\n2. Admin (osamah96@gmail.com) must approve via `/admin/designers`\n3. Only approved designers (`is_approved = true`) show in matches\n4. Unapproved designers see \"Your profile is under review\" message\n5. Profile edits require re-approval (sets `is_approved=false`)\n\n### Match Creation Rules\n1. Each match must have unique designer per client\n2. Check `client_designers` table to avoid duplicates\n3. Create `designer_requests` with 7-day expiration\n4. Match status progression: `pending` ‚Üí `unlocked` ‚Üí `completed`\n\n### Payment & Credits\n1. Clients can use credits (1 credit = 1 unlock) or purchase packages\n2. Packages: Starter ($5/3), Growth ($15/10), Scale ($30/25)\n3. Credits are added via webhook after successful payment\n4. Match persists after payment - same designer shown\n\n### OTP & Authentication Rules [UPDATED]\n1. OTP length: 6 digits (configurable via ConfigManager)\n2. OTP expiry: 5 minutes (300 seconds)\n3. Rate limiting: 60-second cooldown between OTP requests\n4. Purpose types: login, signup, reset, verify\n5. User types: client, designer, admin\n\n### Email Rate Limits [NEW]\n1. Maximum 60 emails per minute per type\n2. Queue system with retry logic (3 attempts)\n3. Template-based system for consistency\n4. Automatic rate limit handling with queue\n\n## Technical Architecture\n\n### Database Schema\n```sql\n-- Key tables\ndesigners (is_approved, is_verified, first_name, last_name, edited_after_approval, last_approved_at)\nclients (email, match_credits)\nbriefs (project_type, industry, styles[], category_specific_fields)\nmatches (score, reasons[], status)\nclient_designers (tracks unlocked designers)\ndesigner_embeddings (vector embeddings for similarity)\nmatch_cache (AI analysis cache)\nauth_tokens (email, code, type, purpose, created_at, expires_at) -- OTP storage\n```\n\n### API Endpoints\n- `/api/match/find` - Original matching endpoint\n- `/api/match/find-optimized` - SSE streaming endpoint for progressive matching\n- `/api/match/find-new` - Create new match with auto-unlock\n- `/api/client/matches/:id/unlock` - Unlock designer with credit\n- `/api/cron/embeddings` - Precompute embeddings (requires x-cron-secret header)\n- `/api/admin/designers/:id/approve` - Approve designer\n- `/api/health` - System health check with all phase status [NEW]\n- `/api/config` - Configuration management (51 values) [NEW]\n- `/api/business-rules` - Business rules testing & validation [NEW]\n\n### Environment Variables\n```bash\n# API Keys\nDEEPSEEK_API_KEY=sk-7404080c428443b598ee8c76382afb39\nDEEPSEEK_BLOG_API_KEY=sk-7f77c4bfc9f14f2a9cf66aaa7a4fe925\nLEMONSQUEEZY_API_KEY=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9... (full key in COMPLETE_VERCEL_ENV_VARS.md)\nRESEND_API_KEY=re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\n\n# Security\nNEXTAUTH_SECRET=898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\nCRON_SECRET=20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\n\n# URLs\nNEXT_PUBLIC_APP_URL=https://onedesigner.app\nNEXTAUTH_URL=https://onedesigner.app\n\n# Supabase\nNEXT_PUBLIC_SUPABASE_URL=https://frwchtwxpnrlpzksupgm.supabase.co\n# NEXT_PUBLIC_SUPABASE_ANON_KEY and SUPABASE_SERVICE_ROLE_KEY from Supabase dashboard\n\n# Feature Flags (ALL ACTIVE)\nUSE_NEW_DATA_SERVICE=true\nUSE_ERROR_MANAGER=true\nUSE_REQUEST_PIPELINE=true\nUSE_CONFIG_MANAGER=true\nUSE_BUSINESS_RULES=true\nUSE_CENTRALIZED_LOGGING=true\nUSE_OTP_SERVICE=true\nUSE_EMAIL_SERVICE=true\n```\n\n## Development Workflow\n\n### Running Locally with All Phases Active\n```bash\n# Start server with all 8 phases enabled\nNEXT_PUBLIC_APP_URL=\"http://localhost:3000\" \\\nNEXTAUTH_SECRET=\"test-secret-for-development\" \\\nUSE_NEW_DATA_SERVICE=true \\\nUSE_ERROR_MANAGER=true \\\nUSE_REQUEST_PIPELINE=true \\\nUSE_CONFIG_MANAGER=true \\\nUSE_BUSINESS_RULES=true \\\nUSE_CENTRALIZED_LOGGING=true \\\nUSE_OTP_SERVICE=true \\\nUSE_EMAIL_SERVICE=true \\\nnpm run dev\n\n# Server runs on port 3001 if 3000 is occupied\n```\n\n### Testing All Phases\n```bash\n# Run comprehensive test suites\n./test/test-data-service.sh         # Phase 1: Database operations\n./test/test-error-manager.sh        # Phase 2: Error handling\n./test/test-pipeline.sh             # Phase 3: Request middleware\n./test/test-config-manager.sh       # Phase 4: Configuration\n./test/test-business-rules.sh       # Phase 5: Business logic\n./test/test-logging-service.sh      # Phase 6: Logging [NEW]\n./test/test-otp-service.sh          # Phase 7: OTP management [NEW]\n./test/test-email-service.sh        # Phase 8: Email system [NEW]\n\n# Test specific flows\n./test/test-ai-matching-flow.sh     # AI matching system\n./test/test-auth-security.sh        # Authentication security\n```\n\n### Database Migrations\n1. Run migrations in order (001-008)\n2. Use `007_speed_optimization_tables_fixed.sql` (not the original)\n3. Use `008_track_profile_edits.sql` for designer edit tracking\n4. Required for speed optimization and profile tracking\n\n### Deployment Process\n1. **Make changes and commit**:\n   ```bash\n   git add .\n   git commit -m \"Your commit message\"\n   ```\n\n2. **Push to GitHub**:\n   ```bash\n   git push origin main\n   ```\n\n3. **Deploy to Vercel** (ALWAYS do this after pushing):\n   ```bash\n   vercel --prod\n   ```\n\n4. **If Vercel link is lost**:\n   ```bash\n   vercel link --project onedesigner2 --yes\n   vercel --prod\n   ```\n\n### Testing Checklist\n- [ ] Create brief ‚Üí Match appears instantly\n- [ ] Unlock with credit ‚Üí Credits deducted\n- [ ] Purchase package ‚Üí Credits added via webhook\n- [ ] Find New Match ‚Üí Different designer shown\n- [ ] Admin approve designer ‚Üí Shows in matches\n- [ ] Designer edit profile ‚Üí Admin sees \"Edited\" status\n- [ ] OTP verification ‚Üí Proper routing based on status\n- [ ] Email delivery ‚Üí Templates render correctly\n- [ ] Performance dashboard shows metrics\n- [ ] Design system theme toggle works\n- [ ] All logos display atom icon\n- [ ] Correlation IDs track across requests\n- [ ] Error classification works properly\n\n## Common Issues & Solutions\n\n### Issue: Designer names showing as \"Designer K***\"\n**Cause**: Property name mismatch between API (snake_case) and frontend (camelCase)\n**Solution**: Map `first_name` ‚Üí `firstName`, `last_name` ‚Üí `lastName`\n\n### Issue: \"ALL_DESIGNERS_UNLOCKED\" error\n**Cause**: Client has unlocked all available designers\n**Solution**: Show friendly message directing to dashboard\n\n### Issue: Match showing same designer repeatedly\n**Cause**: Not checking `client_designers` table\n**Solution**: Filter out already unlocked designers in queries\n\n### Issue: \"Designer account not found\" after OTP\n**Cause**: Designer authentication not maintaining state properly\n**Solution**: OTP verification returns designer status for proper routing\n\n### Issue: Build failing with TypeScript/ESLint errors\n**Solution**: Disabled checks in next.config.js:\n```javascript\neslint: { ignoreDuringBuilds: true },\ntypescript: { ignoreBuildErrors: true }\n```\n\n### Issue: Circular dependency in LoggingService\n**Cause**: Features.USE_CENTRALIZED_LOGGING caused infinite loop\n**Solution**: Use `process.env.USE_CENTRALIZED_LOGGING` directly\n\n### Issue: Session validation errors in API routes\n**Cause**: Checking wrong property (`sessionResult.success` vs `sessionResult.valid`)\n**Solution**: Use consistent session validation with `sessionResult.valid`\n\n## Important Notes\n\n1. **NEVER create duplicate designers** - Always check `client_designers` table\n2. **NEVER show unapproved designers** - Filter by `is_approved = true`\n3. **NEVER use fallback matching** - Only use AI (DeepSeek has no rate limits)\n4. **ALWAYS persist matches** - Same designer after payment\n5. **ALWAYS use realistic scores** - 50-80% typical range\n6. **ALWAYS use design system** - Import theme from `/src/lib/design-system`\n7. **ALWAYS deploy to Vercel after pushing to GitHub** - Run `vercel` command after every `git push`\n8. **ALWAYS use centralized services** - All 8 phases are active and should be used\n9. **ALWAYS track correlation IDs** - For request tracing across services\n10. **ALWAYS respect rate limits** - OTP (60s), Email (60/min)\n\n## Recent Changes Log\n\n### Latest Session (Aug 11, 2025) - Complete Centralization Architecture Phases 6-8\n- **Implemented Phase 6: LoggingService**:\n  - Created `/src/lib/core/logging-service.ts` (496 lines)\n  - Replaces 625 console.log statements across codebase\n  - Added correlation IDs for request tracking\n  - Structured logging with sensitive data redaction\n  - Log levels: debug, info, warn, error\n\n- **Implemented Phase 7: OTPService**:\n  - Created `/src/lib/core/otp-service.ts` (534 lines)\n  - Consolidated 8 separate OTP implementations\n  - Rate limiting with 60-second cooldown\n  - Multi-purpose support (login, signup, reset, verify)\n  - Secure storage in auth_tokens table\n\n- **Implemented Phase 8: EmailService**:\n  - Created `/src/lib/core/email-service.ts` (687 lines)\n  - Template-based email system\n  - Queue management with retry logic\n  - Rate limiting (60 emails/minute)\n  - Consistent branding across all emails\n\n- **Fixed Compilation Errors**:\n  - Fixed malformed import statements in EnhancedClientBrief.tsx\n  - Fixed session validation in message sending API\n  - Fixed circular dependency in LoggingService\n\n- **Fixed Designer Authentication Flow**:\n  - Updated OTP verification to return designer status\n  - Proper routing based on status (approved/pending/new)\n  - Created application-pending and success pages\n\n- **System Analysis Completed**:\n  - Identified 93 files with direct database access\n  - Found 19 remaining console.log statements\n  - Located 104 try-catch blocks across 58 files\n  - All ready for gradual migration to centralized services\n\n### Previous Session (Aug 10, 2025) - Find New Match Feature & AI Scoring Fixes\n- Fixed critical unlock bug (status not being passed properly)\n- Implemented \"Find New Match\" feature with auto-unlock\n- Fixed AI match scoring to show varied scores\n- Updated navigation bar layout with better UX\n- Fixed purchase page authentication redirect\n- Successfully deployed to production\n\n### Previous Session (Aug 10, 2025) - Centralized Configuration & Auth-First Flow\n- Fixed designer authentication-first flow with all required fields\n- Fixed client authentication-first flow with proper signup\n- Implemented centralized configuration system in `/src/config/`\n- Updated AI provider to use configuration\n- Cleaned database of test data\n\n## Todo for Next Session\n- [ ] Migrate remaining 93 files from direct database access to DataService\n- [ ] Replace remaining 19 console.log statements with LoggingService\n- [ ] Update 58 API routes to use ErrorManager for all try-catch blocks\n- [ ] Test complete centralization in production environment\n- [ ] Create migration guide for legacy code patterns\n- [ ] Add monitoring dashboard for all 8 phases\n- [ ] Implement automatic rollback on error threshold\n- [ ] Add metrics collection for performance monitoring\n- [ ] Create developer documentation for centralized services\n- [ ] Set up automated tests for all centralized services\n\n## File Structure\n```\n/src/\n  /app/\n    /admin/           # Admin pages\n    /client/          # Client pages (auth-first flow)\n    /designer/        # Designer pages (auth-first flow)\n    /brief/           # Brief flow\n    /api/             # API routes with centralized logic\n  /config/            # Centralized configuration\n    /matching/        # AI matching configuration\n    /forms/           # Form configurations\n  /lib/\n    /core/            # ‚ú® All 8 centralization phases\n      data-service.ts      # Phase 1: Database\n      error-manager.ts     # Phase 2: Errors\n      pipeline.ts          # Phase 3: Middleware\n      config-manager.ts    # Phase 4: Config\n      business-rules.ts    # Phase 5: Business Logic\n      logging-service.ts   # Phase 6: Logging [NEW]\n      otp-service.ts      # Phase 7: OTP [NEW]\n      email-service.ts    # Phase 8: Email [NEW]\n    /features.ts      # Feature flags\n    /design-system/   # Theme system\n    /ai/              # AI providers\n/test/               # Comprehensive test suites\n/public/\n  icon.svg           # Atom logo favicon\n```\n\n## üéâ **CENTRALIZATION COMPLETE!**\n\nThe OneDesigner centralization architecture is now **100% COMPLETE** with all 8 phases active and working together seamlessly! This represents a major transformation from scattered codebase to a well-architected, maintainable, and scalable system ready for continued growth and enhancement. üöÄ\n\n### üì¶ **Post-Centralization Updates** (Aug 12, 2025)\n\nAfter completing the core centralization, we aligned all recent features with the centralized architecture:\n\n#### **Project Request System Centralization**\n- **Service Layer**: `/src/lib/database/project-request-service.ts`\n  - Centralized database operations for project requests\n  - Methods: `create()`, `getByDesigner()`, `getById()`, `approve()`, `reject()`, `checkExisting()`\n  - Integrated with LoggingService for error tracking\n\n- **Email Templates**: `/src/lib/email/templates/project-request.ts`\n  - `createProjectRequestEmail()` - New project notifications for designers\n  - `createProjectApprovedEmail()` - Approval notifications for clients  \n  - `createProjectRejectedEmail()` - Rejection notifications for clients\n  - Uses baseEmailTemplate for consistent styling\n\n- **API Updates**:\n  - `/api/client/matches/[id]/contact` - Uses ProjectRequestService + centralized templates\n  - `/api/designer/project-requests` - Uses ProjectRequestService for fetching\n  - `/api/designer/project-requests/[id]/respond` - Uses centralized service for approve/reject\n\n#### **Modal Components Centralization**\n- **Components**: `/src/lib/components/modals/`\n  - `ContactDesignerModal` - Centralized contact designer UI\n  - `SuccessModal` - Reusable success notification modal\n  - Auto-hide functionality with configurable delays\n  - Consistent theming with design system\n\n- **Constants**: `/src/lib/constants/messages.ts`\n  - `CONTACT_MESSAGES` - Suggested messages and defaults\n  - `SUCCESS_MESSAGES` - Standardized success notifications\n  - `ERROR_MESSAGES` - Common error messages\n\n#### **Admin Dashboard Improvements**\n- Fixed designer profile modal to show all information correctly\n- Added avatar display with initials fallback\n- Portfolio images section (placeholder)\n- Complete application information display\n\n#### **Client-Designer Contact Flow**\n- Removed \"Conversations\" feature from client dashboard\n- Implemented email-based contact system\n- Designer approval reveals client email\n- Beautiful modal UI with suggested messages\n\n### **Migration Status**\n- ‚úÖ All new features use centralized services\n- ‚úÖ Email templates fully centralized\n- ‚úÖ Modal components centralized\n- ‚úÖ Project request APIs use service layer\n- ‚úÖ Consistent error handling throughout\n\n---\n**Last Updated**: August 12, 2025\n**Version**: 2.1.0 (Post-Centralization Alignment)\n**Status**: Production Ready with All Features Centralized"
    }
  ],
  "CENTRALIZATION_PROGRESS.md": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "# Centralization Progress Report\n\n## üÜï Phase 1: Constants & Configuration ‚úÖ COMPLETED (Aug 8, 2025)\n\n### Constants Centralized\nAdded to `/src/lib/constants/index.ts`:\n- **AUTH_COOKIES**: Session cookie names for client, designer, admin\n- **API_ENDPOINTS**: External API URLs (Resend, LemonSqueezy, DeepSeek)  \n- **OTP_CONFIG**: OTP expiry time (600000ms) and length (6)\n- **PLACEHOLDER_IMAGES**: Placeholder image URLs\n\n### Files Migrated (7 files)\n1. `/src/lib/auth/otp.ts` - Using `OTP_CONFIG`\n2. `/src/lib/auth/custom-otp.ts` - Using `OTP_CONFIG`\n3. `/src/lib/email/send-email.ts` - Using `API_ENDPOINTS.RESEND`\n4. `/src/lib/email/send-otp.ts` - Using `API_ENDPOINTS.RESEND`\n5. `/src/lib/ai/providers/deepseek.ts` - Using `API_ENDPOINTS.DEEPSEEK`\n6. `/src/app/api/checkout/create/route.ts` - Using `AUTH_COOKIES.CLIENT` and `API_ENDPOINTS.LEMONSQUEEZY`\n7. `/src/app/api/auth/session/route.ts` - Using `AUTH_COOKIES.CLIENT`\n\n### Verification\n- ‚úÖ Build successful\n- ‚úÖ Dev server runs without errors\n- ‚úÖ No breaking changes\n- ‚úÖ All functionality preserved\n\n---\n\n## üÜï Phase 2: API Response Utilities ‚úÖ COMPLETED (Aug 8, 2025)\n\n### Created Response Utilities\nCreated `/src/lib/api/responses.ts` with:\n- `apiResponse.success()` - Success responses\n- `apiResponse.error()` - Error responses with details\n- `apiResponse.unauthorized()` - 401 responses\n- `apiResponse.forbidden()` - 403 responses\n- `apiResponse.notFound()` - 404 responses\n- `apiResponse.validationError()` - 422 responses\n- `apiResponse.serverError()` - 500 responses\n- `handleApiError()` - Centralized error handler\n\n### Files Migrated (10 of 36)\n1. `/src/app/api/health/route.ts` - Simple success response\n2. `/src/app/api/admin/auth/session/route.ts` - Multiple response types + constants\n3. `/src/app/api/admin/designers/[id]/approve/route.ts` - Complex responses with error handling\n4. `/src/app/api/auth/send-otp/route.ts` - Error handling improvements\n5. `/src/app/api/auth/verify-otp/route.ts` - Session creation + responses\n6. `/src/app/api/match/find/route.ts` - Complex matching API with multiple error types\n7. Plus 4 additional routes via batch migration\n\n## üÜï Phase 3: Authentication Session Handlers ‚úÖ COMPLETED (Aug 8, 2025)\n\n### Created Session Management System\nCreated `/src/lib/auth/session-handlers.ts` with:\n- `getSession()` - Get session for any user type\n- `createSession()` - Create new sessions\n- `clearSession()` - Clear sessions\n- `validateSession()` - Validate and get user data\n- `refreshSession()` - Extend session expiry\n- `requireAuth()` - Helper for API routes\n\n### Files Migrated\n1. `/src/app/api/designer/auth/session/route.ts` - Using validateSession()\n2. `/src/app/api/auth/verify-otp/route.ts` - Using createSession()\n\n## üÜï Phase 4: Database Service Layer ‚úÖ COMPLETED (Aug 8, 2025)\n\n### Created Database Services\n- `/src/lib/database/base.ts` - Base class with error handling\n- `/src/lib/database/designer-service.ts` - Designer operations\n- `/src/lib/database/client-service.ts` - Client operations\n\n### Features Implemented\n- Centralized error handling for all database operations\n- Consistent query patterns and pagination\n- Input validation and required field checking\n- Singleton pattern for service instances\n\n## üÜï Phase 5: Email Templates ‚úÖ COMPLETED (Aug 8, 2025)\n\n### Created Template System\nCreated `/src/lib/email/template-base.ts` with:\n- `createEmailTemplate()` - Base template with consistent styling\n- `createWelcomeClientEmail()` - Client welcome emails\n- `createWelcomeDesignerEmail()` - Designer welcome emails  \n- `createOTPEmail()` - OTP verification emails\n\n### Files Migrated\n1. `/src/lib/email/templates/welcome-client.ts` - Now uses centralized template (300+ lines ‚Üí 15 lines)\n\n### Benefits\n- Consistent branding across all emails\n- Mobile-responsive design\n- Easy to update styling globally\n- Automated plain text generation\n\n---\n\n## ‚úÖ CENTRALIZATION COMPLETE!\n\n### Created Response Utilities\nCreated `/src/lib/api/responses.ts` with:\n- `apiResponse.success()` - Success responses\n- `apiResponse.error()` - Error responses with details\n- `apiResponse.unauthorized()` - 401 responses\n- `apiResponse.forbidden()` - 403 responses\n- `apiResponse.notFound()` - 404 responses\n- `apiResponse.validationError()` - 422 responses\n- `apiResponse.serverError()` - 500 responses\n- `handleApiError()` - Centralized error handler\n\n### Files Migrated (3 of 36)\n1. `/src/app/api/health/route.ts` - Simple success response\n2. `/src/app/api/admin/auth/session/route.ts` - Multiple response types + constants\n3. `/src/app/api/admin/designers/[id]/approve/route.ts` - Complex responses with error handling\n\n### Benefits\n- Consistent response format across all APIs\n- Centralized error handling with context\n- Type-safe responses\n- Backward compatible (no breaking changes)\n\n### Testing\n- ‚úÖ Health endpoint returns identical response\n- ‚úÖ Build successful\n- ‚úÖ No functionality changes\n\n---\n\n## ‚úÖ Completed Tasks (Phase 1)\n\n### 1. Created Shared Component Structure\n```\n/src/components/\n‚îú‚îÄ‚îÄ shared/\n‚îÇ   ‚îú‚îÄ‚îÄ Logo/index.tsx\n‚îÇ   ‚îú‚îÄ‚îÄ ThemeToggle/index.tsx\n‚îÇ   ‚îú‚îÄ‚îÄ Navigation/index.tsx (supports title, signOut)\n‚îÇ   ‚îî‚îÄ‚îÄ index.ts (exports)\n‚îî‚îÄ‚îÄ forms/\n    ‚îú‚îÄ‚îÄ OTPInput/index.tsx\n    ‚îú‚îÄ‚îÄ LoadingButton/index.tsx\n    ‚îî‚îÄ‚îÄ index.ts (exports)\n```\n\n### 2. Extracted Components (100% Identical)\n- **Logo Component**: Exact copy of SVG and styling + custom title support\n- **ThemeToggle Component**: Identical functionality and animations\n- **Navigation Component**: Flexible props for different use cases\n- **OTPInput Component**: Centralized 6-digit input with all keyboard handling\n- **LoadingButton Component**: Reusable button with loading states, variants, and sizes\n\n### 3. Created Constants File\n- **Location**: `/src/lib/constants/index.ts`\n- **Contents**:\n  - PRICING_PACKAGES (3 packages)\n  - DESIGN_STYLES (6 styles)\n  - PROJECT_TYPES (6 types)\n  - INDUSTRIES (8 industries)\n  - ANIMATIONS (common classes)\n  - STYLES (border radius, shadows)\n\n### 4. Created Form Components\n- **FormInput Component**: Reusable text/email/number inputs\n- **FormSelect Component**: Dropdown with consistent styling\n- **FormTextarea Component**: Multi-line input with hints\n- All support labels, errors, required indicators\n\n### 5. Test Infrastructure\n- **Test Page**: `/app/test-components/page.tsx`\n- Side-by-side comparison of old vs new\n- Verification checklist included\n\n### 6. Migrations Complete\n- **Admin Pages** (4/4):\n  - ‚úÖ `/app/admin/page.tsx` - Navigation\n  - ‚úÖ `/app/admin/dashboard/page.tsx` - Navigation with signOut\n  - ‚úÖ `/app/admin/verify/page.tsx` - Navigation + OTPInput\n  - ‚úÖ `/app/admin/performance/page.tsx` - Navigation + Full theme integration\n- **Auth Pages** (1/1):\n  - ‚úÖ `/app/auth/verify/page.tsx` - Navigation + OTPInput + LoadingButton\n- **Designer Pages** (7/7):\n  - ‚úÖ `/app/designer/login/page.tsx` - Navigation + LoadingButton\n  - ‚úÖ `/app/designer/login/verify/page.tsx` - Navigation + OTPInput + LoadingButton\n  - ‚úÖ `/app/designer/dashboard/page.tsx` - Navigation with signOut\n  - ‚úÖ `/app/designer/apply/page.tsx` - Navigation + LoadingButton + Constants\n  - ‚úÖ `/app/designer/apply/verify/page.tsx` - Navigation + OTPInput + LoadingButton\n  - ‚úÖ `/app/designer/apply/success/page.tsx` - Logo + ThemeToggle\n  - ‚úÖ `/app/designer/profile/page.tsx` - Navigation + LoadingButton + Constants\n- **Match Page**:\n  - ‚úÖ `/app/match/page.tsx` - Updated payment confirmation section to match test design\n- **Brief Pages** (3/3):\n  - ‚úÖ `/app/brief/page.tsx` - Navigation + LoadingButton + Constants\n  - ‚úÖ `/app/brief/details/page.tsx` - Navigation + LoadingButton + FormTextarea + Constants\n  - ‚úÖ `/app/brief/contact/page.tsx` - Navigation + OTPInput + LoadingButton + FormInput\n- **Client Pages** (3/3):\n  - ‚úÖ `/app/client/purchase/page.tsx` - Navigation + Constants + LoadingButton\n  - ‚úÖ `/app/client/dashboard/page.tsx` - Navigation with credits display\n  - ‚úÖ `/app/client/brief/page.tsx` - Navigation + LoadingButton + Constants\n- **Homepage & Other**:\n  - ‚úÖ `/app/page.tsx` - Logo + ThemeToggle (enhanced with size support)\n  - ‚úÖ `/app/payment/success/page.tsx` - Logo + ThemeToggle\n- **Changes**: Replaced ~30 lines navigation + ~80 lines OTP code per page\n- **Result**: Works identically, no visual changes\n\n## üìä Impact So Far\n\n### Code Reduction\n- **Navigation**: 30 lines ‚Üí 4 lines (26 lines saved √ó 35 pages = **910 lines**)\n- **OTP Input**: 80 lines ‚Üí 5 lines (75 lines saved √ó 4 pages = **300 lines**)\n- **Loading Button**: 15 lines ‚Üí 3 lines (12 lines saved √ó 10+ pages = **120 lines**)\n- **Constants**: Removed 50+ lines of duplicate package definitions\n- **Form Components**: ~40 lines ‚Üí 5 lines (35 lines saved √ó 6+ pages = **210 lines**)\n- **API Service Layer**: Eliminated ~200 lines of duplicate fetch code\n- **Hook Implementation**: Saved ~150 lines of repeated state management\n- **Total Savings So Far**: **2,050+ lines eliminated**\n\n### Files Updated\n- ‚úÖ 21 of 35 pages migrated (4 admin + 1 auth + 7 designer + 3 client + 1 match + 3 brief + 1 homepage + 1 payment)\n- ‚úÖ 8 new reusable components (Navigation, OTPInput, LoadingButton, Logo, ThemeToggle, FormInput, FormSelect, FormTextarea)\n- ‚úÖ 1 constants file (pricing, styles, industries, etc.)\n- ‚úÖ 6 API service modules (auth, matches, payment, designer, admin, error handling)\n- ‚úÖ 3 utility hooks (useAuth, useTheme, useLocalStorage)\n- ‚úÖ Centralized error handling system with AppError class\n- ‚úÖ React.memo optimizations for performance\n- ‚úÖ 4 pages upgraded to new architecture (admin login, admin verify, designer login, client purchase)\n- ‚úÖ 0 bugs introduced\n- ‚úÖ 0 functionality changes\n- ‚úÖ 100% backward compatible\n\n## üöÄ Next Steps\n\n### Phase 4 - Final Migration:\n1. **Remaining client pages** (2-3 files)\n   - `/app/client/match/[id]/page.tsx`\n   - `/app/client/brief/details/page.tsx`\n   - `/app/client/brief/contact/page.tsx`\n\n2. **Test & debug pages** (optional cleanup)\n   - Various `/app/test-*` pages\n   - Redesign reference pages\n\n### Phase 5 - Advanced Architecture (IN PROGRESS):\n1. **‚úÖ API Services Implementation**\n   - Created centralized API client with consistent error handling\n   - Built service modules: auth, matches, payment, designer, admin\n   - Updated 4 pages to use new API services (admin, designer, client)\n\n2. **‚úÖ Hooks Integration**\n   - Implemented `useTheme` hook with localStorage persistence\n   - Implemented `useAuth` hook with session management\n   - Replaced manual state management in 5+ components\n\n3. **‚úÖ Performance Optimizations**\n   - Optimized 3 core components with React.memo\n   - Enhanced error handling with centralized system\n   - Improved code organization and type safety\n\n4. **‚úÖ Error Handling Enhancement**\n   - Created AppError class with typed error categories\n   - Added user-friendly message conversion\n   - Implemented toast-based error notifications\n\n## üõ°Ô∏è Safety Verification\n\n### Test Results:\n- [x] Navigation renders identically\n- [x] Theme toggle works\n- [x] All links functional\n- [x] No console errors\n- [x] Responsive design intact\n- [x] Dark/light mode switching works\n- [x] No performance impact\n\n### How to Test:\n1. Visit `http://localhost:3000/test-components`\n2. Compare old vs new navigation\n3. Test all interactions\n4. Check `/admin` page still works\n\n## üìù Migration Guide for Team\n\n### To migrate a page:\n1. Import: `import { Navigation } from '@/components/shared'`\n2. Remove old navigation JSX (lines 50-80 typically)\n3. Add: `<Navigation theme={theme} isDarkMode={isDarkMode} toggleTheme={toggleTheme} />`\n4. Test the page thoroughly\n5. Commit with message: \"Migrate [page] to centralized Navigation\"\n\n### To use constants:\n```typescript\nimport { PRICING_PACKAGES, DESIGN_STYLES } from '@/lib/constants'\n// Remove local const definitions\n// Use imported constants directly\n```\n\n## üéØ Goals Achieved\n- ‚úÖ Zero breaking changes\n- ‚úÖ No database modifications\n- ‚úÖ No design changes\n- ‚úÖ Reduced code duplication\n- ‚úÖ Easier maintenance\n- ‚úÖ Type safety maintained\n\n## üìà Projected Impact (When Complete)\n- **Total lines saved**: ~5,000-6,000 lines\n- **Maintenance time**: 70% reduction\n- **Bug surface area**: 60% smaller\n- **New feature time**: 50% faster\n\n---\n\n**Status**: Safe to continue migration. No issues found."
    }
  ],
  "CENTRALIZATION_PLAN.md": [
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "# OneDesigner Centralization Plan - Safe Implementation Guide\n\n## Overview\nThis plan outlines a safe, phased approach to centralize duplicated code, functions, and features across the OneDesigner codebase without affecting existing functionality, design, or user experience.\n\n## Core Principles\n1. **No Breaking Changes**: All centralization must be backward compatible\n2. **Incremental Migration**: Replace one instance at a time with testing\n3. **Validation First**: Test each change before proceeding to the next\n4. **Rollback Ready**: Keep original code until all migrations are verified\n5. **Zero User Impact**: No changes to UI, UX, or functionality\n\n## Safety Checks Protocol\nBefore centralizing any component:\n1. ‚úÖ Identify all files using the component\n2. ‚úÖ Document current behavior and expected outputs\n3. ‚úÖ Create centralized version with same interface\n4. ‚úÖ Test with one file first\n5. ‚úÖ Verify no visual or functional changes\n6. ‚úÖ Gradually migrate remaining files\n7. ‚úÖ Run full test suite after complete migration\n\n## Current State Analysis - Issues Found\n\n### 1. **Authentication & Session Management**\n- **Duplicated across**: 37+ files (client, designer, admin auth routes)\n- **Issues**: Nearly identical cookie parsing, session validation, user data fetching\n- **Risk**: Security vulnerabilities from inconsistent implementation\n\n### 2. **API Response Patterns**\n- **177+ occurrences** of `NextResponse.json()` with inconsistent formats\n- **Issues**: Different error formats, no standard success responses\n- **Risk**: Client-side parsing errors, poor error handling\n\n### 3. **Email Templates**\n- **300+ lines duplicated** between client and designer welcome emails\n- **Issues**: Identical HTML structure and CSS styles\n- **Risk**: Maintenance nightmare, inconsistent branding\n\n### 4. **Database Query Patterns**\n- **37+ files** creating Supabase clients independently\n- **Issues**: No centralized error handling, repeated complex queries\n- **Risk**: Performance issues, connection leaks\n\n### 5. **Form Components & Styling**\n- **Identical styling logic** across FormInput, FormSelect, FormTextarea\n- **Issues**: Theme props manually passed, duplicated validation\n- **Risk**: Inconsistent user experience\n\n### 6. **Constants & Configuration**\n- **Hardcoded values** scattered: API URLs, cookie names, timeouts\n- **Issues**: 'https://api.resend.com/emails', OTP expiry (600000ms) repeated\n- **Risk**: Deployment issues, hard to update values\n\n## Phase 1: Constants & Configuration (Day 1) - SAFE START\n**Risk Level**: Very Low\n**Files Affected**: ~20\n**Testing Required**: Minimal\n\n### 1.1 Create Constants File\n```typescript\n// @/lib/constants/index.ts\nexport const AUTH_COOKIES = {\n  CLIENT: 'client-session',\n  DESIGNER: 'designer-session',\n  ADMIN: 'admin-session'\n} as const\n\nexport const API_ENDPOINTS = {\n  RESEND: 'https://api.resend.com/emails',\n  LEMONSQUEEZY: 'https://api.lemonsqueezy.com/v1',\n  DEEPSEEK: 'https://api.deepseek.com/v1'\n} as const\n\nexport const OTP_CONFIG = {\n  EXPIRY_TIME: 600000, // 10 minutes\n  LENGTH: 6\n} as const\n\nexport const PLACEHOLDER_IMAGES = {\n  DESIGNER_AVATAR: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n  PROJECT_PREVIEW: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe'\n} as const\n```\n\n### 1.2 Migration Steps\n1. Create the constants file\n2. Find and replace one usage at a time\n3. Test each replacement\n4. Commit after each successful migration\n\n### 1.3 Validation Checklist\n- [ ] All cookie names match exactly\n- [ ] API endpoints return same responses\n- [ ] OTP still expires after 10 minutes\n- [ ] Images load correctly\n\n## Phase 2: API Response Utilities (Day 2)\n**Risk Level**: Low\n**Files Affected**: 36 API routes\n**Testing Required**: API endpoint testing\n\n### 2.1 Create Response Utilities\n```typescript\n// @/lib/api/responses.ts\nimport { NextResponse } from 'next/server'\n\nexport const apiResponse = {\n  success: <T>(data: T, status = 200) => \n    NextResponse.json(data, { status }),\n  \n  error: (message: string, status = 400, details?: any) => \n    NextResponse.json({ error: message, ...(details && { details }) }, { status }),\n  \n  unauthorized: (message = 'Unauthorized') => \n    NextResponse.json({ error: message }, { status: 401 }),\n  \n  notFound: (resource = 'Resource') => \n    NextResponse.json({ error: `${resource} not found` }, { status: 404 })\n}\n```\n\n### 2.2 Migration Example\n```typescript\n// Before:\nreturn NextResponse.json({ error: 'Invalid request' }, { status: 400 })\n\n// After:\nreturn apiResponse.error('Invalid request', 400)\n```\n\n### 2.3 Testing Protocol\n1. Test one endpoint completely\n2. Compare response format before/after\n3. Verify status codes match\n4. Check error handling paths\n\n## Phase 3: Authentication Session Handlers (Day 3-4)\n**Risk Level**: Medium\n**Files Affected**: 15+ auth endpoints\n**Testing Required**: Full auth flow testing\n\n### 3.1 Create Session Handlers\n```typescript\n// @/lib/auth/session-handlers.ts\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/service-role'\nimport { AUTH_COOKIES } from '@/lib/constants'\n\nexport interface SessionData {\n  email: string\n  userId: string\n  userType: 'client' | 'designer' | 'admin'\n}\n\nexport async function getSession(type: keyof typeof AUTH_COOKIES): Promise<SessionData | null> {\n  const cookieStore = cookies()\n  const sessionCookie = cookieStore.get(AUTH_COOKIES[type])\n  \n  if (!sessionCookie) return null\n  \n  try {\n    const session = JSON.parse(sessionCookie.value)\n    // Validate session structure\n    if (!session.email || !session.userId) return null\n    return session\n  } catch {\n    return null\n  }\n}\n\nexport async function createSession(\n  type: keyof typeof AUTH_COOKIES, \n  data: SessionData\n): Promise<void> {\n  const cookieStore = cookies()\n  cookieStore.set(AUTH_COOKIES[type], JSON.stringify(data), {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7 // 7 days\n  })\n}\n```\n\n### 3.2 Testing Checklist\n- [ ] Login flow works for all user types\n- [ ] Session persistence across requests\n- [ ] Logout properly clears session\n- [ ] Invalid sessions are rejected\n- [ ] Cookie settings match production requirements\n\n## Phase 4: Database Service Layer (Day 5-6)\n**Risk Level**: Medium\n**Files Affected**: 37+ files\n**Testing Required**: Database query testing\n\n### 4.1 Create Database Services\n```typescript\n// @/lib/database/base.ts\nimport { createServiceClient } from '@/lib/supabase/service-role'\n\nexport abstract class DatabaseService {\n  protected supabase = createServiceClient()\n  \n  protected handleError(error: any, operation: string) {\n    console.error(`Database error in ${operation}:`, error)\n    throw new Error(`Failed to ${operation}`)\n  }\n}\n\n// @/lib/database/designer-service.ts\nexport class DesignerService extends DatabaseService {\n  async getDesignerProfile(designerId: string) {\n    const { data, error } = await this.supabase\n      .from('designers')\n      .select(`\n        *,\n        designer_project_types (project_type),\n        designer_industries (industry),\n        designer_styles (style)\n      `)\n      .eq('id', designerId)\n      .single()\n    \n    if (error) this.handleError(error, 'get designer profile')\n    return data\n  }\n}\n\n// Export singleton instance\nexport const designerService = new DesignerService()\n```\n\n### 4.2 Migration Strategy\n1. Create service for one domain (e.g., designers)\n2. Test with read operations first\n3. Migrate write operations after validation\n4. Monitor for performance changes\n\n## Phase 5: Email Template System (Day 7)\n**Risk Level**: Low\n**Files Affected**: 4 email templates\n**Testing Required**: Email rendering tests\n\n### 5.1 Create Base Template\n```typescript\n// @/lib/email/template-base.ts\nexport interface EmailTemplateProps {\n  title: string\n  preheader: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n  }\n}\n\nexport function createEmailTemplate(props: EmailTemplateProps): string {\n  // Shared HTML structure\n  return `<!DOCTYPE html>\n    <html>\n      <head>\n        <title>${props.title}</title>\n        <!-- Common styles -->\n      </head>\n      <body>\n        ${props.content.greeting ? `<h1>${props.content.greeting}</h1>` : ''}\n        <p>${props.content.mainText}</p>\n        ${props.content.ctaButton ? `\n          <a href=\"${props.content.ctaButton.href}\">\n            ${props.content.ctaButton.text}\n          </a>\n        ` : ''}\n      </body>\n    </html>`\n}\n```\n\n### 5.2 Validation Steps\n1. Compare rendered HTML before/after\n2. Test email delivery\n3. Verify all dynamic content appears correctly\n4. Check responsive design\n\n## Implementation Timeline\n- **Week 1**: Phases 1-3 (Constants, API responses, Auth)\n- **Week 2**: Phases 4-5 (Database, Email)\n- **Week 3**: Testing & Documentation\n- **Week 4**: Cleanup & Training\n\n## Rollback Plan\nFor each phase:\n1. Keep original code commented\n2. Tag git commits for easy rollback\n3. Document any configuration changes\n4. Test rollback procedure\n\n## Success Metrics\n- ‚úÖ Zero user-reported issues\n- ‚úÖ No increase in error rates\n- ‚úÖ API response times unchanged\n- ‚úÖ All existing tests pass\n- ‚úÖ No visual regressions\n- ‚úÖ 40% reduction in code duplication\n\n## Important Safety Notes\n\n### Before Starting Any Centralization:\n1. **Create a feature branch**: `git checkout -b centralization-phase-1`\n2. **Run existing tests**: Ensure all current functionality works\n3. **Document current behavior**: Screenshot UI, save API responses\n4. **Set up monitoring**: Track error rates before changes\n5. **Have rollback plan ready**: Tag commits for easy revert\n\n### During Implementation:\n1. **Test after each file change**: Don't batch multiple changes\n2. **Keep old code commented**: Until migration is verified\n3. **Use feature flags**: For gradual rollout if needed\n4. **Monitor production**: Watch for any anomalies\n5. **Get peer review**: For each phase completion\n\n### After Each Phase:\n1. **Run full regression tests**: Manual and automated\n2. **Compare performance metrics**: Response times, bundle size\n3. **Check error logs**: Look for new exceptions\n4. **Validate user flows**: Test critical paths\n5. **Document changes**: Update technical documentation\n\n---\n\n## Centralization Complete!\n\nThis plan provides a safe, incremental approach to centralizing the OneDesigner codebase. By following the safety protocols and testing at each step, we can achieve significant code reduction and improved maintainability without risking the user experience or functionality."
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "# OneDesigner Centralization Plan - Safe Implementation Guide\n\n## Overview\nThis plan outlines a safe, phased approach to centralize duplicated code, functions, and features across the OneDesigner codebase without affecting existing functionality, design, or user experience.\n\n## Core Principles\n1. **No Breaking Changes**: All centralization must be backward compatible\n2. **Incremental Migration**: Replace one instance at a time with testing\n3. **Validation First**: Test each change before proceeding to the next\n4. **Rollback Ready**: Keep original code until all migrations are verified\n5. **Zero User Impact**: No changes to UI, UX, or functionality\n\n## Safety Checks Protocol\nBefore centralizing any component:\n1. ‚úÖ Identify all files using the component\n2. ‚úÖ Document current behavior and expected outputs\n3. ‚úÖ Create centralized version with same interface\n4. ‚úÖ Test with one file first\n5. ‚úÖ Verify no visual or functional changes\n6. ‚úÖ Gradually migrate remaining files\n7. ‚úÖ Run full test suite after complete migration\n\n## Current State Analysis - Issues Found\n\n### 1. **Authentication & Session Management**\n- **Duplicated across**: 37+ files (client, designer, admin auth routes)\n- **Issues**: Nearly identical cookie parsing, session validation, user data fetching\n- **Risk**: Security vulnerabilities from inconsistent implementation\n\n### 2. **API Response Patterns**\n- **177+ occurrences** of `NextResponse.json()` with inconsistent formats\n- **Issues**: Different error formats, no standard success responses\n- **Risk**: Client-side parsing errors, poor error handling\n\n### 3. **Email Templates**\n- **300+ lines duplicated** between client and designer welcome emails\n- **Issues**: Identical HTML structure and CSS styles\n- **Risk**: Maintenance nightmare, inconsistent branding\n\n### 4. **Database Query Patterns**\n- **37+ files** creating Supabase clients independently\n- **Issues**: No centralized error handling, repeated complex queries\n- **Risk**: Performance issues, connection leaks\n\n### 5. **Form Components & Styling**\n- **Identical styling logic** across FormInput, FormSelect, FormTextarea\n- **Issues**: Theme props manually passed, duplicated validation\n- **Risk**: Inconsistent user experience\n\n### 6. **Constants & Configuration**\n- **Hardcoded values** scattered: API URLs, cookie names, timeouts\n- **Issues**: 'https://api.resend.com/emails', OTP expiry (600000ms) repeated\n- **Risk**: Deployment issues, hard to update values\n\n## Phase 1: Constants & Configuration (Day 1) - SAFE START\n**Risk Level**: Very Low\n**Files Affected**: ~20\n**Testing Required**: Minimal\n\n### 1.1 Create Constants File\n```typescript\n// @/lib/constants/index.ts\nexport const AUTH_COOKIES = {\n  CLIENT: 'client-session',\n  DESIGNER: 'designer-session',\n  ADMIN: 'admin-session'\n} as const\n\nexport const API_ENDPOINTS = {\n  RESEND: 'https://api.resend.com/emails',\n  LEMONSQUEEZY: 'https://api.lemonsqueezy.com/v1',\n  DEEPSEEK: 'https://api.deepseek.com/v1'\n} as const\n\nexport const OTP_CONFIG = {\n  EXPIRY_TIME: 600000, // 10 minutes\n  LENGTH: 6\n} as const\n\nexport const PLACEHOLDER_IMAGES = {\n  DESIGNER_AVATAR: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n  PROJECT_PREVIEW: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe'\n} as const\n```\n\n### 1.2 Migration Steps\n1. Create the constants file\n2. Find and replace one usage at a time\n3. Test each replacement\n4. Commit after each successful migration\n\n### 1.3 Validation Checklist\n- [ ] All cookie names match exactly\n- [ ] API endpoints return same responses\n- [ ] OTP still expires after 10 minutes\n- [ ] Images load correctly\n\n## Phase 2: API Response Utilities (Day 2)\n**Risk Level**: Low\n**Files Affected**: 36 API routes\n**Testing Required**: API endpoint testing\n\n### 2.1 Create Response Utilities\n```typescript\n// @/lib/api/responses.ts\nimport { NextResponse } from 'next/server'\n\nexport const apiResponse = {\n  success: <T>(data: T, status = 200) => \n    NextResponse.json(data, { status }),\n  \n  error: (message: string, status = 400, details?: any) => \n    NextResponse.json({ error: message, ...(details && { details }) }, { status }),\n  \n  unauthorized: (message = 'Unauthorized') => \n    NextResponse.json({ error: message }, { status: 401 }),\n  \n  notFound: (resource = 'Resource') => \n    NextResponse.json({ error: `${resource} not found` }, { status: 404 })\n}\n```\n\n### 2.2 Migration Example\n```typescript\n// Before:\nreturn NextResponse.json({ error: 'Invalid request' }, { status: 400 })\n\n// After:\nreturn apiResponse.error('Invalid request', 400)\n```\n\n### 2.3 Testing Protocol\n1. Test one endpoint completely\n2. Compare response format before/after\n3. Verify status codes match\n4. Check error handling paths\n\n## Phase 3: Authentication Session Handlers (Day 3-4)\n**Risk Level**: Medium\n**Files Affected**: 15+ auth endpoints\n**Testing Required**: Full auth flow testing\n\n### 3.1 Create Session Handlers\n```typescript\n// @/lib/auth/session-handlers.ts\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/service-role'\nimport { AUTH_COOKIES } from '@/lib/constants'\n\nexport interface SessionData {\n  email: string\n  userId: string\n  userType: 'client' | 'designer' | 'admin'\n}\n\nexport async function getSession(type: keyof typeof AUTH_COOKIES): Promise<SessionData | null> {\n  const cookieStore = cookies()\n  const sessionCookie = cookieStore.get(AUTH_COOKIES[type])\n  \n  if (!sessionCookie) return null\n  \n  try {\n    const session = JSON.parse(sessionCookie.value)\n    // Validate session structure\n    if (!session.email || !session.userId) return null\n    return session\n  } catch {\n    return null\n  }\n}\n\nexport async function createSession(\n  type: keyof typeof AUTH_COOKIES, \n  data: SessionData\n): Promise<void> {\n  const cookieStore = cookies()\n  cookieStore.set(AUTH_COOKIES[type], JSON.stringify(data), {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7 // 7 days\n  })\n}\n```\n\n### 3.2 Testing Checklist\n- [ ] Login flow works for all user types\n- [ ] Session persistence across requests\n- [ ] Logout properly clears session\n- [ ] Invalid sessions are rejected\n- [ ] Cookie settings match production requirements\n\n## Phase 4: Database Service Layer (Day 5-6)\n**Risk Level**: Medium\n**Files Affected**: 37+ files\n**Testing Required**: Database query testing\n\n### 4.1 Create Database Services\n```typescript\n// @/lib/database/base.ts\nimport { createServiceClient } from '@/lib/supabase/service-role'\n\nexport abstract class DatabaseService {\n  protected supabase = createServiceClient()\n  \n  protected handleError(error: any, operation: string) {\n    console.error(`Database error in ${operation}:`, error)\n    throw new Error(`Failed to ${operation}`)\n  }\n}\n\n// @/lib/database/designer-service.ts\nexport class DesignerService extends DatabaseService {\n  async getDesignerProfile(designerId: string) {\n    const { data, error } = await this.supabase\n      .from('designers')\n      .select(`\n        *,\n        designer_project_types (project_type),\n        designer_industries (industry),\n        designer_styles (style)\n      `)\n      .eq('id', designerId)\n      .single()\n    \n    if (error) this.handleError(error, 'get designer profile')\n    return data\n  }\n}\n\n// Export singleton instance\nexport const designerService = new DesignerService()\n```\n\n### 4.2 Migration Strategy\n1. Create service for one domain (e.g., designers)\n2. Test with read operations first\n3. Migrate write operations after validation\n4. Monitor for performance changes\n\n## Phase 5: Email Template System (Day 7)\n**Risk Level**: Low\n**Files Affected**: 4 email templates\n**Testing Required**: Email rendering tests\n\n### 5.1 Create Base Template\n```typescript\n// @/lib/email/template-base.ts\nexport interface EmailTemplateProps {\n  title: string\n  preheader: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n  }\n}\n\nexport function createEmailTemplate(props: EmailTemplateProps): string {\n  // Shared HTML structure\n  return `<!DOCTYPE html>\n    <html>\n      <head>\n        <title>${props.title}</title>\n        <!-- Common styles -->\n      </head>\n      <body>\n        ${props.content.greeting ? `<h1>${props.content.greeting}</h1>` : ''}\n        <p>${props.content.mainText}</p>\n        ${props.content.ctaButton ? `\n          <a href=\"${props.content.ctaButton.href}\">\n            ${props.content.ctaButton.text}\n          </a>\n        ` : ''}\n      </body>\n    </html>`\n}\n```\n\n### 5.2 Validation Steps\n1. Compare rendered HTML before/after\n2. Test email delivery\n3. Verify all dynamic content appears correctly\n4. Check responsive design\n\n## Implementation Timeline\n- **Week 1**: Phases 1-3 (Constants, API responses, Auth)\n- **Week 2**: Phases 4-5 (Database, Email)\n- **Week 3**: Testing & Documentation\n- **Week 4**: Cleanup & Training\n\n## Rollback Plan\nFor each phase:\n1. Keep original code commented\n2. Tag git commits for easy rollback\n3. Document any configuration changes\n4. Test rollback procedure\n\n## Success Metrics\n- ‚úÖ Zero user-reported issues\n- ‚úÖ No increase in error rates\n- ‚úÖ API response times unchanged\n- ‚úÖ All existing tests pass\n- ‚úÖ No visual regressions\n- ‚úÖ 40% reduction in code duplication\n\n## Important Safety Notes\n\n### Before Starting Any Centralization:\n1. **Create a feature branch**: `git checkout -b centralization-phase-1`\n2. **Run existing tests**: Ensure all current functionality works\n3. **Document current behavior**: Screenshot UI, save API responses\n4. **Set up monitoring**: Track error rates before changes\n5. **Have rollback plan ready**: Tag commits for easy revert\n\n### During Implementation:\n1. **Test after each file change**: Don't batch multiple changes\n2. **Keep old code commented**: Until migration is verified\n3. **Use feature flags**: For gradual rollout if needed\n4. **Monitor production**: Watch for any anomalies\n5. **Get peer review**: For each phase completion\n\n### After Each Phase:\n1. **Run full regression tests**: Manual and automated\n2. **Compare performance metrics**: Response times, bundle size\n3. **Check error logs**: Look for new exceptions\n4. **Validate user flows**: Test critical paths\n5. **Document changes**: Update technical documentation\n\n---\n\n## Centralization Complete!\n\nThis plan provides a safe, incremental approach to centralizing the OneDesigner codebase. By following the safety protocols and testing at each step, we can achieve significant code reduction and improved maintainability without risking the user experience or functionality."
    },
    {
      "pattern": "https://api.lemonsqueezy.com/v1",
      "replacement": "API_ENDPOINTS.LEMONSQUEEZY",
      "line": 1,
      "context": "# OneDesigner Centralization Plan - Safe Implementation Guide\n\n## Overview\nThis plan outlines a safe, phased approach to centralize duplicated code, functions, and features across the OneDesigner codebase without affecting existing functionality, design, or user experience.\n\n## Core Principles\n1. **No Breaking Changes**: All centralization must be backward compatible\n2. **Incremental Migration**: Replace one instance at a time with testing\n3. **Validation First**: Test each change before proceeding to the next\n4. **Rollback Ready**: Keep original code until all migrations are verified\n5. **Zero User Impact**: No changes to UI, UX, or functionality\n\n## Safety Checks Protocol\nBefore centralizing any component:\n1. ‚úÖ Identify all files using the component\n2. ‚úÖ Document current behavior and expected outputs\n3. ‚úÖ Create centralized version with same interface\n4. ‚úÖ Test with one file first\n5. ‚úÖ Verify no visual or functional changes\n6. ‚úÖ Gradually migrate remaining files\n7. ‚úÖ Run full test suite after complete migration\n\n## Current State Analysis - Issues Found\n\n### 1. **Authentication & Session Management**\n- **Duplicated across**: 37+ files (client, designer, admin auth routes)\n- **Issues**: Nearly identical cookie parsing, session validation, user data fetching\n- **Risk**: Security vulnerabilities from inconsistent implementation\n\n### 2. **API Response Patterns**\n- **177+ occurrences** of `NextResponse.json()` with inconsistent formats\n- **Issues**: Different error formats, no standard success responses\n- **Risk**: Client-side parsing errors, poor error handling\n\n### 3. **Email Templates**\n- **300+ lines duplicated** between client and designer welcome emails\n- **Issues**: Identical HTML structure and CSS styles\n- **Risk**: Maintenance nightmare, inconsistent branding\n\n### 4. **Database Query Patterns**\n- **37+ files** creating Supabase clients independently\n- **Issues**: No centralized error handling, repeated complex queries\n- **Risk**: Performance issues, connection leaks\n\n### 5. **Form Components & Styling**\n- **Identical styling logic** across FormInput, FormSelect, FormTextarea\n- **Issues**: Theme props manually passed, duplicated validation\n- **Risk**: Inconsistent user experience\n\n### 6. **Constants & Configuration**\n- **Hardcoded values** scattered: API URLs, cookie names, timeouts\n- **Issues**: 'https://api.resend.com/emails', OTP expiry (600000ms) repeated\n- **Risk**: Deployment issues, hard to update values\n\n## Phase 1: Constants & Configuration (Day 1) - SAFE START\n**Risk Level**: Very Low\n**Files Affected**: ~20\n**Testing Required**: Minimal\n\n### 1.1 Create Constants File\n```typescript\n// @/lib/constants/index.ts\nexport const AUTH_COOKIES = {\n  CLIENT: 'client-session',\n  DESIGNER: 'designer-session',\n  ADMIN: 'admin-session'\n} as const\n\nexport const API_ENDPOINTS = {\n  RESEND: 'https://api.resend.com/emails',\n  LEMONSQUEEZY: 'https://api.lemonsqueezy.com/v1',\n  DEEPSEEK: 'https://api.deepseek.com/v1'\n} as const\n\nexport const OTP_CONFIG = {\n  EXPIRY_TIME: 600000, // 10 minutes\n  LENGTH: 6\n} as const\n\nexport const PLACEHOLDER_IMAGES = {\n  DESIGNER_AVATAR: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n  PROJECT_PREVIEW: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe'\n} as const\n```\n\n### 1.2 Migration Steps\n1. Create the constants file\n2. Find and replace one usage at a time\n3. Test each replacement\n4. Commit after each successful migration\n\n### 1.3 Validation Checklist\n- [ ] All cookie names match exactly\n- [ ] API endpoints return same responses\n- [ ] OTP still expires after 10 minutes\n- [ ] Images load correctly\n\n## Phase 2: API Response Utilities (Day 2)\n**Risk Level**: Low\n**Files Affected**: 36 API routes\n**Testing Required**: API endpoint testing\n\n### 2.1 Create Response Utilities\n```typescript\n// @/lib/api/responses.ts\nimport { NextResponse } from 'next/server'\n\nexport const apiResponse = {\n  success: <T>(data: T, status = 200) => \n    NextResponse.json(data, { status }),\n  \n  error: (message: string, status = 400, details?: any) => \n    NextResponse.json({ error: message, ...(details && { details }) }, { status }),\n  \n  unauthorized: (message = 'Unauthorized') => \n    NextResponse.json({ error: message }, { status: 401 }),\n  \n  notFound: (resource = 'Resource') => \n    NextResponse.json({ error: `${resource} not found` }, { status: 404 })\n}\n```\n\n### 2.2 Migration Example\n```typescript\n// Before:\nreturn NextResponse.json({ error: 'Invalid request' }, { status: 400 })\n\n// After:\nreturn apiResponse.error('Invalid request', 400)\n```\n\n### 2.3 Testing Protocol\n1. Test one endpoint completely\n2. Compare response format before/after\n3. Verify status codes match\n4. Check error handling paths\n\n## Phase 3: Authentication Session Handlers (Day 3-4)\n**Risk Level**: Medium\n**Files Affected**: 15+ auth endpoints\n**Testing Required**: Full auth flow testing\n\n### 3.1 Create Session Handlers\n```typescript\n// @/lib/auth/session-handlers.ts\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/service-role'\nimport { AUTH_COOKIES } from '@/lib/constants'\n\nexport interface SessionData {\n  email: string\n  userId: string\n  userType: 'client' | 'designer' | 'admin'\n}\n\nexport async function getSession(type: keyof typeof AUTH_COOKIES): Promise<SessionData | null> {\n  const cookieStore = cookies()\n  const sessionCookie = cookieStore.get(AUTH_COOKIES[type])\n  \n  if (!sessionCookie) return null\n  \n  try {\n    const session = JSON.parse(sessionCookie.value)\n    // Validate session structure\n    if (!session.email || !session.userId) return null\n    return session\n  } catch {\n    return null\n  }\n}\n\nexport async function createSession(\n  type: keyof typeof AUTH_COOKIES, \n  data: SessionData\n): Promise<void> {\n  const cookieStore = cookies()\n  cookieStore.set(AUTH_COOKIES[type], JSON.stringify(data), {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7 // 7 days\n  })\n}\n```\n\n### 3.2 Testing Checklist\n- [ ] Login flow works for all user types\n- [ ] Session persistence across requests\n- [ ] Logout properly clears session\n- [ ] Invalid sessions are rejected\n- [ ] Cookie settings match production requirements\n\n## Phase 4: Database Service Layer (Day 5-6)\n**Risk Level**: Medium\n**Files Affected**: 37+ files\n**Testing Required**: Database query testing\n\n### 4.1 Create Database Services\n```typescript\n// @/lib/database/base.ts\nimport { createServiceClient } from '@/lib/supabase/service-role'\n\nexport abstract class DatabaseService {\n  protected supabase = createServiceClient()\n  \n  protected handleError(error: any, operation: string) {\n    console.error(`Database error in ${operation}:`, error)\n    throw new Error(`Failed to ${operation}`)\n  }\n}\n\n// @/lib/database/designer-service.ts\nexport class DesignerService extends DatabaseService {\n  async getDesignerProfile(designerId: string) {\n    const { data, error } = await this.supabase\n      .from('designers')\n      .select(`\n        *,\n        designer_project_types (project_type),\n        designer_industries (industry),\n        designer_styles (style)\n      `)\n      .eq('id', designerId)\n      .single()\n    \n    if (error) this.handleError(error, 'get designer profile')\n    return data\n  }\n}\n\n// Export singleton instance\nexport const designerService = new DesignerService()\n```\n\n### 4.2 Migration Strategy\n1. Create service for one domain (e.g., designers)\n2. Test with read operations first\n3. Migrate write operations after validation\n4. Monitor for performance changes\n\n## Phase 5: Email Template System (Day 7)\n**Risk Level**: Low\n**Files Affected**: 4 email templates\n**Testing Required**: Email rendering tests\n\n### 5.1 Create Base Template\n```typescript\n// @/lib/email/template-base.ts\nexport interface EmailTemplateProps {\n  title: string\n  preheader: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n  }\n}\n\nexport function createEmailTemplate(props: EmailTemplateProps): string {\n  // Shared HTML structure\n  return `<!DOCTYPE html>\n    <html>\n      <head>\n        <title>${props.title}</title>\n        <!-- Common styles -->\n      </head>\n      <body>\n        ${props.content.greeting ? `<h1>${props.content.greeting}</h1>` : ''}\n        <p>${props.content.mainText}</p>\n        ${props.content.ctaButton ? `\n          <a href=\"${props.content.ctaButton.href}\">\n            ${props.content.ctaButton.text}\n          </a>\n        ` : ''}\n      </body>\n    </html>`\n}\n```\n\n### 5.2 Validation Steps\n1. Compare rendered HTML before/after\n2. Test email delivery\n3. Verify all dynamic content appears correctly\n4. Check responsive design\n\n## Implementation Timeline\n- **Week 1**: Phases 1-3 (Constants, API responses, Auth)\n- **Week 2**: Phases 4-5 (Database, Email)\n- **Week 3**: Testing & Documentation\n- **Week 4**: Cleanup & Training\n\n## Rollback Plan\nFor each phase:\n1. Keep original code commented\n2. Tag git commits for easy rollback\n3. Document any configuration changes\n4. Test rollback procedure\n\n## Success Metrics\n- ‚úÖ Zero user-reported issues\n- ‚úÖ No increase in error rates\n- ‚úÖ API response times unchanged\n- ‚úÖ All existing tests pass\n- ‚úÖ No visual regressions\n- ‚úÖ 40% reduction in code duplication\n\n## Important Safety Notes\n\n### Before Starting Any Centralization:\n1. **Create a feature branch**: `git checkout -b centralization-phase-1`\n2. **Run existing tests**: Ensure all current functionality works\n3. **Document current behavior**: Screenshot UI, save API responses\n4. **Set up monitoring**: Track error rates before changes\n5. **Have rollback plan ready**: Tag commits for easy revert\n\n### During Implementation:\n1. **Test after each file change**: Don't batch multiple changes\n2. **Keep old code commented**: Until migration is verified\n3. **Use feature flags**: For gradual rollout if needed\n4. **Monitor production**: Watch for any anomalies\n5. **Get peer review**: For each phase completion\n\n### After Each Phase:\n1. **Run full regression tests**: Manual and automated\n2. **Compare performance metrics**: Response times, bundle size\n3. **Check error logs**: Look for new exceptions\n4. **Validate user flows**: Test critical paths\n5. **Document changes**: Update technical documentation\n\n---\n\n## Centralization Complete!\n\nThis plan provides a safe, incremental approach to centralizing the OneDesigner codebase. By following the safety protocols and testing at each step, we can achieve significant code reduction and improved maintainability without risking the user experience or functionality."
    },
    {
      "pattern": "https://api.deepseek.com/v1",
      "replacement": "API_ENDPOINTS.DEEPSEEK",
      "line": 1,
      "context": "# OneDesigner Centralization Plan - Safe Implementation Guide\n\n## Overview\nThis plan outlines a safe, phased approach to centralize duplicated code, functions, and features across the OneDesigner codebase without affecting existing functionality, design, or user experience.\n\n## Core Principles\n1. **No Breaking Changes**: All centralization must be backward compatible\n2. **Incremental Migration**: Replace one instance at a time with testing\n3. **Validation First**: Test each change before proceeding to the next\n4. **Rollback Ready**: Keep original code until all migrations are verified\n5. **Zero User Impact**: No changes to UI, UX, or functionality\n\n## Safety Checks Protocol\nBefore centralizing any component:\n1. ‚úÖ Identify all files using the component\n2. ‚úÖ Document current behavior and expected outputs\n3. ‚úÖ Create centralized version with same interface\n4. ‚úÖ Test with one file first\n5. ‚úÖ Verify no visual or functional changes\n6. ‚úÖ Gradually migrate remaining files\n7. ‚úÖ Run full test suite after complete migration\n\n## Current State Analysis - Issues Found\n\n### 1. **Authentication & Session Management**\n- **Duplicated across**: 37+ files (client, designer, admin auth routes)\n- **Issues**: Nearly identical cookie parsing, session validation, user data fetching\n- **Risk**: Security vulnerabilities from inconsistent implementation\n\n### 2. **API Response Patterns**\n- **177+ occurrences** of `NextResponse.json()` with inconsistent formats\n- **Issues**: Different error formats, no standard success responses\n- **Risk**: Client-side parsing errors, poor error handling\n\n### 3. **Email Templates**\n- **300+ lines duplicated** between client and designer welcome emails\n- **Issues**: Identical HTML structure and CSS styles\n- **Risk**: Maintenance nightmare, inconsistent branding\n\n### 4. **Database Query Patterns**\n- **37+ files** creating Supabase clients independently\n- **Issues**: No centralized error handling, repeated complex queries\n- **Risk**: Performance issues, connection leaks\n\n### 5. **Form Components & Styling**\n- **Identical styling logic** across FormInput, FormSelect, FormTextarea\n- **Issues**: Theme props manually passed, duplicated validation\n- **Risk**: Inconsistent user experience\n\n### 6. **Constants & Configuration**\n- **Hardcoded values** scattered: API URLs, cookie names, timeouts\n- **Issues**: 'https://api.resend.com/emails', OTP expiry (600000ms) repeated\n- **Risk**: Deployment issues, hard to update values\n\n## Phase 1: Constants & Configuration (Day 1) - SAFE START\n**Risk Level**: Very Low\n**Files Affected**: ~20\n**Testing Required**: Minimal\n\n### 1.1 Create Constants File\n```typescript\n// @/lib/constants/index.ts\nexport const AUTH_COOKIES = {\n  CLIENT: 'client-session',\n  DESIGNER: 'designer-session',\n  ADMIN: 'admin-session'\n} as const\n\nexport const API_ENDPOINTS = {\n  RESEND: 'https://api.resend.com/emails',\n  LEMONSQUEEZY: 'https://api.lemonsqueezy.com/v1',\n  DEEPSEEK: 'https://api.deepseek.com/v1'\n} as const\n\nexport const OTP_CONFIG = {\n  EXPIRY_TIME: 600000, // 10 minutes\n  LENGTH: 6\n} as const\n\nexport const PLACEHOLDER_IMAGES = {\n  DESIGNER_AVATAR: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n  PROJECT_PREVIEW: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe'\n} as const\n```\n\n### 1.2 Migration Steps\n1. Create the constants file\n2. Find and replace one usage at a time\n3. Test each replacement\n4. Commit after each successful migration\n\n### 1.3 Validation Checklist\n- [ ] All cookie names match exactly\n- [ ] API endpoints return same responses\n- [ ] OTP still expires after 10 minutes\n- [ ] Images load correctly\n\n## Phase 2: API Response Utilities (Day 2)\n**Risk Level**: Low\n**Files Affected**: 36 API routes\n**Testing Required**: API endpoint testing\n\n### 2.1 Create Response Utilities\n```typescript\n// @/lib/api/responses.ts\nimport { NextResponse } from 'next/server'\n\nexport const apiResponse = {\n  success: <T>(data: T, status = 200) => \n    NextResponse.json(data, { status }),\n  \n  error: (message: string, status = 400, details?: any) => \n    NextResponse.json({ error: message, ...(details && { details }) }, { status }),\n  \n  unauthorized: (message = 'Unauthorized') => \n    NextResponse.json({ error: message }, { status: 401 }),\n  \n  notFound: (resource = 'Resource') => \n    NextResponse.json({ error: `${resource} not found` }, { status: 404 })\n}\n```\n\n### 2.2 Migration Example\n```typescript\n// Before:\nreturn NextResponse.json({ error: 'Invalid request' }, { status: 400 })\n\n// After:\nreturn apiResponse.error('Invalid request', 400)\n```\n\n### 2.3 Testing Protocol\n1. Test one endpoint completely\n2. Compare response format before/after\n3. Verify status codes match\n4. Check error handling paths\n\n## Phase 3: Authentication Session Handlers (Day 3-4)\n**Risk Level**: Medium\n**Files Affected**: 15+ auth endpoints\n**Testing Required**: Full auth flow testing\n\n### 3.1 Create Session Handlers\n```typescript\n// @/lib/auth/session-handlers.ts\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/service-role'\nimport { AUTH_COOKIES } from '@/lib/constants'\n\nexport interface SessionData {\n  email: string\n  userId: string\n  userType: 'client' | 'designer' | 'admin'\n}\n\nexport async function getSession(type: keyof typeof AUTH_COOKIES): Promise<SessionData | null> {\n  const cookieStore = cookies()\n  const sessionCookie = cookieStore.get(AUTH_COOKIES[type])\n  \n  if (!sessionCookie) return null\n  \n  try {\n    const session = JSON.parse(sessionCookie.value)\n    // Validate session structure\n    if (!session.email || !session.userId) return null\n    return session\n  } catch {\n    return null\n  }\n}\n\nexport async function createSession(\n  type: keyof typeof AUTH_COOKIES, \n  data: SessionData\n): Promise<void> {\n  const cookieStore = cookies()\n  cookieStore.set(AUTH_COOKIES[type], JSON.stringify(data), {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7 // 7 days\n  })\n}\n```\n\n### 3.2 Testing Checklist\n- [ ] Login flow works for all user types\n- [ ] Session persistence across requests\n- [ ] Logout properly clears session\n- [ ] Invalid sessions are rejected\n- [ ] Cookie settings match production requirements\n\n## Phase 4: Database Service Layer (Day 5-6)\n**Risk Level**: Medium\n**Files Affected**: 37+ files\n**Testing Required**: Database query testing\n\n### 4.1 Create Database Services\n```typescript\n// @/lib/database/base.ts\nimport { createServiceClient } from '@/lib/supabase/service-role'\n\nexport abstract class DatabaseService {\n  protected supabase = createServiceClient()\n  \n  protected handleError(error: any, operation: string) {\n    console.error(`Database error in ${operation}:`, error)\n    throw new Error(`Failed to ${operation}`)\n  }\n}\n\n// @/lib/database/designer-service.ts\nexport class DesignerService extends DatabaseService {\n  async getDesignerProfile(designerId: string) {\n    const { data, error } = await this.supabase\n      .from('designers')\n      .select(`\n        *,\n        designer_project_types (project_type),\n        designer_industries (industry),\n        designer_styles (style)\n      `)\n      .eq('id', designerId)\n      .single()\n    \n    if (error) this.handleError(error, 'get designer profile')\n    return data\n  }\n}\n\n// Export singleton instance\nexport const designerService = new DesignerService()\n```\n\n### 4.2 Migration Strategy\n1. Create service for one domain (e.g., designers)\n2. Test with read operations first\n3. Migrate write operations after validation\n4. Monitor for performance changes\n\n## Phase 5: Email Template System (Day 7)\n**Risk Level**: Low\n**Files Affected**: 4 email templates\n**Testing Required**: Email rendering tests\n\n### 5.1 Create Base Template\n```typescript\n// @/lib/email/template-base.ts\nexport interface EmailTemplateProps {\n  title: string\n  preheader: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n  }\n}\n\nexport function createEmailTemplate(props: EmailTemplateProps): string {\n  // Shared HTML structure\n  return `<!DOCTYPE html>\n    <html>\n      <head>\n        <title>${props.title}</title>\n        <!-- Common styles -->\n      </head>\n      <body>\n        ${props.content.greeting ? `<h1>${props.content.greeting}</h1>` : ''}\n        <p>${props.content.mainText}</p>\n        ${props.content.ctaButton ? `\n          <a href=\"${props.content.ctaButton.href}\">\n            ${props.content.ctaButton.text}\n          </a>\n        ` : ''}\n      </body>\n    </html>`\n}\n```\n\n### 5.2 Validation Steps\n1. Compare rendered HTML before/after\n2. Test email delivery\n3. Verify all dynamic content appears correctly\n4. Check responsive design\n\n## Implementation Timeline\n- **Week 1**: Phases 1-3 (Constants, API responses, Auth)\n- **Week 2**: Phases 4-5 (Database, Email)\n- **Week 3**: Testing & Documentation\n- **Week 4**: Cleanup & Training\n\n## Rollback Plan\nFor each phase:\n1. Keep original code commented\n2. Tag git commits for easy rollback\n3. Document any configuration changes\n4. Test rollback procedure\n\n## Success Metrics\n- ‚úÖ Zero user-reported issues\n- ‚úÖ No increase in error rates\n- ‚úÖ API response times unchanged\n- ‚úÖ All existing tests pass\n- ‚úÖ No visual regressions\n- ‚úÖ 40% reduction in code duplication\n\n## Important Safety Notes\n\n### Before Starting Any Centralization:\n1. **Create a feature branch**: `git checkout -b centralization-phase-1`\n2. **Run existing tests**: Ensure all current functionality works\n3. **Document current behavior**: Screenshot UI, save API responses\n4. **Set up monitoring**: Track error rates before changes\n5. **Have rollback plan ready**: Tag commits for easy revert\n\n### During Implementation:\n1. **Test after each file change**: Don't batch multiple changes\n2. **Keep old code commented**: Until migration is verified\n3. **Use feature flags**: For gradual rollout if needed\n4. **Monitor production**: Watch for any anomalies\n5. **Get peer review**: For each phase completion\n\n### After Each Phase:\n1. **Run full regression tests**: Manual and automated\n2. **Compare performance metrics**: Response times, bundle size\n3. **Check error logs**: Look for new exceptions\n4. **Validate user flows**: Test critical paths\n5. **Document changes**: Update technical documentation\n\n---\n\n## Centralization Complete!\n\nThis plan provides a safe, incremental approach to centralizing the OneDesigner codebase. By following the safety protocols and testing at each step, we can achieve significant code reduction and improved maintainability without risking the user experience or functionality."
    },
    {
      "pattern": "https://images.unsplash.com/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*",
      "line": 1,
      "context": "# OneDesigner Centralization Plan - Safe Implementation Guide\n\n## Overview\nThis plan outlines a safe, phased approach to centralize duplicated code, functions, and features across the OneDesigner codebase without affecting existing functionality, design, or user experience.\n\n## Core Principles\n1. **No Breaking Changes**: All centralization must be backward compatible\n2. **Incremental Migration**: Replace one instance at a time with testing\n3. **Validation First**: Test each change before proceeding to the next\n4. **Rollback Ready**: Keep original code until all migrations are verified\n5. **Zero User Impact**: No changes to UI, UX, or functionality\n\n## Safety Checks Protocol\nBefore centralizing any component:\n1. ‚úÖ Identify all files using the component\n2. ‚úÖ Document current behavior and expected outputs\n3. ‚úÖ Create centralized version with same interface\n4. ‚úÖ Test with one file first\n5. ‚úÖ Verify no visual or functional changes\n6. ‚úÖ Gradually migrate remaining files\n7. ‚úÖ Run full test suite after complete migration\n\n## Current State Analysis - Issues Found\n\n### 1. **Authentication & Session Management**\n- **Duplicated across**: 37+ files (client, designer, admin auth routes)\n- **Issues**: Nearly identical cookie parsing, session validation, user data fetching\n- **Risk**: Security vulnerabilities from inconsistent implementation\n\n### 2. **API Response Patterns**\n- **177+ occurrences** of `NextResponse.json()` with inconsistent formats\n- **Issues**: Different error formats, no standard success responses\n- **Risk**: Client-side parsing errors, poor error handling\n\n### 3. **Email Templates**\n- **300+ lines duplicated** between client and designer welcome emails\n- **Issues**: Identical HTML structure and CSS styles\n- **Risk**: Maintenance nightmare, inconsistent branding\n\n### 4. **Database Query Patterns**\n- **37+ files** creating Supabase clients independently\n- **Issues**: No centralized error handling, repeated complex queries\n- **Risk**: Performance issues, connection leaks\n\n### 5. **Form Components & Styling**\n- **Identical styling logic** across FormInput, FormSelect, FormTextarea\n- **Issues**: Theme props manually passed, duplicated validation\n- **Risk**: Inconsistent user experience\n\n### 6. **Constants & Configuration**\n- **Hardcoded values** scattered: API URLs, cookie names, timeouts\n- **Issues**: 'https://api.resend.com/emails', OTP expiry (600000ms) repeated\n- **Risk**: Deployment issues, hard to update values\n\n## Phase 1: Constants & Configuration (Day 1) - SAFE START\n**Risk Level**: Very Low\n**Files Affected**: ~20\n**Testing Required**: Minimal\n\n### 1.1 Create Constants File\n```typescript\n// @/lib/constants/index.ts\nexport const AUTH_COOKIES = {\n  CLIENT: 'client-session',\n  DESIGNER: 'designer-session',\n  ADMIN: 'admin-session'\n} as const\n\nexport const API_ENDPOINTS = {\n  RESEND: 'https://api.resend.com/emails',\n  LEMONSQUEEZY: 'https://api.lemonsqueezy.com/v1',\n  DEEPSEEK: 'https://api.deepseek.com/v1'\n} as const\n\nexport const OTP_CONFIG = {\n  EXPIRY_TIME: 600000, // 10 minutes\n  LENGTH: 6\n} as const\n\nexport const PLACEHOLDER_IMAGES = {\n  DESIGNER_AVATAR: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n  PROJECT_PREVIEW: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe'\n} as const\n```\n\n### 1.2 Migration Steps\n1. Create the constants file\n2. Find and replace one usage at a time\n3. Test each replacement\n4. Commit after each successful migration\n\n### 1.3 Validation Checklist\n- [ ] All cookie names match exactly\n- [ ] API endpoints return same responses\n- [ ] OTP still expires after 10 minutes\n- [ ] Images load correctly\n\n## Phase 2: API Response Utilities (Day 2)\n**Risk Level**: Low\n**Files Affected**: 36 API routes\n**Testing Required**: API endpoint testing\n\n### 2.1 Create Response Utilities\n```typescript\n// @/lib/api/responses.ts\nimport { NextResponse } from 'next/server'\n\nexport const apiResponse = {\n  success: <T>(data: T, status = 200) => \n    NextResponse.json(data, { status }),\n  \n  error: (message: string, status = 400, details?: any) => \n    NextResponse.json({ error: message, ...(details && { details }) }, { status }),\n  \n  unauthorized: (message = 'Unauthorized') => \n    NextResponse.json({ error: message }, { status: 401 }),\n  \n  notFound: (resource = 'Resource') => \n    NextResponse.json({ error: `${resource} not found` }, { status: 404 })\n}\n```\n\n### 2.2 Migration Example\n```typescript\n// Before:\nreturn NextResponse.json({ error: 'Invalid request' }, { status: 400 })\n\n// After:\nreturn apiResponse.error('Invalid request', 400)\n```\n\n### 2.3 Testing Protocol\n1. Test one endpoint completely\n2. Compare response format before/after\n3. Verify status codes match\n4. Check error handling paths\n\n## Phase 3: Authentication Session Handlers (Day 3-4)\n**Risk Level**: Medium\n**Files Affected**: 15+ auth endpoints\n**Testing Required**: Full auth flow testing\n\n### 3.1 Create Session Handlers\n```typescript\n// @/lib/auth/session-handlers.ts\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/service-role'\nimport { AUTH_COOKIES } from '@/lib/constants'\n\nexport interface SessionData {\n  email: string\n  userId: string\n  userType: 'client' | 'designer' | 'admin'\n}\n\nexport async function getSession(type: keyof typeof AUTH_COOKIES): Promise<SessionData | null> {\n  const cookieStore = cookies()\n  const sessionCookie = cookieStore.get(AUTH_COOKIES[type])\n  \n  if (!sessionCookie) return null\n  \n  try {\n    const session = JSON.parse(sessionCookie.value)\n    // Validate session structure\n    if (!session.email || !session.userId) return null\n    return session\n  } catch {\n    return null\n  }\n}\n\nexport async function createSession(\n  type: keyof typeof AUTH_COOKIES, \n  data: SessionData\n): Promise<void> {\n  const cookieStore = cookies()\n  cookieStore.set(AUTH_COOKIES[type], JSON.stringify(data), {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7 // 7 days\n  })\n}\n```\n\n### 3.2 Testing Checklist\n- [ ] Login flow works for all user types\n- [ ] Session persistence across requests\n- [ ] Logout properly clears session\n- [ ] Invalid sessions are rejected\n- [ ] Cookie settings match production requirements\n\n## Phase 4: Database Service Layer (Day 5-6)\n**Risk Level**: Medium\n**Files Affected**: 37+ files\n**Testing Required**: Database query testing\n\n### 4.1 Create Database Services\n```typescript\n// @/lib/database/base.ts\nimport { createServiceClient } from '@/lib/supabase/service-role'\n\nexport abstract class DatabaseService {\n  protected supabase = createServiceClient()\n  \n  protected handleError(error: any, operation: string) {\n    console.error(`Database error in ${operation}:`, error)\n    throw new Error(`Failed to ${operation}`)\n  }\n}\n\n// @/lib/database/designer-service.ts\nexport class DesignerService extends DatabaseService {\n  async getDesignerProfile(designerId: string) {\n    const { data, error } = await this.supabase\n      .from('designers')\n      .select(`\n        *,\n        designer_project_types (project_type),\n        designer_industries (industry),\n        designer_styles (style)\n      `)\n      .eq('id', designerId)\n      .single()\n    \n    if (error) this.handleError(error, 'get designer profile')\n    return data\n  }\n}\n\n// Export singleton instance\nexport const designerService = new DesignerService()\n```\n\n### 4.2 Migration Strategy\n1. Create service for one domain (e.g., designers)\n2. Test with read operations first\n3. Migrate write operations after validation\n4. Monitor for performance changes\n\n## Phase 5: Email Template System (Day 7)\n**Risk Level**: Low\n**Files Affected**: 4 email templates\n**Testing Required**: Email rendering tests\n\n### 5.1 Create Base Template\n```typescript\n// @/lib/email/template-base.ts\nexport interface EmailTemplateProps {\n  title: string\n  preheader: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n  }\n}\n\nexport function createEmailTemplate(props: EmailTemplateProps): string {\n  // Shared HTML structure\n  return `<!DOCTYPE html>\n    <html>\n      <head>\n        <title>${props.title}</title>\n        <!-- Common styles -->\n      </head>\n      <body>\n        ${props.content.greeting ? `<h1>${props.content.greeting}</h1>` : ''}\n        <p>${props.content.mainText}</p>\n        ${props.content.ctaButton ? `\n          <a href=\"${props.content.ctaButton.href}\">\n            ${props.content.ctaButton.text}\n          </a>\n        ` : ''}\n      </body>\n    </html>`\n}\n```\n\n### 5.2 Validation Steps\n1. Compare rendered HTML before/after\n2. Test email delivery\n3. Verify all dynamic content appears correctly\n4. Check responsive design\n\n## Implementation Timeline\n- **Week 1**: Phases 1-3 (Constants, API responses, Auth)\n- **Week 2**: Phases 4-5 (Database, Email)\n- **Week 3**: Testing & Documentation\n- **Week 4**: Cleanup & Training\n\n## Rollback Plan\nFor each phase:\n1. Keep original code commented\n2. Tag git commits for easy rollback\n3. Document any configuration changes\n4. Test rollback procedure\n\n## Success Metrics\n- ‚úÖ Zero user-reported issues\n- ‚úÖ No increase in error rates\n- ‚úÖ API response times unchanged\n- ‚úÖ All existing tests pass\n- ‚úÖ No visual regressions\n- ‚úÖ 40% reduction in code duplication\n\n## Important Safety Notes\n\n### Before Starting Any Centralization:\n1. **Create a feature branch**: `git checkout -b centralization-phase-1`\n2. **Run existing tests**: Ensure all current functionality works\n3. **Document current behavior**: Screenshot UI, save API responses\n4. **Set up monitoring**: Track error rates before changes\n5. **Have rollback plan ready**: Tag commits for easy revert\n\n### During Implementation:\n1. **Test after each file change**: Don't batch multiple changes\n2. **Keep old code commented**: Until migration is verified\n3. **Use feature flags**: For gradual rollout if needed\n4. **Monitor production**: Watch for any anomalies\n5. **Get peer review**: For each phase completion\n\n### After Each Phase:\n1. **Run full regression tests**: Manual and automated\n2. **Compare performance metrics**: Response times, bundle size\n3. **Check error logs**: Look for new exceptions\n4. **Validate user flows**: Test critical paths\n5. **Document changes**: Update technical documentation\n\n---\n\n## Centralization Complete!\n\nThis plan provides a safe, incremental approach to centralizing the OneDesigner codebase. By following the safety protocols and testing at each step, we can achieve significant code reduction and improved maintainability without risking the user experience or functionality."
    },
    {
      "pattern": "https://images.unsplash.com/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*",
      "line": 1,
      "context": "# OneDesigner Centralization Plan - Safe Implementation Guide\n\n## Overview\nThis plan outlines a safe, phased approach to centralize duplicated code, functions, and features across the OneDesigner codebase without affecting existing functionality, design, or user experience.\n\n## Core Principles\n1. **No Breaking Changes**: All centralization must be backward compatible\n2. **Incremental Migration**: Replace one instance at a time with testing\n3. **Validation First**: Test each change before proceeding to the next\n4. **Rollback Ready**: Keep original code until all migrations are verified\n5. **Zero User Impact**: No changes to UI, UX, or functionality\n\n## Safety Checks Protocol\nBefore centralizing any component:\n1. ‚úÖ Identify all files using the component\n2. ‚úÖ Document current behavior and expected outputs\n3. ‚úÖ Create centralized version with same interface\n4. ‚úÖ Test with one file first\n5. ‚úÖ Verify no visual or functional changes\n6. ‚úÖ Gradually migrate remaining files\n7. ‚úÖ Run full test suite after complete migration\n\n## Current State Analysis - Issues Found\n\n### 1. **Authentication & Session Management**\n- **Duplicated across**: 37+ files (client, designer, admin auth routes)\n- **Issues**: Nearly identical cookie parsing, session validation, user data fetching\n- **Risk**: Security vulnerabilities from inconsistent implementation\n\n### 2. **API Response Patterns**\n- **177+ occurrences** of `NextResponse.json()` with inconsistent formats\n- **Issues**: Different error formats, no standard success responses\n- **Risk**: Client-side parsing errors, poor error handling\n\n### 3. **Email Templates**\n- **300+ lines duplicated** between client and designer welcome emails\n- **Issues**: Identical HTML structure and CSS styles\n- **Risk**: Maintenance nightmare, inconsistent branding\n\n### 4. **Database Query Patterns**\n- **37+ files** creating Supabase clients independently\n- **Issues**: No centralized error handling, repeated complex queries\n- **Risk**: Performance issues, connection leaks\n\n### 5. **Form Components & Styling**\n- **Identical styling logic** across FormInput, FormSelect, FormTextarea\n- **Issues**: Theme props manually passed, duplicated validation\n- **Risk**: Inconsistent user experience\n\n### 6. **Constants & Configuration**\n- **Hardcoded values** scattered: API URLs, cookie names, timeouts\n- **Issues**: 'https://api.resend.com/emails', OTP expiry (600000ms) repeated\n- **Risk**: Deployment issues, hard to update values\n\n## Phase 1: Constants & Configuration (Day 1) - SAFE START\n**Risk Level**: Very Low\n**Files Affected**: ~20\n**Testing Required**: Minimal\n\n### 1.1 Create Constants File\n```typescript\n// @/lib/constants/index.ts\nexport const AUTH_COOKIES = {\n  CLIENT: 'client-session',\n  DESIGNER: 'designer-session',\n  ADMIN: 'admin-session'\n} as const\n\nexport const API_ENDPOINTS = {\n  RESEND: 'https://api.resend.com/emails',\n  LEMONSQUEEZY: 'https://api.lemonsqueezy.com/v1',\n  DEEPSEEK: 'https://api.deepseek.com/v1'\n} as const\n\nexport const OTP_CONFIG = {\n  EXPIRY_TIME: 600000, // 10 minutes\n  LENGTH: 6\n} as const\n\nexport const PLACEHOLDER_IMAGES = {\n  DESIGNER_AVATAR: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n  PROJECT_PREVIEW: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe'\n} as const\n```\n\n### 1.2 Migration Steps\n1. Create the constants file\n2. Find and replace one usage at a time\n3. Test each replacement\n4. Commit after each successful migration\n\n### 1.3 Validation Checklist\n- [ ] All cookie names match exactly\n- [ ] API endpoints return same responses\n- [ ] OTP still expires after 10 minutes\n- [ ] Images load correctly\n\n## Phase 2: API Response Utilities (Day 2)\n**Risk Level**: Low\n**Files Affected**: 36 API routes\n**Testing Required**: API endpoint testing\n\n### 2.1 Create Response Utilities\n```typescript\n// @/lib/api/responses.ts\nimport { NextResponse } from 'next/server'\n\nexport const apiResponse = {\n  success: <T>(data: T, status = 200) => \n    NextResponse.json(data, { status }),\n  \n  error: (message: string, status = 400, details?: any) => \n    NextResponse.json({ error: message, ...(details && { details }) }, { status }),\n  \n  unauthorized: (message = 'Unauthorized') => \n    NextResponse.json({ error: message }, { status: 401 }),\n  \n  notFound: (resource = 'Resource') => \n    NextResponse.json({ error: `${resource} not found` }, { status: 404 })\n}\n```\n\n### 2.2 Migration Example\n```typescript\n// Before:\nreturn NextResponse.json({ error: 'Invalid request' }, { status: 400 })\n\n// After:\nreturn apiResponse.error('Invalid request', 400)\n```\n\n### 2.3 Testing Protocol\n1. Test one endpoint completely\n2. Compare response format before/after\n3. Verify status codes match\n4. Check error handling paths\n\n## Phase 3: Authentication Session Handlers (Day 3-4)\n**Risk Level**: Medium\n**Files Affected**: 15+ auth endpoints\n**Testing Required**: Full auth flow testing\n\n### 3.1 Create Session Handlers\n```typescript\n// @/lib/auth/session-handlers.ts\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/service-role'\nimport { AUTH_COOKIES } from '@/lib/constants'\n\nexport interface SessionData {\n  email: string\n  userId: string\n  userType: 'client' | 'designer' | 'admin'\n}\n\nexport async function getSession(type: keyof typeof AUTH_COOKIES): Promise<SessionData | null> {\n  const cookieStore = cookies()\n  const sessionCookie = cookieStore.get(AUTH_COOKIES[type])\n  \n  if (!sessionCookie) return null\n  \n  try {\n    const session = JSON.parse(sessionCookie.value)\n    // Validate session structure\n    if (!session.email || !session.userId) return null\n    return session\n  } catch {\n    return null\n  }\n}\n\nexport async function createSession(\n  type: keyof typeof AUTH_COOKIES, \n  data: SessionData\n): Promise<void> {\n  const cookieStore = cookies()\n  cookieStore.set(AUTH_COOKIES[type], JSON.stringify(data), {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7 // 7 days\n  })\n}\n```\n\n### 3.2 Testing Checklist\n- [ ] Login flow works for all user types\n- [ ] Session persistence across requests\n- [ ] Logout properly clears session\n- [ ] Invalid sessions are rejected\n- [ ] Cookie settings match production requirements\n\n## Phase 4: Database Service Layer (Day 5-6)\n**Risk Level**: Medium\n**Files Affected**: 37+ files\n**Testing Required**: Database query testing\n\n### 4.1 Create Database Services\n```typescript\n// @/lib/database/base.ts\nimport { createServiceClient } from '@/lib/supabase/service-role'\n\nexport abstract class DatabaseService {\n  protected supabase = createServiceClient()\n  \n  protected handleError(error: any, operation: string) {\n    console.error(`Database error in ${operation}:`, error)\n    throw new Error(`Failed to ${operation}`)\n  }\n}\n\n// @/lib/database/designer-service.ts\nexport class DesignerService extends DatabaseService {\n  async getDesignerProfile(designerId: string) {\n    const { data, error } = await this.supabase\n      .from('designers')\n      .select(`\n        *,\n        designer_project_types (project_type),\n        designer_industries (industry),\n        designer_styles (style)\n      `)\n      .eq('id', designerId)\n      .single()\n    \n    if (error) this.handleError(error, 'get designer profile')\n    return data\n  }\n}\n\n// Export singleton instance\nexport const designerService = new DesignerService()\n```\n\n### 4.2 Migration Strategy\n1. Create service for one domain (e.g., designers)\n2. Test with read operations first\n3. Migrate write operations after validation\n4. Monitor for performance changes\n\n## Phase 5: Email Template System (Day 7)\n**Risk Level**: Low\n**Files Affected**: 4 email templates\n**Testing Required**: Email rendering tests\n\n### 5.1 Create Base Template\n```typescript\n// @/lib/email/template-base.ts\nexport interface EmailTemplateProps {\n  title: string\n  preheader: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n  }\n}\n\nexport function createEmailTemplate(props: EmailTemplateProps): string {\n  // Shared HTML structure\n  return `<!DOCTYPE html>\n    <html>\n      <head>\n        <title>${props.title}</title>\n        <!-- Common styles -->\n      </head>\n      <body>\n        ${props.content.greeting ? `<h1>${props.content.greeting}</h1>` : ''}\n        <p>${props.content.mainText}</p>\n        ${props.content.ctaButton ? `\n          <a href=\"${props.content.ctaButton.href}\">\n            ${props.content.ctaButton.text}\n          </a>\n        ` : ''}\n      </body>\n    </html>`\n}\n```\n\n### 5.2 Validation Steps\n1. Compare rendered HTML before/after\n2. Test email delivery\n3. Verify all dynamic content appears correctly\n4. Check responsive design\n\n## Implementation Timeline\n- **Week 1**: Phases 1-3 (Constants, API responses, Auth)\n- **Week 2**: Phases 4-5 (Database, Email)\n- **Week 3**: Testing & Documentation\n- **Week 4**: Cleanup & Training\n\n## Rollback Plan\nFor each phase:\n1. Keep original code commented\n2. Tag git commits for easy rollback\n3. Document any configuration changes\n4. Test rollback procedure\n\n## Success Metrics\n- ‚úÖ Zero user-reported issues\n- ‚úÖ No increase in error rates\n- ‚úÖ API response times unchanged\n- ‚úÖ All existing tests pass\n- ‚úÖ No visual regressions\n- ‚úÖ 40% reduction in code duplication\n\n## Important Safety Notes\n\n### Before Starting Any Centralization:\n1. **Create a feature branch**: `git checkout -b centralization-phase-1`\n2. **Run existing tests**: Ensure all current functionality works\n3. **Document current behavior**: Screenshot UI, save API responses\n4. **Set up monitoring**: Track error rates before changes\n5. **Have rollback plan ready**: Tag commits for easy revert\n\n### During Implementation:\n1. **Test after each file change**: Don't batch multiple changes\n2. **Keep old code commented**: Until migration is verified\n3. **Use feature flags**: For gradual rollout if needed\n4. **Monitor production**: Watch for any anomalies\n5. **Get peer review**: For each phase completion\n\n### After Each Phase:\n1. **Run full regression tests**: Manual and automated\n2. **Compare performance metrics**: Response times, bundle size\n3. **Check error logs**: Look for new exceptions\n4. **Validate user flows**: Test critical paths\n5. **Document changes**: Update technical documentation\n\n---\n\n## Centralization Complete!\n\nThis plan provides a safe, incremental approach to centralizing the OneDesigner codebase. By following the safety protocols and testing at each step, we can achieve significant code reduction and improved maintainability without risking the user experience or functionality."
    }
  ],
  "CENTRALIZATION_COMPLETE.md": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "# OneDesigner Centralization Architecture - COMPLETE! üéâ\n\n## Overview\nAll 5 phases of the centralization architecture have been successfully implemented and are working together in production! This represents a complete transformation of the OneDesigner codebase from scattered, duplicated logic to a centralized, maintainable, and scalable architecture.\n\n## üéØ All Phases Complete\n\n### ‚úÖ Phase 1: DataService (Database Operations)\n- **File**: `/src/lib/services/data-service.ts`\n- **Features**: Singleton pattern, query caching, transaction support, error handling\n- **Methods**: 25+ database operations with built-in validation and optimization\n- **Status**: **ACTIVE** ‚úÖ\n\n### ‚úÖ Phase 2: ErrorManager (Error Handling)\n- **File**: `/src/lib/core/error-manager.ts`\n- **Features**: Centralized error handling, error classification, monitoring integration\n- **Handlers**: Database, validation, authentication, API, and generic error handlers\n- **Status**: **ACTIVE** ‚úÖ\n\n### ‚úÖ Phase 3: RequestPipeline (Middleware Architecture)\n- **File**: `/src/lib/core/pipeline.ts`\n- **Features**: Middleware chain, authentication, rate limiting, CORS, logging\n- **Middlewares**: 8 pre-built middlewares with extensible architecture\n- **Status**: **ACTIVE** ‚úÖ\n\n### ‚úÖ Phase 4: ConfigManager (Configuration Centralization)\n- **File**: `/src/lib/core/config-manager.ts`\n- **Features**: Multi-source config loading, schema validation, sensitive data protection\n- **Configuration**: 50+ centralized configuration values with type safety\n- **Status**: **ACTIVE** ‚úÖ\n\n### ‚úÖ Phase 5: BusinessRules (Business Logic Consolidation)\n- **File**: `/src/lib/core/business-rules.ts`\n- **Features**: Credit management, matching rules, security validation, pricing calculations\n- **Rules**: 15+ business rule categories with comprehensive validation\n- **Status**: **ACTIVE** ‚úÖ\n\n## üöÄ Production Deployment\n\n### Current Environment Variables Required:\n```bash\n# Core App Configuration\nNEXT_PUBLIC_APP_URL=\"https://onedesigner.app\"\nNEXTAUTH_SECRET=\"898b848f7289de7aef74edccf4f9a0a899ca6f125a048cb588ca388aa2db97c6\"\n\n# Feature Flags (All Active)\nUSE_NEW_DATA_SERVICE=true\nUSE_ERROR_MANAGER=true\nUSE_REQUEST_PIPELINE=true\nUSE_CONFIG_MANAGER=true\nUSE_BUSINESS_RULES=true\n\n# Database\nNEXT_PUBLIC_SUPABASE_URL=\"https://frwchtwxpnrlpzksupgm.supabase.co\"\nNEXT_PUBLIC_SUPABASE_ANON_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\nSUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n\n# API Keys\nDEEPSEEK_API_KEY=\"sk-7404080c428443b598ee8c76382afb39\"\nLEMONSQUEEZY_API_KEY=\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...\"\nRESEND_API_KEY=\"re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8\"\n\n# Security\nCRON_SECRET=\"20e0ddd37fc67741e38fdd0ed00c7f09c3e2264d385cd868f2a2ff22984882a8\"\n```\n\n### Deployment Commands:\n```bash\n# 1. Commit all changes\ngit add .\ngit commit -m \"Complete centralization architecture - All 5 phases active\"\n\n# 2. Push to GitHub\ngit push origin main\n\n# 3. Deploy to Vercel\nvercel --prod\n```\n\n## üéØ Architecture Benefits Achieved\n\n### 1. **40%+ Code Reduction**\n- Eliminated thousands of lines of duplicated code\n- Single source of truth for all core functionality\n- Reusable components across the entire application\n\n### 2. **Enhanced Maintainability**\n- Centralized business logic in BusinessRules class\n- Configuration-driven behavior via ConfigManager\n- Consistent error handling across all endpoints\n\n### 3. **Improved Performance**\n- Query caching in DataService reduces database load\n- Request pipeline optimizes middleware execution\n- Configuration caching eliminates redundant lookups\n\n### 4. **Better Security**\n- Centralized authentication and authorization\n- Consistent validation rules across all operations\n- Sensitive data protection and redaction\n\n### 5. **Production Readiness**\n- Feature flags allow safe rollout and rollback\n- Comprehensive error handling and monitoring\n- Type-safe operations with full TypeScript support\n\n## üìä Implementation Statistics\n\n- **Files Created**: 15 new core architecture files\n- **Files Modified**: 25+ existing files updated\n- **Code Reduction**: 40%+ decrease in total lines of code  \n- **Configuration Values**: 50+ centralized settings\n- **Business Rules**: 15+ rule categories implemented\n- **API Endpoints**: 5 new management endpoints added\n- **Test Scripts**: 5 comprehensive test suites created\n- **Feature Flags**: 12 feature toggles for safe deployment\n\n## üéØ Active Features in Production\n\n### DataService Features:\n- ‚úÖ Singleton database operations\n- ‚úÖ Query result caching (5-minute TTL)\n- ‚úÖ Transaction support with rollback\n- ‚úÖ Specialized error handling\n- ‚úÖ ConfigManager integration for settings\n\n### ErrorManager Features:\n- ‚úÖ Error classification (LOW, MEDIUM, HIGH, CRITICAL)\n- ‚úÖ Automatic error tracking and monitoring\n- ‚úÖ Context-aware error responses\n- ‚úÖ Sensitive data redaction in logs\n- ‚úÖ Integration with all API routes\n\n### RequestPipeline Features:\n- ‚úÖ Authentication middleware\n- ‚úÖ Rate limiting (configurable per endpoint)\n- ‚úÖ CORS handling\n- ‚úÖ Request/response logging\n- ‚úÖ Validation middleware\n- ‚úÖ Request context enhancement\n\n### ConfigManager Features:\n- ‚úÖ Multi-source configuration loading\n- ‚úÖ Schema validation and type checking\n- ‚úÖ Sensitive data protection\n- ‚úÖ Environment-based configuration\n- ‚úÖ Configuration change listeners\n- ‚úÖ API endpoints for management\n\n### BusinessRules Features:\n- ‚úÖ Credit package management and pricing\n- ‚úÖ Match scoring and validation rules\n- ‚úÖ Designer approval workflow rules  \n- ‚úÖ Security validation (OTP, sessions)\n- ‚úÖ Configuration-driven business logic\n- ‚úÖ Backward compatibility with existing code\n\n## üö¶ Testing & Validation\n\nAll phases have been thoroughly tested with comprehensive test suites:\n\n- **Phase 1 Tests**: Database operations, caching, transactions\n- **Phase 2 Tests**: Error handling, classification, monitoring\n- **Phase 3 Tests**: Request pipeline, middleware, authentication\n- **Phase 4 Tests**: Configuration loading, validation, schema\n- **Phase 5 Tests**: Business rules, validation, pricing calculations\n\n### Test Scripts Available:\n- `./test/test-data-service.sh` - DataService testing\n- `./test/test-error-manager.sh` - ErrorManager testing  \n- `./test/test-pipeline.sh` - RequestPipeline testing\n- `./test/test-config-manager.sh` - ConfigManager testing\n- `./test/test-business-rules.sh` - BusinessRules testing\n\n## üéØ Migration Strategy\n\nThe centralization was implemented with **zero breaking changes** using feature flags:\n\n1. **Gradual Rollout**: Each phase can be enabled/disabled independently\n2. **Backward Compatibility**: Legacy code continues working during migration\n3. **Safe Fallbacks**: Automatic fallback to legacy behavior if new system fails\n4. **Production Ready**: All phases tested and validated in development\n\n## üîß Management Endpoints\n\n### API Endpoints for Monitoring:\n- `GET /api/health` - System health with all phase status\n- `GET /api/config` - Configuration values and feature flags\n- `GET /api/business-rules` - Business rules testing and validation\n- `POST /api/config` - Configuration updates (development only)\n- `POST /api/business-rules` - Business rule validation testing\n\n## üéØ Next Steps for Enhancement\n\nWith the core centralization complete, future enhancements can be easily added:\n\n1. **Advanced Monitoring**: Add metrics collection and alerting\n2. **Caching Layer**: Implement Redis for distributed caching\n3. **Rate Limiting**: Enhanced rate limiting with different strategies\n4. **Audit Logging**: Comprehensive audit trail for all operations\n5. **API Versioning**: Version management for API endpoints\n\n## üéâ Success Metrics\n\n- ‚úÖ **Zero Downtime**: Implementation completed without service interruption\n- ‚úÖ **Zero Breaking Changes**: All existing functionality preserved\n- ‚úÖ **Full Test Coverage**: Comprehensive testing of all components\n- ‚úÖ **Production Deployment**: Successfully deployed to Vercel\n- ‚úÖ **Performance Improvement**: Faster response times due to caching\n- ‚úÖ **Code Quality**: Significant reduction in technical debt\n- ‚úÖ **Maintainability**: Much easier to maintain and extend\n\n## üéØ Conclusion\n\nThe OneDesigner centralization architecture is now **complete and production-ready**! This represents a major milestone in the application's evolution, transforming it from a scattered codebase to a well-architected, maintainable, and scalable system.\n\nAll 5 phases are active and working together seamlessly, providing:\n- **Centralized business logic** via BusinessRules\n- **Unified configuration management** via ConfigManager  \n- **Consistent error handling** via ErrorManager\n- **Optimized request processing** via RequestPipeline\n- **Efficient database operations** via DataService\n\nThe system is now ready for continued growth and enhancement with a solid architectural foundation! üöÄ"
    }
  ],
  "scripts/update-designer-images-v2.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js')\nrequire('dotenv').config({ path: '.env.local' })\n\n// Initialize Supabase client\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n)\n\n// Professional headshot-style avatar using UI Avatars\nfunction generateProfessionalAvatar(firstName, lastName) {\n  const initials = `${firstName.charAt(0)}${lastName.charAt(0)}`.toUpperCase()\n  const name = `${firstName}+${lastName}`\n  \n  // Generate consistent color based on name\n  const colors = [\n    '264653', '2a9d8f', 'e76f51', 'f4a261', 'e9c46a',\n    '457b9d', '1d3557', 'a8dadc', '06ffa5', 'ffbe0b',\n    '8338ec', 'fb5607', '3a86ff', 'ff006e', '6930c3'\n  ]\n  \n  const colorIndex = Math.abs(hashCode(`${firstName}${lastName}`)) % colors.length\n  const bgColor = colors[colorIndex]\n  \n  // UI Avatars generates nice initial-based avatars\n  return `https://ui-avatars.com/api/?name=${name}&size=400&background=${bgColor}&color=fff&bold=true&format=svg`\n}\n\n// Generate realistic portfolio images using various services\nfunction generateRealisticPortfolioImages(designerId, categories = [], styles = []) {\n  const images = []\n  \n  // Design-related search terms for better portfolio images\n  const designTerms = {\n    'Web & Mobile Design': ['web-design', 'app-interface', 'dashboard', 'website'],\n    'Branding & Logo Design': ['logo', 'brand-identity', 'branding', 'corporate-design'],\n    'Social Media Graphics': ['social-media', 'instagram-post', 'marketing', 'advertising'],\n    'Motion Graphics': ['animation', 'motion-design', '3d-render', 'video'],\n    'Photography & Video': ['photography', 'photoshoot', 'camera', 'studio'],\n    'Presentations': ['presentation', 'slides', 'keynote', 'powerpoint']\n  }\n  \n  // Map designer categories to search terms\n  let searchTerms = []\n  categories.forEach(cat => {\n    if (designTerms[cat]) {\n      searchTerms = [...searchTerms, ...designTerms[cat]]\n    }\n  })\n  \n  // Add style-based terms\n  const styleTerms = {\n    'Minimalist': 'minimal-design',\n    'Modern': 'modern-design',\n    'Classic': 'classic-design',\n    'Bold': 'bold-design',\n    'Playful': 'colorful-design',\n    'Corporate': 'business-design',\n    'Elegant': 'elegant-design',\n    'Vintage': 'vintage-design',\n    'Futuristic': 'futuristic-design'\n  }\n  \n  styles.forEach(style => {\n    if (styleTerms[style]) {\n      searchTerms.push(styleTerms[style])\n    }\n  })\n  \n  // Default terms if none found\n  if (searchTerms.length === 0) {\n    searchTerms = ['design-portfolio', 'creative-work', 'graphic-design']\n  }\n  \n  // Generate 3 unique portfolio images\n  for (let i = 0; i < 3; i++) {\n    const term = searchTerms[i % searchTerms.length]\n    const seed = parseInt(designerId.replace(/-/g, '').substring(0, 8), 16) + i\n    \n    // Using Lorem Picsum with seed for consistency\n    const imageUrl = `https://picsum.photos/seed/${seed}/1200/900`\n    images.push(imageUrl)\n  }\n  \n  return images\n}\n\n// Generate profile picture using realistic avatar service\nfunction generateProfilePicture(designerId, firstName, lastName, gender = null) {\n  // Using randomuser.me style avatars (stored locally or using a service)\n  // For now, using a combination of services\n  \n  const seed = `${firstName}-${lastName}-${designerId}`.toLowerCase()\n  \n  // Options for realistic avatars:\n  // 1. Avataaars with more realistic settings\n  const avatarUrl = `https://api.dicebear.com/7.x/avataaars/svg?seed=${seed}&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf&backgroundType=gradientLinear`\n  \n  return avatarUrl\n}\n\n// Simple hash function for consistent selection\nfunction hashCode(str) {\n  let hash = 0\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = ((hash << 5) - hash) + char\n    hash = hash & hash\n  }\n  return hash\n}\n\nasync function updateDesignerImages() {\n  console.log('üé® Starting comprehensive designer image update...')\n  console.log('üì∏ This will add:')\n  console.log('   - Professional avatar pictures')\n  console.log('   - Profile pictures')\n  console.log('   - Portfolio images (3 per designer)')\n  console.log('')\n  \n  try {\n    // Fetch all designers with their details\n    const { data: designers, error: fetchError } = await supabase\n      .from('designers')\n      .select('*')\n      .order('created_at', { ascending: true })\n    \n    if (fetchError) {\n      console.error('‚ùå Error fetching designers:', fetchError)\n      return\n    }\n    \n    console.log(`üìä Found ${designers.length} designers to update`)\n    console.log('‚è≥ This will take approximately', Math.ceil(designers.length / 10), 'minutes..."
    }
  ],
  "scripts/update-all-designers-images.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 3,
      "context": "')\n    \n    let successCount = 0\n    let errorCount = 0\n    \n    // Process in batches\n    const batchSize = 10\n    for (let i = 0; i < designers.length; i += batchSize) {\n      const batch = designers.slice(i, Math.min(i + batchSize, designers.length))\n      \n      const updatePromises = batch.map(async (designer) => {\n        try {\n          const firstName = designer.first_name || 'Designer'\n          const lastName = designer.last_name || 'User'\n          \n          // Generate avatar URL with varied colors\n          const colorIndex = hashCode(`${firstName}${lastName}`) % colors.length\n          const bgColor = colors[colorIndex]\n          const avatarUrl = `https://ui-avatars.com/api/?name=${firstName}+${lastName}&size=400&background=${bgColor}&color=fff&bold=true&format=svg`\n          \n          // Generate unique portfolio images using designer ID as seed\n          const idNum = hashCode(designer.id)\n          const portfolio1 = `https://picsum.photos/seed/${idNum}/1200/900`\n          const portfolio2 = `https://picsum.photos/seed/${idNum + 1000}/1200/900`\n          const portfolio3 = `https://picsum.photos/seed/${idNum + 2000}/1200/900`\n          \n          // Prepare update data - only include fields that exist\n          const updateData = {\n            avatar_url: avatarUrl,\n            updated_at: new Date().toISOString()\n          }\n          \n          // Try to add portfolio images if columns exist\n          try {\n            const fullUpdateData = {\n              ...updateData,\n              portfolio_image_1: portfolio1,\n              portfolio_image_2: portfolio2,\n              portfolio_image_3: portfolio3\n            }\n            \n            const { error: updateError } = await supabase\n              .from('designers')\n              .update(fullUpdateData)\n              .eq('id', designer.id)\n            \n            if (updateError) {\n              // If portfolio columns don't exist, try with just avatar\n              if (updateError.message.includes('portfolio_image')) {\n                const { error: avatarOnlyError } = await supabase\n                  .from('designers')\n                  .update(updateData)\n                  .eq('id', designer.id)\n                \n                if (avatarOnlyError) {\n                  throw avatarOnlyError\n                }\n              } else {\n                throw updateError\n              }\n            }\n          } catch (err) {\n            // Fallback: just update avatar\n            const { error: avatarError } = await supabase\n              .from('designers')\n              .update(updateData)\n              .eq('id', designer.id)\n            \n            if (avatarError) {\n              throw avatarError\n            }\n          }\n          \n          successCount++\n          const progress = Math.round((successCount / designers.length) * 100)\n          \n          // Show progress every 10 designers\n          if (successCount % 10 === 0 || successCount === designers.length) {\n            console.log(`‚úÖ Progress: ${progress}% (${successCount}/${designers.length}) - Latest: ${firstName} ${lastName}`)\n          }\n          \n        } catch (err) {\n          console.error(`‚ùå Failed: ${designer.first_name} ${designer.last_name} - ${err.message}`)\n          errorCount++\n        }\n      })\n      \n      // Wait for batch\n      await Promise.all(updatePromises)\n      \n      // Small delay between batches\n      if (i + batchSize < designers.length) {\n        await new Promise(resolve => setTimeout(resolve, 500))\n      }\n    }\n    \n    // Summary\n    console.log('"
    },
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 5,
      "context": "üì∏ Sample image URLs generated:')\n    const sampleDesigner = designers[0]\n    if (sampleDesigner) {\n      const colorIndex = hashCode(`${sampleDesigner.first_name}${sampleDesigner.last_name}`) % colors.length\n      const bgColor = colors[colorIndex]\n      console.log(`Avatar: https://ui-avatars.com/api/?name=${sampleDesigner.first_name}+${sampleDesigner.last_name}&size=400&background=${bgColor}&color=fff&bold=true&format=svg`)\n      \n      const idNum = hashCode(sampleDesigner.id)\n      console.log(`Portfolio 1: https://picsum.photos/seed/${idNum}/1200/900`)\n      console.log(`Portfolio 2: https://picsum.photos/seed/${idNum + 1000}/1200/900`)\n      console.log(`Portfolio 3: https://picsum.photos/seed/${idNum + 2000}/1200/900`)\n    }\n    \n  } catch (error) {\n    console.error('üí• Fatal error:', error)\n  }\n}\n\n// Run\nconsole.log('üöÄ OneDesigner - Bulk Designer Image Update')\nconsole.log('============================================')\nconsole.log('This will update all designers with:')\nconsole.log('  ‚Ä¢ Avatar images (initials with varied colors)')\nconsole.log('  ‚Ä¢ Portfolio images (3 unique images per designer)')\nconsole.log('')\n\nupdateAllDesigners()\n  .then(() => {\n    console.log('"
    }
  ],
  "scripts/test-image-update.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 3,
      "context": "üé® Generating images for ${designer.first_name} ${designer.last_name}:`)\n      \n      // Avatar URL (initials)\n      const initials = `${designer.first_name.charAt(0)}${designer.last_name.charAt(0)}`.toUpperCase()\n      const avatarUrl = `https://ui-avatars.com/api/?name=${designer.first_name}+${designer.last_name}&size=400&background=f0ad4e&color=fff&bold=true`\n      console.log(`   ‚úì Avatar: ${avatarUrl}`)\n      \n      // Portfolio images\n      const seed1 = Math.abs(designer.id.charCodeAt(0) * 1000)\n      const seed2 = Math.abs(designer.id.charCodeAt(1) * 1000) \n      const seed3 = Math.abs(designer.id.charCodeAt(2) * 1000)\n      \n      const portfolio1 = `https://picsum.photos/seed/${seed1}/1200/900`\n      const portfolio2 = `https://picsum.photos/seed/${seed2}/1200/900`\n      const portfolio3 = `https://picsum.photos/seed/${seed3}/1200/900`\n      \n      console.log(`   ‚úì Portfolio 1: ${portfolio1}`)\n      console.log(`   ‚úì Portfolio 2: ${portfolio2}`)\n      console.log(`   ‚úì Portfolio 3: ${portfolio3}`)\n      \n      // Update the designer\n      const { error: updateError } = await supabase\n        .from('designers')\n        .update({\n          avatar_url: avatarUrl,\n          portfolio_image_1: portfolio1,\n          portfolio_image_2: portfolio2,\n          portfolio_image_3: portfolio3,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', designer.id)\n      \n      if (updateError) {\n        console.error(`   ‚ùå Update failed:`, updateError.message)\n      } else {\n        console.log(`   ‚úÖ Successfully updated!`)\n      }\n    }\n    \n    console.log('"
    }
  ],
  "scripts/run-migration-via-api.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 5,
      "context": "‚ö†Ô∏è  Some statements need to be run manually in Supabase SQL editor:')\n    console.log('1. Go to https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql')\n    console.log('2. Copy the migration SQL from migrations/012_messaging_system.sql')\n    console.log('3. Run it in the SQL editor')\n  } else {\n    console.log('"
    }
  ],
  "scripts/cleanup-hardcoded-urls.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://www.onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.WWW",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://api.lemonsqueezy.com/v1",
      "replacement": "API_ENDPOINTS.LEMONSQUEEZY",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://api.deepseek.com/v1",
      "replacement": "API_ENDPOINTS.DEEPSEEK",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "https://images.unsplash.com/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    },
    {
      "pattern": "OneDesigner Support <support@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.SUPPORT",
      "line": 1,
      "context": "#!/usr/bin/env node\n\n/**\n * Script to find and optionally replace hardcoded URLs in test files\n * This helps identify remaining hardcoded values after centralization\n */\n\nconst fs = require('fs')\nconst path = require('path')\nconst { glob } = require('glob')\n\n// Common hardcoded URLs to find and their replacements\nconst URL_PATTERNS = {\n  // Production URLs\n  'https://onedesigner.app': 'PRODUCTION_URLS.APP.BASE',\n  'https://www.onedesigner.app': 'PRODUCTION_URLS.APP.WWW',\n  'http://localhost:3000': 'DEV_URLS.LOCAL.BASE',\n  'http://localhost:3001': 'DEV_URLS.LOCAL.ALT_PORT',\n  \n  // API URLs\n  'https://api.resend.com/emails': 'API_ENDPOINTS.RESEND',\n  'https://api.lemonsqueezy.com/v1': 'API_ENDPOINTS.LEMONSQUEEZY',\n  'https://api.deepseek.com/v1': 'API_ENDPOINTS.DEEPSEEK',\n  \n  // Vercel deployment patterns\n  'https://onedesigner2-': 'DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW',\n  \n  // External services\n  'https://supabase.com/dashboard/project/': 'EXTERNAL_URLS.SUPABASE.DASHBOARD',\n  'https://ui-avatars.com/api/': 'EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS',\n  'https://images.unsplash.com/': 'EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*',\n  \n  // Email senders\n  'Hala from OneDesigner <team@onedesigner.app>': 'EMAIL_URLS.SENDER.DEFAULT',\n  'OneDesigner <noreply@onedesigner.app>': 'EMAIL_URLS.SENDER.NOREPLY',\n  'OneDesigner Support <support@onedesigner.app>': 'EMAIL_URLS.SENDER.SUPPORT'\n}\n\n// File patterns to exclude from analysis\nconst EXCLUDE_PATTERNS = [\n  'node_modules/**',\n  '.git/**',\n  'dist/**',\n  'build/**',\n  '.next/**',\n  '**/*.log',\n  '**/package-lock.json',\n  '**/yarn.lock'\n]\n\nasync function findHardcodedUrls() {\n  console.log('üîç Scanning for hardcoded URLs..."
    }
  ],
  "scripts/apply-rejection-tracking.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 3,
      "context": "');\n        \n        console.log('üîß Please follow these steps:');\n        console.log('1. Go to https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new');\n        console.log('2. Copy and paste the SQL below');\n        console.log('3. Click \"Run\" to execute the migration"
    }
  ],
  "scripts/add-missing-columns.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 2,
      "context": "IMPORTANT: The columns need to be added manually via Supabase dashboard:');\n      console.log('1. Go to https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/editor');\n      console.log('2. Run this SQL:');\n      console.log(`\nALTER TABLE designers\nADD COLUMN IF NOT EXISTS project_types TEXT[] DEFAULT '{}',\nADD COLUMN IF NOT EXISTS specializations TEXT[] DEFAULT '{}',\nADD COLUMN IF NOT EXISTS software_skills TEXT[] DEFAULT '{}',\nADD COLUMN IF NOT EXISTS rejection_reason TEXT;\n      `);\n    } else {\n      console.log('Migration completed successfully!');\n    }\n    \n  } catch (error) {\n    console.error('Error running migration:', error);\n  }\n}\n\nrunMigration();"
    }
  ],
  "test/verify_update_columns.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 6,
      "context": "üîó Go to: https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new')\n        console.log('Copy and paste the SQL above, then run it.')\n      } else {\n        console.log('‚úÖ All required columns exist!')\n      }\n    } else {\n      console.log('‚úÖ All required columns exist!')\n      console.log('"
    }
  ],
  "test/verify_debug_deployment.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "');\n  \n  // The latest deployment URL\n  const deploymentUrl = 'https://onedesigner2-osn4ihgxy-onedesigners-projects.vercel.app';\n  \n  console.log('Latest deployment URL:', deploymentUrl);\n  console.log('');\n  \n  // Test a few different match IDs that might exist\n  const testMatchIds = [\n    'd4a262ed-7dff-47e0-92ba-7a3be2cd8236', // Muhammad Garcia\n    '68c1e6c3-face-437e-8740-eb7435394e66'  // From the console (Paul R.)\n  ];\n  \n  console.log('üß™ Test URLs to try:');\n  for (const matchId of testMatchIds) {\n    const testUrl = `${deploymentUrl}/client/match/${matchId}`;\n    console.log(`- ${testUrl}`);\n  }\n  \n  console.log('"
    }
  ],
  "test/verify_and_complete_designers.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 11,
      "context": "‚úÖ All 600 designers are present!');\n  }\n}\n\nasync function addMissingDesigners(count) {\n  const firstNames = ['Alex', 'Jordan', 'Taylor', 'Morgan', 'Casey', 'Riley', 'Jamie', 'Avery', 'Quinn', 'Sage'];\n  const lastNames = ['Cooper', 'Murphy', 'Rivera', 'Cook', 'Rogers', 'Morgan', 'Peterson', 'Reed', 'Bailey', 'Bell'];\n  const cities = ['Austin', 'Seattle', 'Denver', 'Portland', 'Miami', 'Boston', 'Atlanta', 'Nashville', 'Phoenix', 'Detroit'];\n  const countries = ['USA', 'USA', 'USA', 'USA', 'USA', 'USA', 'USA', 'USA', 'USA', 'USA'];\n  \n  const categories = ['Graphic Design', 'Web Design', 'UI/UX Design', 'Product Design', 'Motion Design', 'Interior Design'];\n  const designersToAdd = [];\n  \n  for (let i = 0; i < count; i++) {\n    const firstName = firstNames[i % firstNames.length] + i;\n    const lastName = lastNames[i % lastNames.length];\n    const category = categories[i % categories.length];\n    const yearsExp = Math.floor(Math.random() * 15) + 1;\n    \n    designersToAdd.push({\n      id: uuidv4(),\n      email: `${firstName.toLowerCase()}.${lastName.toLowerCase()}@designer.com`,\n      first_name: firstName,\n      last_name: lastName,\n      last_initial: lastName[0],\n      title: `${yearsExp > 10 ? 'Senior' : yearsExp > 5 ? 'Mid' : 'Junior'} ${category} Designer`,\n      city: cities[i % cities.length],\n      country: countries[i % countries.length],\n      years_experience: yearsExp,\n      rating: 4.5,\n      total_projects: Math.floor(Math.random() * 50) + 10,\n      avatar_url: `https://ui-avatars.com/api/?name=${firstName}+${lastName}&background=random`,\n      phone: `+1555${Math.floor(Math.random() * 9000000) + 1000000}`,\n      website_url: `https://portfolio.${firstName.toLowerCase()}.com`,\n      bio: `Experienced ${category} designer with ${yearsExp} years of expertise.`,\n      styles: ['Modern', 'Minimalist', 'Creative'],\n      industries: ['Technology', 'Finance', 'Healthcare'],\n      tools: ['Figma', 'Adobe Creative Suite', 'Sketch'],\n      hourly_rate: 50 + (yearsExp * 5),\n      availability: 'available',\n      response_time: '24 hours',\n      timezone: 'EST',\n      is_contactable: true,\n      hide_phone: false,\n      is_verified: true,\n      is_approved: true,\n      subscription_tier: 'free'\n    });\n  }\n  \n  // Insert in batches\n  const batchSize = 50;\n  for (let i = 0; i < designersToAdd.length; i += batchSize) {\n    const batch = designersToAdd.slice(i, i + batchSize);\n    const { error } = await supabase\n      .from('designers')\n      .insert(batch);\n    \n    if (error) {\n      console.error(`Error adding batch:`, error.message);\n    } else {\n      console.log(`‚úì Added batch of ${batch.length} designers`);\n    }\n  }\n  \n  // Verify final count\n  const { count: finalCount } = await supabase\n    .from('designers')\n    .select('*', { count: 'exact', head: true });\n  \n  console.log(`"
    }
  ],
  "test/test_real_match_avatar.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "')\n  \n  const deploymentUrl = 'https://onedesigner2-k2le3nk9f-onedesigners-projects.vercel.app'\n  \n  // Use real match IDs from the database\n  const realMatchIds = [\n    'd4a262ed-7dff-47e0-92ba-7a3be2cd8236', // Unlocked match\n    'f2bb6bc1-484f-474d-a527-ee0a143cccdf', // Unlocked match  \n    '4d53efaf-ac2f-4c36-8ee1-a269548cf8b7', // Unlocked match\n    'e24a1852-12bf-4abd-b0df-bd3455bf24cb'  // Unlocked match\n  ]\n  \n  console.log('‚úÖ **REAL MATCH URLs TO TEST:**')\n  realMatchIds.forEach((matchId, index) => {\n    const testUrl = `${deploymentUrl}/client/match/${matchId}`\n    console.log(`${index + 1}. ${testUrl}`)\n  })\n  console.log('')\n  \n  console.log('üîë **CLIENT LOGIN INFO:**')\n  console.log('- Email: osamah96@gmail.com')\n  console.log('- Client ID: 52cc18a2-8aaf-40c6-971a-4a4f876e1ff5')\n  console.log('- Credits: 1 match available')\n  console.log('')\n  \n  console.log('üö® **WHAT SHOULD HAPPEN NOW:**')\n  console.log('1. ‚úÖ No more \"Match Not Found\" error')\n  console.log('2. ‚úÖ Should redirect to /client/login if not authenticated')\n  console.log('3. ‚úÖ After login, should show the match page')\n  console.log('4. ‚úÖ Should see RED DEBUG BOX below avatar')\n  console.log('')\n  \n  console.log('üîç **DEBUG INFO TO LOOK FOR:**')\n  console.log('- Red debug box showing:')\n  console.log('  URL: [actual avatar URL or NULL]')\n  console.log('  Error: true/false')\n  console.log('  firstName: [actual designer name]')\n  console.log('')\n  \n  console.log('üéØ **RECOMMENDED TEST URL:**')\n  console.log(`üëâ ${deploymentUrl}/client/match/d4a262ed-7dff-47e0-92ba-7a3be2cd8236`)\n  console.log('')\n  console.log('This match is UNLOCKED so you should see:')\n  console.log('- Designer full name (not blurred)')\n  console.log('- Contact information visible')\n  console.log('- Portfolio images (not blurred)')\n  console.log('- RED DEBUG BOX showing avatar URL')\n}\n\ntestRealMatchAvatar().catch(console.error)"
    }
  ],
  "test/test_production_domain.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 2,
      "context": "')\n  \n  // Try the actual production domain instead of preview URLs\n  const productionUrls = [\n    'https://onedesigner.app',\n    'https://www.onedesigner.app',\n    'https://onedesigner2.vercel.app'\n  ]\n  \n  const matchId = 'd4a262ed-7dff-47e0-92ba-7a3be2cd8236'\n  \n  for (const baseUrl of productionUrls) {\n    console.log(`üß™ Testing: ${baseUrl}`)\n    \n    try {\n      // Test homepage first\n      const homeResponse = await fetch(baseUrl)\n      console.log(`   Homepage: ${homeResponse.status} ${homeResponse.statusText}`)\n      \n      if (homeResponse.status === 200) {\n        // Test the match page\n        const matchUrl = `${baseUrl}/client/match/${matchId}`\n        console.log(`   Match URL: ${matchUrl}`)\n        \n        // Test API endpoint\n        const apiUrl = `${baseUrl}/api/client/matches/${matchId}`\n        const apiResponse = await fetch(apiUrl)\n        console.log(`   API Status: ${apiResponse.status} ${apiResponse.statusText}`)\n        \n        if (apiResponse.status === 401) {\n          console.log('   ‚úÖ API working (401 = needs auth, which is expected)')\n        }\n        \n        console.log(`   üëâ **TRY THIS URL: ${matchUrl}**`)\n      }\n    } catch (error) {\n      console.log(`   ‚ùå Error: ${error.message}`)\n    }\n    \n    console.log('')\n  }\n  \n  console.log('üéØ **RECOMMENDED APPROACH:**')\n  console.log('1. Try the production URLs above instead of preview URLs')\n  console.log('2. Production domains should not have Vercel auth protection')\n  console.log('3. Look for a URL that gives 401 (auth needed) not \"Authentication Required\" page')\n}\n\ntestProductionDomain().catch(console.error)"
    },
    {
      "pattern": "https://www.onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.WWW",
      "line": 2,
      "context": "')\n  \n  // Try the actual production domain instead of preview URLs\n  const productionUrls = [\n    'https://onedesigner.app',\n    'https://www.onedesigner.app',\n    'https://onedesigner2.vercel.app'\n  ]\n  \n  const matchId = 'd4a262ed-7dff-47e0-92ba-7a3be2cd8236'\n  \n  for (const baseUrl of productionUrls) {\n    console.log(`üß™ Testing: ${baseUrl}`)\n    \n    try {\n      // Test homepage first\n      const homeResponse = await fetch(baseUrl)\n      console.log(`   Homepage: ${homeResponse.status} ${homeResponse.statusText}`)\n      \n      if (homeResponse.status === 200) {\n        // Test the match page\n        const matchUrl = `${baseUrl}/client/match/${matchId}`\n        console.log(`   Match URL: ${matchUrl}`)\n        \n        // Test API endpoint\n        const apiUrl = `${baseUrl}/api/client/matches/${matchId}`\n        const apiResponse = await fetch(apiUrl)\n        console.log(`   API Status: ${apiResponse.status} ${apiResponse.statusText}`)\n        \n        if (apiResponse.status === 401) {\n          console.log('   ‚úÖ API working (401 = needs auth, which is expected)')\n        }\n        \n        console.log(`   üëâ **TRY THIS URL: ${matchUrl}**`)\n      }\n    } catch (error) {\n      console.log(`   ‚ùå Error: ${error.message}`)\n    }\n    \n    console.log('')\n  }\n  \n  console.log('üéØ **RECOMMENDED APPROACH:**')\n  console.log('1. Try the production URLs above instead of preview URLs')\n  console.log('2. Production domains should not have Vercel auth protection')\n  console.log('3. Look for a URL that gives 401 (auth needed) not \"Authentication Required\" page')\n}\n\ntestProductionDomain().catch(console.error)"
    }
  ],
  "test/test_production_api.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "');\n  \n  // Test the production API endpoint\n  const matchId = 'd4a262ed-7dff-47e0-92ba-7a3be2cd8236';\n  const apiUrl = `https://onedesigner2-j6wdtxcor-onedesigners-projects.vercel.app/api/client/matches/${matchId}`;\n  \n  console.log('Testing URL:', apiUrl);\n  \n  try {\n    const response = await fetch(apiUrl);\n    console.log('Response Status:', response.status, response.statusText);\n    console.log('Response Headers:', Object.fromEntries(response.headers.entries()));\n    \n    if (response.ok) {\n      const data = await response.json();\n      console.log('"
    }
  ],
  "test/test_image_fix.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "');\n  \n  // Get a match to test with\n  const { data: matches, error } = await supabase\n    .from('matches')\n    .select(`\n      id,\n      designer:designers!matches_designer_id_fkey(\n        id,\n        first_name,\n        last_name,\n        avatar_url\n      )\n    `)\n    .limit(1);\n  \n  if (error || !matches || matches.length === 0) {\n    console.error('‚ùå No matches found for testing');\n    return;\n  }\n  \n  const match = matches[0];\n  const matchId = match.id;\n  const designer = match.designer;\n  \n  console.log('‚úÖ Testing with:');\n  console.log(`   Match ID: ${matchId}`);\n  console.log(`   Designer: ${designer.first_name} ${designer.last_name}`);\n  console.log(`   Avatar URL: ${designer.avatar_url}`);\n  console.log('');\n  \n  // Test the production URL\n  const testUrl = `https://onedesigner2-fs7dfx199-onedesigners-projects.vercel.app/client/match/${matchId}`;\n  console.log('üåê Test URL for manual verification:');\n  console.log(testUrl);\n  console.log('');\n  \n  console.log('üîç Expected behavior:');\n  console.log('1. Avatar should display as a circular image, not initials');\n  console.log('2. Portfolio images should display as actual images, not placeholders');\n  console.log('3. Avatar should be blurred if match is not unlocked');\n  console.log('4. Designer name should show full name if unlocked, partial if locked');\n  console.log('');\n  \n  // Test avatar URL accessibility\n  try {\n    const response = await fetch(designer.avatar_url);\n    if (response.ok) {\n      console.log('‚úÖ Avatar URL is accessible');\n    } else {\n      console.log(`‚ùå Avatar URL returned ${response.status}`);\n    }\n  } catch (error) {\n    console.log(`‚ùå Avatar URL failed: ${error.message}`);\n  }\n  \n  console.log('"
    }
  ],
  "test/test_fixed_auth_redirect.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "');\n  \n  // The latest deployment URL with fixed auth redirect\n  const deploymentUrl = 'https://onedesigner2-k2le3nk9f-onedesigners-projects.vercel.app';\n  \n  console.log('‚úÖ Fixed deployment URL:', deploymentUrl);\n  console.log('');\n  \n  // Test URLs that should now work with proper redirect\n  const testUrls = [\n    `${deploymentUrl}/client/match/68c1e6c3-face-437e-8740-eb7435394e66`,\n    `${deploymentUrl}/client/match/d4a262ed-7dff-47e0-92ba-7a3be2cd8236`\n  ];\n  \n  console.log('üß™ **TEST THESE URLs:**');\n  testUrls.forEach(url => {\n    console.log(`- ${url}`);\n  });\n  console.log('');\n  \n  console.log('üö® **WHAT SHOULD HAPPEN NOW:**');\n  console.log('1. ‚úÖ Should redirect to /client/login (not 404)');\n  console.log('2. ‚úÖ Login page should load properly');\n  console.log('3. ‚úÖ After login, should redirect back to match page');\n  console.log('4. ‚úÖ Should see debug info in red box below avatar');\n  console.log('');\n  \n  console.log('üîç **DEBUG INFO TO LOOK FOR:**');\n  console.log('- Red debug box below avatar showing:');\n  console.log('  - URL: [actual avatar URL or NULL]');\n  console.log('  - Error: true/false');\n  console.log('  - firstName: [actual name or NULL]');\n  console.log('');\n  \n  console.log('üéØ **NEXT STEPS:**');\n  console.log('1. Open one of the test URLs above');\n  console.log('2. Login with client credentials'); \n  console.log('3. Check if you see the red debug box');\n  console.log('4. Take screenshot of what the avatar shows');\n  console.log('');\n\n  console.log('üì± **CLIENT LOGIN CREDENTIALS:**');\n  console.log('- Use existing client account or signup');\n  console.log('- Should work with OTP verification');\n}\n\ntestFixedAuthRedirect().catch(console.error);"
    }
  ],
  "test/test_direct_db_endpoint.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 2,
      "context": "')\n  \n  const testUrl = 'https://onedesigner.app/api/test-direct-db'\n  \n  console.log('üåê Testing URL:', testUrl)\n  console.log('')\n  \n  try {\n    const response = await fetch(testUrl, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    \n    console.log('üìä Response status:', response.status)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log('üìä Response data:')\n      console.log(JSON.stringify(data, null, 2))\n      \n      if (data.success && data.debug) {\n        console.log('')\n        console.log('‚úÖ **AVATAR DEBUG INFO FOUND!**')\n        console.log('- Designer Name:', data.debug.designerName)\n        console.log('- Avatar URL:', data.debug.avatarUrl)\n        console.log('- Avatar Accessible:', data.debug.avatarAccessible)\n        console.log('- Database Working:', data.debug.databaseConnectionWorking)\n        console.log('')\n        \n        if (data.debug.avatarUrl && data.debug.avatarAccessible) {\n          console.log('üéØ **ROOT CAUSE IDENTIFIED:**')\n          console.log('‚úÖ Database has correct avatar URL')\n          console.log('‚úÖ Avatar URL is accessible (returns 200)')\n          console.log('‚ùå The issue is in the frontend component logic')\n          console.log('')\n          \n          console.log('üîç **THE ACTUAL AVATAR URL TO TEST:**')\n          console.log(data.debug.avatarUrl)\n        }\n      }\n    } else {\n      const errorText = await response.text()\n      console.log('‚ùå Response error:')\n      console.log(errorText)\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Network error:', error.message)\n  }\n}\n\ntestDirectDbEndpoint().catch(console.error)"
    }
  ],
  "test/test_deployment_api.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 2,
      "context": "')\n  \n  const testUrl = 'https://onedesigner.app/api/test-match'\n  \n  console.log('üåê Testing URL:', testUrl)\n  console.log('')\n  \n  try {\n    const response = await fetch(testUrl, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    \n    console.log('üìä Response status:', response.status)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log('üìä Response data:')\n      console.log(JSON.stringify(data, null, 2))\n      \n      if (data.success && data.debug) {\n        console.log('')\n        console.log('‚úÖ **AVATAR DEBUG INFO:**')\n        console.log('- Designer Name:', data.debug.designerName)\n        console.log('- Avatar URL:', data.debug.avatarUrl)\n        console.log('- Portfolio Count:', data.debug.portfolioCount)\n        console.log('- Portfolio URLs:', data.debug.portfolioImages)\n      }\n    } else {\n      const errorText = await response.text()\n      console.log('‚ùå Response error:')\n      console.log(errorText)\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Network error:', error.message)\n  }\n  \n  console.log('')\n  console.log('üéØ **WHAT THIS TELLS US:**')\n  console.log('- If this API works, the database access is fine')\n  console.log('- If avatarUrl is NULL, that\\'s why images don\\'t load')\n  console.log('- If avatarUrl has a value, the issue is in the frontend')\n}\n\ntestDeploymentApi().catch(console.error)"
    }
  ],
  "test/test_api_route_deployment.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "')\n  \n  const baseUrl = 'https://onedesigner2-k2le3nk9f-onedesigners-projects.vercel.app'\n  const matchId = 'd4a262ed-7dff-47e0-92ba-7a3be2cd8236'\n  const apiUrl = `${baseUrl}/api/client/matches/${matchId}`\n  \n  console.log('üåê Testing API URL:', apiUrl)\n  console.log('')\n  \n  try {\n    console.log('üì° Making direct API request...')\n    \n    const response = await fetch(apiUrl, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    \n    console.log('üìä Response status:', response.status)\n    console.log('üìä Response headers:', Object.fromEntries(response.headers.entries()))\n    \n    const responseText = await response.text()\n    console.log('üìä Response body:', responseText.substring(0, 500) + (responseText.length > 500 ? '...' : ''))\n    \n    if (response.status === 404) {\n      console.log('')\n      console.log('‚ùå **API ROUTE NOT FOUND - POSSIBLE ISSUES:**')\n      console.log('1. Route file not properly deployed to Vercel')\n      console.log('2. File structure issue in deployment')\n      console.log('3. Next.js dynamic route not working')\n      console.log('4. Build/deployment error')\n    }\n    \n    if (response.status === 401) {\n      console.log('')\n      console.log('üîê **AUTHENTICATION ISSUE:**')\n      console.log('1. Need to be logged in as client')\n      console.log('2. Missing or invalid session cookie')\n      console.log('3. This is actually expected without login')\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Network error:', error.message)\n  }\n  \n  console.log('')\n  console.log('üîç **NEXT DEBUGGING STEPS:**')\n  console.log('1. Check Vercel deployment logs')\n  console.log('2. Check if all API routes are properly built')\n  console.log('3. Test with authentication cookies')\n  console.log('4. Try a simpler API route first')\n  \n  // Test a simpler API route\n  console.log('')\n  console.log('üß™ **Testing simpler API route:**')\n  const healthUrl = `${baseUrl}/api/health`\n  console.log('Testing:', healthUrl)\n  \n  try {\n    const healthResponse = await fetch(healthUrl)\n    console.log('Health API status:', healthResponse.status)\n    const healthText = await healthResponse.text()\n    console.log('Health API response:', healthText.substring(0, 200))\n  } catch (error) {\n    console.error('Health API error:', error.message)\n  }\n}\n\ntestApiRouteDeployment().catch(console.error)"
    }
  ],
  "test/test-unified-otp-emails.js": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 2,
      "context": "üìß Testing ${type} OTP email to: ${email}`);\n  console.log(`   Endpoint: ${endpoint}`);\n  \n  try {\n    const response = await fetch(`http://localhost:3000${endpoint}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        email,\n        ...additionalData\n      })\n    });\n\n    const data = await response.json();\n    \n    if (response.ok) {\n      console.log(`   ‚úÖ ${type} OTP request successful`);\n      console.log(`   Response:`, data);\n      \n      // Check if OTP was stored in database\n      const { data: otpData, error } = await supabase\n        .from('auth_tokens')\n        .select('*')\n        .eq('email', email)\n        .eq('type', 'otp')\n        .order('created_at', { ascending: false })\n        .limit(1)\n        .single();\n        \n      if (otpData) {\n        console.log(`   üìç OTP stored in database:`, otpData.token);\n        console.log(`   ‚è∞ Expires at:`, new Date(otpData.expires_at).toLocaleString());\n      }\n    } else {\n      console.log(`   ‚ùå ${type} OTP request failed:`, data.error || data.message);\n    }\n  } catch (error) {\n    console.log(`   ‚ùå Error testing ${type} OTP:`, error.message);\n  }\n}\n\nasync function cleanupTestOTPs() {\n  console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 6,
      "context": "üîß Testing centralized email service directly...');\n  try {\n    const response = await fetch('http://localhost:3000/api/test-email-service', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        type: 'otp',\n        to: 'test-centralized@example.com',\n        code: '123456',\n        userType: 'admin',\n        purpose: 'login'\n      })\n    });\n\n    const data = await response.json();\n    if (response.ok) {\n      console.log('   ‚úÖ Centralized email service test successful');\n    } else {\n      console.log('   ‚ùå Centralized email service test failed:', data.error);\n    }\n  } catch (error) {\n    console.log('   ‚ùå Error testing centralized service:', error.message);\n  }\n\n  // Clean up test data\n  await cleanupTestOTPs();\n\n  console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 10,
      "context": "');\n}\n\n// Check if running locally\nasync function checkLocalServer() {\n  try {\n    const response = await fetch('http://localhost:3000/api/health');\n    return response.ok;\n  } catch {\n    return false;\n  }\n}\n\n// Main execution\nasync function main() {\n  const isLocal = await checkLocalServer();\n  \n  if (!isLocal) {\n    console.log('‚ùå Local server not running!');\n    console.log('   Please start the development server first:');\n    console.log('   npm run dev');\n    process.exit(1);\n  }\n\n  await testAllOTPEmails();\n}\n\nmain().catch(console.error);"
    }
  ],
  "test/test-match-with-api.js": [
    {
      "pattern": "https://api.deepseek.com/v1",
      "replacement": "API_ENDPOINTS.DEEPSEEK",
      "line": 3,
      "context": "');\n    \n    // Create simplified prompt using only real fields\n    const prompt = `\n==== DESIGNER-CLIENT MATCH ANALYSIS ====\n\nAnalyze if this designer is a perfect match for this client's project.\nScore from 0-100.\n\n==== CLIENT PROJECT ====\n- Project Type: ${brief.project_type}\n- Industry: ${brief.industry}\n- Budget: ${brief.budget}\n- Timeline: ${brief.timeline}\n- Design Styles: ${brief.styles?.join(', ') || 'Not specified'}\n- Company: ${brief.company_name || 'Not specified'}\n- Requirements: ${brief.requirements || 'Not specified'}\n\n==== DESIGNER PROFILE ====\n- Name: ${designer.first_name} ${designer.last_name}\n- Title: ${designer.title || 'Not specified'}\n- Experience: ${designer.years_experience || 'Not specified'} years\n- Location: ${designer.city}, ${designer.country}\n- Availability: ${designer.availability || 'Not specified'}\n\nBIO & EXPERTISE:\n${designer.bio || 'No bio provided'}\n\n==== ANALYSIS REQUIRED ====\n\nEvaluate the match and provide response in JSON format:\n{\n  \"matchScore\": [0-100],\n  \"isRecommended\": [true/false],\n  \"confidence\": [\"high\", \"medium\", \"low\"],\n  \"specificEvidence\": [\"reason1\", \"reason2\", \"reason3\"],\n  \"matchDecision\": \"Brief explanation of decision\",\n  \"potentialConcerns\": [\"concern1\"] or [],\n  \"keyDistinction\": \"What makes this designer unique for this project\"\n}\n\nBe realistic with scoring - most matches should be 60-85.`;\n\n    try {\n      const response = await fetch('https://api.deepseek.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`\n        },\n        body: JSON.stringify({\n          model: 'deepseek-chat',\n          messages: [\n            {\n              role: 'system',\n              content: 'You are a matchmaking AI. Analyze designer-client matches and respond with JSON only.'\n            },\n            {\n              role: 'user',\n              content: prompt\n            }\n          ],\n          temperature: 0.2,\n          max_tokens: 500\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        \n        console.log('‚úÖ AI Response received"
    }
  ],
  "test/test-fallback-removal.js": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js');\n\n// Initialize Supabase client\nconst supabase = createClient(\n  'https://frwchtwxpnrlpzksupgm.supabase.co',\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n);\n\n// Test configuration\nconst API_URL = process.env.API_URL || 'http://localhost:3000';\n\nconsole.log('üß™ Testing Fallback Removal and Error Handling"
    }
  ],
  "test/test-email-sender-names.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 3,
      "context": "üìß Test 2: Designer Approval Email')\n    const approvalResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-approved',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          dashboardUrl: 'https://onedesigner.app/designer/dashboard'\n        }\n      })\n    })\n    \n    const lastApprovalCall = mockResendCalls[mockResendCalls.length - 1]\n    const approvalSenderMatch = lastApprovalCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Approval',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastApprovalCall?.from || 'No email sent',\n      passed: approvalSenderMatch\n    })\n    \n    // Test 3: Designer Rejection Email\n    console.log('"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 5,
      "context": "üìß Test 4: Welcome Email')\n    const welcomeResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'welcome',\n        to: testEmail,\n        variables: {\n          name: 'Test User',\n          dashboardUrl: 'https://onedesigner.app/dashboard'\n        }\n      })\n    })\n    \n    const lastWelcomeCall = mockResendCalls[mockResendCalls.length - 1]\n    const welcomeSenderMatch = lastWelcomeCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Welcome Email',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastWelcomeCall?.from || 'No email sent',\n      passed: welcomeSenderMatch\n    })\n    \n    // Test 5: Project Request Email\n    console.log('"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 6,
      "context": "üìß Test 5: Project Request Email')\n    const projectRequestResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-request',\n        to: testEmail,\n        variables: {\n          designerName: 'Test Designer',\n          projectType: 'Logo Design',\n          budget: '$1000-$5000',\n          timeline: '2 weeks',\n          requestUrl: 'https://onedesigner.app/designer/requests'\n        }\n      })\n    })\n    \n    const lastProjectCall = mockResendCalls[mockResendCalls.length - 1]\n    const projectSenderMatch = lastProjectCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Project Request',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastProjectCall?.from || 'No email sent',\n      passed: projectSenderMatch\n    })\n    \n  } catch (error) {\n    console.error('‚ùå Test error:', error)\n  }\n  \n  // Print results summary\n  console.log('"
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 2,
      "context": "üìß Test 1: OTP Email')\n    const otpResponse = await fetch('http://localhost:3001/api/auth/send-otp', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        email: testEmail,\n        type: 'client',\n        purpose: 'login'\n      })\n    })\n    \n    const lastOTPCall = mockResendCalls[mockResendCalls.length - 1]\n    const otpSenderMatch = lastOTPCall?.from === 'OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'OTP Email',\n      expected: 'OneDesigner <noreply@onedesigner.app>',\n      actual: lastOTPCall?.from || 'No email sent',\n      passed: otpSenderMatch\n    })\n    \n    // Test 2: Designer Approval Email\n    console.log('"
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 3,
      "context": "üìß Test 2: Designer Approval Email')\n    const approvalResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-approved',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          dashboardUrl: 'https://onedesigner.app/designer/dashboard'\n        }\n      })\n    })\n    \n    const lastApprovalCall = mockResendCalls[mockResendCalls.length - 1]\n    const approvalSenderMatch = lastApprovalCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Approval',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastApprovalCall?.from || 'No email sent',\n      passed: approvalSenderMatch\n    })\n    \n    // Test 3: Designer Rejection Email\n    console.log('"
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 4,
      "context": "üìß Test 3: Designer Rejection Email')\n    const rejectionResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-rejected',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          reason: 'Portfolio needs improvement'\n        }\n      })\n    })\n    \n    const lastRejectionCall = mockResendCalls[mockResendCalls.length - 1]\n    const rejectionSenderMatch = lastRejectionCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Rejection',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastRejectionCall?.from || 'No email sent',\n      passed: rejectionSenderMatch\n    })\n    \n    // Test 4: Welcome Email\n    console.log('"
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 5,
      "context": "üìß Test 4: Welcome Email')\n    const welcomeResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'welcome',\n        to: testEmail,\n        variables: {\n          name: 'Test User',\n          dashboardUrl: 'https://onedesigner.app/dashboard'\n        }\n      })\n    })\n    \n    const lastWelcomeCall = mockResendCalls[mockResendCalls.length - 1]\n    const welcomeSenderMatch = lastWelcomeCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Welcome Email',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastWelcomeCall?.from || 'No email sent',\n      passed: welcomeSenderMatch\n    })\n    \n    // Test 5: Project Request Email\n    console.log('"
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 6,
      "context": "üìß Test 5: Project Request Email')\n    const projectRequestResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-request',\n        to: testEmail,\n        variables: {\n          designerName: 'Test Designer',\n          projectType: 'Logo Design',\n          budget: '$1000-$5000',\n          timeline: '2 weeks',\n          requestUrl: 'https://onedesigner.app/designer/requests'\n        }\n      })\n    })\n    \n    const lastProjectCall = mockResendCalls[mockResendCalls.length - 1]\n    const projectSenderMatch = lastProjectCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Project Request',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastProjectCall?.from || 'No email sent',\n      passed: projectSenderMatch\n    })\n    \n  } catch (error) {\n    console.error('‚ùå Test error:', error)\n  }\n  \n  // Print results summary\n  console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 1,
      "context": "/**\n * Test script to verify email sender names are configured correctly\n * \n * Expected behavior:\n * - OTP emails: \"OneDesigner <noreply@onedesigner.app>\"\n * - All other emails: \"Hala from OneDesigner <noreply@onedesigner.app>\"\n */\n\nconst { createClient } = require('@supabase/supabase-js')\n\nconst supabase = createClient(\n  'https://frwchtwxpnrlpzksupgm.supabase.co',\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n)\n\n// Mock Resend API to capture the sender names without actually sending emails\nconst mockResendCalls = []\n\n// Override fetch to capture Resend API calls\nconst originalFetch = global.fetch\nglobal.fetch = async function(url, options) {\n  if (url && url.includes('resend.com')) {\n    const body = JSON.parse(options.body)\n    mockResendCalls.push({\n      from: body.from,\n      subject: body.subject,\n      to: body.to\n    })\n    // Return mock successful response\n    return {\n      ok: true,\n      json: async () => ({ id: 'mock-email-id', object: 'email' })\n    }\n  }\n  return originalFetch(url, options)\n}\n\nasync function testEmailSenderNames() {\n  console.log('üß™ Testing Email Sender Names Configuration')\n  console.log('=' .repeat(60))\n  \n  const testEmail = 'test@example.com'\n  const results = []\n  \n  try {\n    // Test 1: OTP Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 1,
      "context": "/**\n * Test script to verify email sender names are configured correctly\n * \n * Expected behavior:\n * - OTP emails: \"OneDesigner <noreply@onedesigner.app>\"\n * - All other emails: \"Hala from OneDesigner <noreply@onedesigner.app>\"\n */\n\nconst { createClient } = require('@supabase/supabase-js')\n\nconst supabase = createClient(\n  'https://frwchtwxpnrlpzksupgm.supabase.co',\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n)\n\n// Mock Resend API to capture the sender names without actually sending emails\nconst mockResendCalls = []\n\n// Override fetch to capture Resend API calls\nconst originalFetch = global.fetch\nglobal.fetch = async function(url, options) {\n  if (url && url.includes('resend.com')) {\n    const body = JSON.parse(options.body)\n    mockResendCalls.push({\n      from: body.from,\n      subject: body.subject,\n      to: body.to\n    })\n    // Return mock successful response\n    return {\n      ok: true,\n      json: async () => ({ id: 'mock-email-id', object: 'email' })\n    }\n  }\n  return originalFetch(url, options)\n}\n\nasync function testEmailSenderNames() {\n  console.log('üß™ Testing Email Sender Names Configuration')\n  console.log('=' .repeat(60))\n  \n  const testEmail = 'test@example.com'\n  const results = []\n  \n  try {\n    // Test 1: OTP Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 2,
      "context": "üìß Test 1: OTP Email')\n    const otpResponse = await fetch('http://localhost:3001/api/auth/send-otp', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        email: testEmail,\n        type: 'client',\n        purpose: 'login'\n      })\n    })\n    \n    const lastOTPCall = mockResendCalls[mockResendCalls.length - 1]\n    const otpSenderMatch = lastOTPCall?.from === 'OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'OTP Email',\n      expected: 'OneDesigner <noreply@onedesigner.app>',\n      actual: lastOTPCall?.from || 'No email sent',\n      passed: otpSenderMatch\n    })\n    \n    // Test 2: Designer Approval Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 2,
      "context": "üìß Test 1: OTP Email')\n    const otpResponse = await fetch('http://localhost:3001/api/auth/send-otp', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        email: testEmail,\n        type: 'client',\n        purpose: 'login'\n      })\n    })\n    \n    const lastOTPCall = mockResendCalls[mockResendCalls.length - 1]\n    const otpSenderMatch = lastOTPCall?.from === 'OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'OTP Email',\n      expected: 'OneDesigner <noreply@onedesigner.app>',\n      actual: lastOTPCall?.from || 'No email sent',\n      passed: otpSenderMatch\n    })\n    \n    // Test 2: Designer Approval Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 3,
      "context": "üìß Test 2: Designer Approval Email')\n    const approvalResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-approved',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          dashboardUrl: 'https://onedesigner.app/designer/dashboard'\n        }\n      })\n    })\n    \n    const lastApprovalCall = mockResendCalls[mockResendCalls.length - 1]\n    const approvalSenderMatch = lastApprovalCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Approval',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastApprovalCall?.from || 'No email sent',\n      passed: approvalSenderMatch\n    })\n    \n    // Test 3: Designer Rejection Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 3,
      "context": "üìß Test 2: Designer Approval Email')\n    const approvalResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-approved',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          dashboardUrl: 'https://onedesigner.app/designer/dashboard'\n        }\n      })\n    })\n    \n    const lastApprovalCall = mockResendCalls[mockResendCalls.length - 1]\n    const approvalSenderMatch = lastApprovalCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Approval',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastApprovalCall?.from || 'No email sent',\n      passed: approvalSenderMatch\n    })\n    \n    // Test 3: Designer Rejection Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 4,
      "context": "üìß Test 3: Designer Rejection Email')\n    const rejectionResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-rejected',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          reason: 'Portfolio needs improvement'\n        }\n      })\n    })\n    \n    const lastRejectionCall = mockResendCalls[mockResendCalls.length - 1]\n    const rejectionSenderMatch = lastRejectionCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Rejection',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastRejectionCall?.from || 'No email sent',\n      passed: rejectionSenderMatch\n    })\n    \n    // Test 4: Welcome Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 4,
      "context": "üìß Test 3: Designer Rejection Email')\n    const rejectionResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-rejected',\n        to: testEmail,\n        variables: {\n          name: 'Test Designer',\n          reason: 'Portfolio needs improvement'\n        }\n      })\n    })\n    \n    const lastRejectionCall = mockResendCalls[mockResendCalls.length - 1]\n    const rejectionSenderMatch = lastRejectionCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Designer Rejection',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastRejectionCall?.from || 'No email sent',\n      passed: rejectionSenderMatch\n    })\n    \n    // Test 4: Welcome Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 5,
      "context": "üìß Test 4: Welcome Email')\n    const welcomeResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'welcome',\n        to: testEmail,\n        variables: {\n          name: 'Test User',\n          dashboardUrl: 'https://onedesigner.app/dashboard'\n        }\n      })\n    })\n    \n    const lastWelcomeCall = mockResendCalls[mockResendCalls.length - 1]\n    const welcomeSenderMatch = lastWelcomeCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Welcome Email',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastWelcomeCall?.from || 'No email sent',\n      passed: welcomeSenderMatch\n    })\n    \n    // Test 5: Project Request Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 5,
      "context": "üìß Test 4: Welcome Email')\n    const welcomeResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'welcome',\n        to: testEmail,\n        variables: {\n          name: 'Test User',\n          dashboardUrl: 'https://onedesigner.app/dashboard'\n        }\n      })\n    })\n    \n    const lastWelcomeCall = mockResendCalls[mockResendCalls.length - 1]\n    const welcomeSenderMatch = lastWelcomeCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Welcome Email',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastWelcomeCall?.from || 'No email sent',\n      passed: welcomeSenderMatch\n    })\n    \n    // Test 5: Project Request Email\n    console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 6,
      "context": "üìß Test 5: Project Request Email')\n    const projectRequestResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-request',\n        to: testEmail,\n        variables: {\n          designerName: 'Test Designer',\n          projectType: 'Logo Design',\n          budget: '$1000-$5000',\n          timeline: '2 weeks',\n          requestUrl: 'https://onedesigner.app/designer/requests'\n        }\n      })\n    })\n    \n    const lastProjectCall = mockResendCalls[mockResendCalls.length - 1]\n    const projectSenderMatch = lastProjectCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Project Request',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastProjectCall?.from || 'No email sent',\n      passed: projectSenderMatch\n    })\n    \n  } catch (error) {\n    console.error('‚ùå Test error:', error)\n  }\n  \n  // Print results summary\n  console.log('"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 6,
      "context": "üìß Test 5: Project Request Email')\n    const projectRequestResponse = await fetch('http://localhost:3001/api/test-email-service', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        template: 'designer-request',\n        to: testEmail,\n        variables: {\n          designerName: 'Test Designer',\n          projectType: 'Logo Design',\n          budget: '$1000-$5000',\n          timeline: '2 weeks',\n          requestUrl: 'https://onedesigner.app/designer/requests'\n        }\n      })\n    })\n    \n    const lastProjectCall = mockResendCalls[mockResendCalls.length - 1]\n    const projectSenderMatch = lastProjectCall?.from === 'Hala from OneDesigner <noreply@onedesigner.app>'\n    \n    results.push({\n      test: 'Project Request',\n      expected: 'Hala from OneDesigner <noreply@onedesigner.app>',\n      actual: lastProjectCall?.from || 'No email sent',\n      passed: projectSenderMatch\n    })\n    \n  } catch (error) {\n    console.error('‚ùå Test error:', error)\n  }\n  \n  // Print results summary\n  console.log('"
    }
  ],
  "test/test-designer-form.js": [
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js')\n\nconst supabase = createClient(\n  'https://frwchtwxpnrlpzksupgm.supabase.co',\n  process.env.SUPABASE_SERVICE_ROLE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyd2NodHd4cG5ybHB6a3N1cGdtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDQxNjM1OCwiZXhwIjoyMDY5OTkyMzU4fQ.etecMSfQ317vkouRXaMX3Jqg669kf5KL4pE08V03TV8'\n)\n\nasync function testForm() {\n  // Test the complete flow\n  const testEmail = `testdesigner-${Date.now()}@example.com`\n  \n  console.log('Testing designer form with email:', testEmail)\n  \n  // 1. Simulate form submission\n  const formData = {\n    firstName: 'John',\n    lastName: 'Doe',\n    email: testEmail,\n    phone: '+1234567890',\n    profilePicture: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n    title: 'Senior UX Designer',\n    portfolioUrl: 'https://johndoe.com',\n    dribbbleUrl: 'https://dribbble.com/johndoe',\n    behanceUrl: null,\n    linkedinUrl: 'https://linkedin.com/in/johndoe',\n    country: 'United States',\n    city: 'New York',\n    availability: 'immediate',\n    bio: 'I am a passionate UX designer with over 5 years of experience creating beautiful and functional digital experiences. My expertise spans across mobile and web applications, with a focus on user-centered design principles. I have worked with startups and Fortune 500 companies alike, helping them transform their digital presence. My design philosophy centers around simplicity, accessibility, and creating delightful user experiences that drive business results. I specialize in design systems, prototyping, and user research.',\n    portfolioImages: []\n  }\n  \n  // 2. Submit to API endpoint\n  const response = await fetch('http://localhost:3001/api/designer/apply', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      // Simulate authenticated session\n      'Cookie': 'next-auth.session-token=test-token'\n    },\n    body: JSON.stringify(formData)\n  })\n  \n  const result = await response.json()\n  console.log('API Response:', response.status, result)\n  \n  // 3. Check if designer was created in database\n  const { data: designer, error } = await supabase\n    .from('designers')\n    .select('*')\n    .eq('email', testEmail)\n    .single()\n    \n  if (error) {\n    console.error('Failed to find designer in database:', error)\n  } else {\n    console.log('Designer created successfully:', {\n      id: designer.id,\n      name: `${designer.first_name} ${designer.last_name}`,\n      email: designer.email,\n      is_approved: designer.is_approved,\n      portfolio_url: designer.portfolio_url\n    })\n    \n    // Clean up test data\n    const { error: deleteError } = await supabase\n      .from('designers')\n      .delete()\n      .eq('id', designer.id)\n      \n    if (!deleteError) {\n      console.log('Test data cleaned up')\n    }\n  }\n}\n\ntestForm().catch(console.error)"
    }
  ],
  "test/test-centralized-matching.js": [
    {
      "pattern": "https://api.deepseek.com/v1",
      "replacement": "API_ENDPOINTS.DEEPSEEK",
      "line": 6,
      "context": "ü§ñ Testing with DeepSeek AI...');\n    \n    try {\n      const response = await fetch('https://api.deepseek.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`\n        },\n        body: JSON.stringify({\n          model: 'deepseek-chat',\n          messages: [\n            {\n              role: 'system',\n              content: 'You are a matchmaking AI. Analyze designer-client matches and respond with JSON only.'\n            },\n            {\n              role: 'user',\n              content: prompt\n            }\n          ],\n          temperature: 0.2,\n          max_tokens: 500\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        \n        console.log('"
    }
  ],
  "test/test-approval-rejection-emails.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 3,
      "context": "üìß APPROVAL EMAIL PREVIEW:');\nconsole.log('-'.repeat(60));\n\nconst approvalEmail = createDesignerApprovalEmailMarcStyle({\n  designerName: 'John',\n  dashboardUrl: 'https://onedesigner.app/designer/login'\n});\n\nconsole.log('Subject:', approvalEmail.subject);\nconsole.log('"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 7,
      "context": "üìß REJECTION EMAIL PREVIEW:');\nconsole.log('-'.repeat(60));\n\nconst rejectionEmail = createDesignerRejectionEmailMarcStyle({\n  designerName: 'Sarah',\n  rejectionReason: 'Your portfolio needs more variety. We need to see at least 5 different projects showcasing different design styles and industries.',\n  updateApplicationUrl: 'https://onedesigner.app/designer/update-application?token=abc123'\n});\n\nconsole.log('Subject:', rejectionEmail.subject);\nconsole.log('"
    }
  ],
  "test/simple_blog_setup.js": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 6,
      "context": "üìã Next steps:');\n    console.log('1. Visit http://localhost:3000/blog to see the public blog');\n    console.log('2. Visit http://localhost:3000/blog/admin to manage posts');\n    console.log('3. Add this environment variable:');\n    console.log('   DEEPSEEK_BLOG_API_KEY=sk-7f77c4bfc9f14f2a9cf66aaa7a4fe925');\n    console.log('"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 6,
      "context": "üìã Next steps:');\n    console.log('1. Visit http://localhost:3000/blog to see the public blog');\n    console.log('2. Visit http://localhost:3000/blog/admin to manage posts');\n    console.log('3. Add this environment variable:');\n    console.log('   DEEPSEEK_BLOG_API_KEY=sk-7f77c4bfc9f14f2a9cf66aaa7a4fe925');\n    console.log('"
    }
  ],
  "test/send_test_rejection_email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendTestRejectionEmail() {\n  console.log('üìß Sending test rejection email to designbattlefield@gmail.com...')\n  \n  try {\n    // First, create a test designer record with an update token\n    const testToken = 'test-token-' + Date.now()\n    const tokenExpiry = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n    \n    // Check if test designer exists\n    const { data: existingDesigner, error: checkError } = await supabase\n      .from('designers')\n      .select('id')\n      .eq('email', 'designbattlefield@gmail.com')\n      .single()\n    \n    let designerId\n    \n    if (existingDesigner) {\n      // Update existing designer with test token\n      const { data: updatedDesigner, error: updateError } = await supabase\n        .from('designers')\n        .update({\n          update_token: testToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: 'Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.',\n          is_approved: false\n        })\n        .eq('id', existingDesigner.id)\n        .select('id')\n        .single()\n      \n      if (updateError) {\n        console.error('‚ùå Failed to update designer:', updateError)\n        return\n      }\n      \n      designerId = updatedDesigner.id\n      console.log('‚úÖ Updated existing test designer with update token')\n    } else {\n      // Create a new test designer\n      const { data: newDesigner, error: createError } = await supabase\n        .from('designers')\n        .insert({\n          email: 'designbattlefield@gmail.com',\n          first_name: 'Test',\n          last_name: 'Designer',\n          last_initial: 'D',\n          title: 'UI/UX Designer',\n          city: 'Test City',\n          country: 'Test Country',\n          years_experience: '5-7 years',\n          update_token: testToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: 'Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.',\n          is_approved: false,\n          is_verified: true\n        })\n        .select('id')\n        .single()\n      \n      if (createError) {\n        console.error('‚ùå Failed to create test designer:', createError)\n        return\n      }\n      \n      designerId = newDesigner.id\n      console.log('‚úÖ Created test designer with update token')\n    }\n    \n    // Now send the rejection email using Resend API directly\n    const baseUrl = 'https://onedesigner.app'\n    const updateApplicationUrl = `${baseUrl}/designer/update-application?token=${testToken}`\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear Test,</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    const emailText = `Application Update Required\n\nDear Test,\n\nThank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.\n\nFeedback from our team:\nPlease update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.\n\nWe believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.\n\nUpdate Your Application: ${updateApplicationUrl}\n\nThis update link will expire in 7 days. If you need more time or have any questions, please contact our support team.\n\nBest regards,\nThe OneDesigner Team\n\n¬© 2025 OneDesigner. All rights reserved.\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner',\n        html: emailHtml,\n        text: emailText\n      })\n    })\n    \n    const result = await response.json()\n    \n    if (response.ok) {\n      console.log('‚úÖ Test rejection email sent successfully!')\n      console.log('üìß Check designbattlefield@gmail.com inbox')\n      console.log('üîó Update URL in email:', updateApplicationUrl)\n      console.log('üìù Response:', result)\n    } else {\n      console.error('‚ùå Failed to send email:', result)\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Failed to send test email:', error)\n  }\n}\n\nsendTestRejectionEmail()"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendTestRejectionEmail() {\n  console.log('üìß Sending test rejection email to designbattlefield@gmail.com...')\n  \n  try {\n    // First, create a test designer record with an update token\n    const testToken = 'test-token-' + Date.now()\n    const tokenExpiry = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n    \n    // Check if test designer exists\n    const { data: existingDesigner, error: checkError } = await supabase\n      .from('designers')\n      .select('id')\n      .eq('email', 'designbattlefield@gmail.com')\n      .single()\n    \n    let designerId\n    \n    if (existingDesigner) {\n      // Update existing designer with test token\n      const { data: updatedDesigner, error: updateError } = await supabase\n        .from('designers')\n        .update({\n          update_token: testToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: 'Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.',\n          is_approved: false\n        })\n        .eq('id', existingDesigner.id)\n        .select('id')\n        .single()\n      \n      if (updateError) {\n        console.error('‚ùå Failed to update designer:', updateError)\n        return\n      }\n      \n      designerId = updatedDesigner.id\n      console.log('‚úÖ Updated existing test designer with update token')\n    } else {\n      // Create a new test designer\n      const { data: newDesigner, error: createError } = await supabase\n        .from('designers')\n        .insert({\n          email: 'designbattlefield@gmail.com',\n          first_name: 'Test',\n          last_name: 'Designer',\n          last_initial: 'D',\n          title: 'UI/UX Designer',\n          city: 'Test City',\n          country: 'Test Country',\n          years_experience: '5-7 years',\n          update_token: testToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: 'Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.',\n          is_approved: false,\n          is_verified: true\n        })\n        .select('id')\n        .single()\n      \n      if (createError) {\n        console.error('‚ùå Failed to create test designer:', createError)\n        return\n      }\n      \n      designerId = newDesigner.id\n      console.log('‚úÖ Created test designer with update token')\n    }\n    \n    // Now send the rejection email using Resend API directly\n    const baseUrl = 'https://onedesigner.app'\n    const updateApplicationUrl = `${baseUrl}/designer/update-application?token=${testToken}`\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear Test,</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    const emailText = `Application Update Required\n\nDear Test,\n\nThank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.\n\nFeedback from our team:\nPlease update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.\n\nWe believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.\n\nUpdate Your Application: ${updateApplicationUrl}\n\nThis update link will expire in 7 days. If you need more time or have any questions, please contact our support team.\n\nBest regards,\nThe OneDesigner Team\n\n¬© 2025 OneDesigner. All rights reserved.\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner',\n        html: emailHtml,\n        text: emailText\n      })\n    })\n    \n    const result = await response.json()\n    \n    if (response.ok) {\n      console.log('‚úÖ Test rejection email sent successfully!')\n      console.log('üìß Check designbattlefield@gmail.com inbox')\n      console.log('üîó Update URL in email:', updateApplicationUrl)\n      console.log('üìù Response:', result)\n    } else {\n      console.error('‚ùå Failed to send email:', result)\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Failed to send test email:', error)\n  }\n}\n\nsendTestRejectionEmail()"
    }
  ],
  "test/send_rejection_email_direct.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "// Send rejection email directly using Resend API\nasync function sendRejectionEmail() {\n  console.log('üìß Sending test rejection email to designbattlefield@gmail.com...')\n  \n  try {\n    // Generate test URLs\n    const testToken = 'test-token-' + Date.now()\n    const baseUrl = 'https://onedesigner.app'\n    const updateApplicationUrl = `${baseUrl}/designer/update-application?token=${testToken}`\n    \n    // Email HTML template\n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear Designer,</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Email text version\n    const emailText = `Application Update Required\n\nDear Designer,\n\nThank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.\n\nFeedback from our team:\nPlease update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.\n\nWe believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.\n\nUpdate Your Application: ${updateApplicationUrl}\n\nThis update link will expire in 7 days. If you need more time or have any questions, please contact our support team.\n\nBest regards,\nThe OneDesigner Team\n\n¬© 2025 OneDesigner. All rights reserved.`\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner',\n        html: emailHtml,\n        text: emailText\n      })\n    })\n    \n    const result = await response.json()\n    \n    if (response.ok) {\n      console.log('‚úÖ Test rejection email sent successfully!')\n      console.log('üìß Check designbattlefield@gmail.com inbox')\n      console.log('üîó Update URL in email:', updateApplicationUrl)\n      console.log('üìù Response:', result)\n      console.log('"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "// Send rejection email directly using Resend API\nasync function sendRejectionEmail() {\n  console.log('üìß Sending test rejection email to designbattlefield@gmail.com...')\n  \n  try {\n    // Generate test URLs\n    const testToken = 'test-token-' + Date.now()\n    const baseUrl = 'https://onedesigner.app'\n    const updateApplicationUrl = `${baseUrl}/designer/update-application?token=${testToken}`\n    \n    // Email HTML template\n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear Designer,</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Email text version\n    const emailText = `Application Update Required\n\nDear Designer,\n\nThank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.\n\nFeedback from our team:\nPlease update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.\n\nWe believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.\n\nUpdate Your Application: ${updateApplicationUrl}\n\nThis update link will expire in 7 days. If you need more time or have any questions, please contact our support team.\n\nBest regards,\nThe OneDesigner Team\n\n¬© 2025 OneDesigner. All rights reserved.`\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner',\n        html: emailHtml,\n        text: emailText\n      })\n    })\n    \n    const result = await response.json()\n    \n    if (response.ok) {\n      console.log('‚úÖ Test rejection email sent successfully!')\n      console.log('üìß Check designbattlefield@gmail.com inbox')\n      console.log('üîó Update URL in email:', updateApplicationUrl)\n      console.log('üìù Response:', result)\n      console.log('"
    }
  ],
  "test/send_production_email.js": [
    {
      "pattern": "https://www.onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.WWW",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendProductionEmail() {\n  console.log('üìß Sending rejection email with correct production domain...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    \n    // Get the existing designer's token\n    const { data: designer, error: findError } = await supabase\n      .from('designers')\n      .select('update_token, rejection_reason, first_name')\n      .eq('email', testEmail)\n      .single()\n    \n    if (findError || !designer || !designer.update_token) {\n      console.error('‚ùå Designer not found or no update token:', findError)\n      return\n    }\n    \n    // Use www.onedesigner.app since that's where the API actually works\n    const updateApplicationUrl = `https://www.onedesigner.app/designer/update-application?token=${designer.update_token}`\n    \n    console.log('üîó Using correct production URL:', updateApplicationUrl)\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear ${designer.first_name || 'Designer'},</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${designer.rejection_reason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner (FINAL WORKING LINK)',\n        html: emailHtml,\n        text: `Application Update Required"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendProductionEmail() {\n  console.log('üìß Sending rejection email with correct production domain...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    \n    // Get the existing designer's token\n    const { data: designer, error: findError } = await supabase\n      .from('designers')\n      .select('update_token, rejection_reason, first_name')\n      .eq('email', testEmail)\n      .single()\n    \n    if (findError || !designer || !designer.update_token) {\n      console.error('‚ùå Designer not found or no update token:', findError)\n      return\n    }\n    \n    // Use www.onedesigner.app since that's where the API actually works\n    const updateApplicationUrl = `https://www.onedesigner.app/designer/update-application?token=${designer.update_token}`\n    \n    console.log('üîó Using correct production URL:', updateApplicationUrl)\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear ${designer.first_name || 'Designer'},</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${designer.rejection_reason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner (FINAL WORKING LINK)',\n        html: emailHtml,\n        text: `Application Update Required"
    }
  ],
  "test/send_final_working_email.js": [
    {
      "pattern": "https://www.onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.WWW",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendFinalWorkingEmail() {\n  console.log('üìß Sending final working rejection email...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    \n    // Get the existing designer's token\n    const { data: designer, error: findError } = await supabase\n      .from('designers')\n      .select('update_token, rejection_reason, first_name')\n      .eq('email', testEmail)\n      .single()\n    \n    if (findError || !designer || !designer.update_token) {\n      console.error('‚ùå Designer not found or no update token:', findError)\n      return\n    }\n    \n    // Use the working www.onedesigner.app domain\n    const updateApplicationUrl = `https://www.onedesigner.app/designer/update-application?token=${designer.update_token}`\n    \n    console.log('üîó Using working production URL:', updateApplicationUrl)\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear ${designer.first_name || 'Designer'},</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${designer.rejection_reason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: '‚úÖ Application Update Required - OneDesigner (FINAL WORKING VERSION)',\n        html: emailHtml,\n        text: `Application Update Required"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendFinalWorkingEmail() {\n  console.log('üìß Sending final working rejection email...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    \n    // Get the existing designer's token\n    const { data: designer, error: findError } = await supabase\n      .from('designers')\n      .select('update_token, rejection_reason, first_name')\n      .eq('email', testEmail)\n      .single()\n    \n    if (findError || !designer || !designer.update_token) {\n      console.error('‚ùå Designer not found or no update token:', findError)\n      return\n    }\n    \n    // Use the working www.onedesigner.app domain\n    const updateApplicationUrl = `https://www.onedesigner.app/designer/update-application?token=${designer.update_token}`\n    \n    console.log('üîó Using working production URL:', updateApplicationUrl)\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear ${designer.first_name || 'Designer'},</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${designer.rejection_reason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: '‚úÖ Application Update Required - OneDesigner (FINAL WORKING VERSION)',\n        html: emailHtml,\n        text: `Application Update Required"
    }
  ],
  "test/send_final_rejection_email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\nimport crypto from 'crypto'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendFinalRejectionEmail() {\n  console.log('üìß Sending final rejection email with production domain...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    \n    // Get the existing designer's token\n    const { data: designer, error: findError } = await supabase\n      .from('designers')\n      .select('update_token, rejection_reason, first_name')\n      .eq('email', testEmail)\n      .single()\n    \n    if (findError || !designer || !designer.update_token) {\n      console.error('‚ùå Designer not found or no update token:', findError)\n      return\n    }\n    \n    const updateApplicationUrl = `https://onedesigner.app/designer/update-application?token=${designer.update_token}`\n    \n    console.log('üîó Using production URL:', updateApplicationUrl)\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear ${designer.first_name || 'Designer'},</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${designer.rejection_reason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API with click tracking disabled\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner (Production URL)',\n        html: emailHtml,\n        text: `Application Update Required"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\nimport crypto from 'crypto'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function sendFinalRejectionEmail() {\n  console.log('üìß Sending final rejection email with production domain...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    \n    // Get the existing designer's token\n    const { data: designer, error: findError } = await supabase\n      .from('designers')\n      .select('update_token, rejection_reason, first_name')\n      .eq('email', testEmail)\n      .single()\n    \n    if (findError || !designer || !designer.update_token) {\n      console.error('‚ùå Designer not found or no update token:', findError)\n      return\n    }\n    \n    const updateApplicationUrl = `https://onedesigner.app/designer/update-application?token=${designer.update_token}`\n    \n    console.log('üîó Using production URL:', updateApplicationUrl)\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear ${designer.first_name || 'Designer'},</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${designer.rejection_reason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API with click tracking disabled\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner (Production URL)',\n        html: emailHtml,\n        text: `Application Update Required"
    }
  ],
  "test/send-marc-lou-style-test-email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 2,
      "context": "üì® Attempting direct Resend API call...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Create a simple test version\n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <span style=\"display: inline-block; width: 32px; height: 32px; background: #f0ad4e; border-radius: 50%; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <span style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 18px; color: white;\">üå∏</span>\n                </span>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n                <br><br>\n                Here's what happens next:\n                <br><br>\n                <strong>1.</strong> Tell us about your project (2 min max)<br>\n                <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers<br>\n                <strong>3.</strong> Get your <span style=\"background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600;\">perfect match</span> in 0.3 seconds\n                <br><br>\n                No endless scrolling. No awkward interviews. No wondering if they're actually good.\n                <br><br>\n                Just your ideal designer, ready to start.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, ready to skip the portfolio hunt? (Emoji logo test!)',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    console.log('Response status:', response.status)\n    console.log('Response:', responseText)\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 2,
      "context": "üì® Attempting direct Resend API call...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Create a simple test version\n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <span style=\"display: inline-block; width: 32px; height: 32px; background: #f0ad4e; border-radius: 50%; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <span style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 18px; color: white;\">üå∏</span>\n                </span>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n                <br><br>\n                Here's what happens next:\n                <br><br>\n                <strong>1.</strong> Tell us about your project (2 min max)<br>\n                <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers<br>\n                <strong>3.</strong> Get your <span style=\"background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600;\">perfect match</span> in 0.3 seconds\n                <br><br>\n                No endless scrolling. No awkward interviews. No wondering if they're actually good.\n                <br><br>\n                Just your ideal designer, ready to start.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, ready to skip the portfolio hunt? (Emoji logo test!)',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    console.log('Response status:', response.status)\n    console.log('Response:', responseText)\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 2,
      "context": "üì® Attempting direct Resend API call...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Create a simple test version\n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <span style=\"display: inline-block; width: 32px; height: 32px; background: #f0ad4e; border-radius: 50%; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <span style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 18px; color: white;\">üå∏</span>\n                </span>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n                <br><br>\n                Here's what happens next:\n                <br><br>\n                <strong>1.</strong> Tell us about your project (2 min max)<br>\n                <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers<br>\n                <strong>3.</strong> Get your <span style=\"background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600;\">perfect match</span> in 0.3 seconds\n                <br><br>\n                No endless scrolling. No awkward interviews. No wondering if they're actually good.\n                <br><br>\n                Just your ideal designer, ready to start.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, ready to skip the portfolio hunt? (Emoji logo test!)',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    console.log('Response status:', response.status)\n    console.log('Response:', responseText)\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('"
    }
  ],
  "test/send-html-logo-test-email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Test email with HTML/CSS created logo (Gmail compatible)\n */\n\nasync function sendHTMLLogoTestEmail() {\n  console.log('üì® Sending HTML/CSS logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <!-- HTML/CSS Logo recreating the 4-petal shape -->\n                <div style=\"display: inline-block; width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <!-- Create 4-petal flower with CSS transforms -->\n                    <div style=\"position: absolute; width: 18px; height: 24px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 0px; left: 7px; transform-origin: center bottom; transform: rotate(0deg);\"></div>\n                    <div style=\"position: absolute; width: 24px; height: 18px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 7px; right: 0px; transform-origin: left center; transform: rotate(90deg);\"></div>\n                    <div style=\"position: absolute; width: 18px; height: 24px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; bottom: 0px; left: 7px; transform-origin: center top; transform: rotate(180deg);\"></div>\n                    <div style=\"position: absolute; width: 24px; height: 18px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 7px; left: 0px; transform-origin: right center; transform: rotate(270deg);\"></div>\n                    <!-- Center circle -->\n                    <div style=\"position: absolute; width: 12px; height: 12px; background: #f0ad4e; border-radius: 50%; top: 10px; left: 10px;\"></div>\n                </div>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Fixed!</strong> This version uses pure HTML/CSS shapes that Gmail can't block.\n                <br><br>\n                The logo should now appear as your 4-petal flower shape made entirely with CSS styling.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Fixed! Pure CSS OneDesigner logo üå∏',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ HTML/CSS logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "/**\n * Test email with HTML/CSS created logo (Gmail compatible)\n */\n\nasync function sendHTMLLogoTestEmail() {\n  console.log('üì® Sending HTML/CSS logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <!-- HTML/CSS Logo recreating the 4-petal shape -->\n                <div style=\"display: inline-block; width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <!-- Create 4-petal flower with CSS transforms -->\n                    <div style=\"position: absolute; width: 18px; height: 24px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 0px; left: 7px; transform-origin: center bottom; transform: rotate(0deg);\"></div>\n                    <div style=\"position: absolute; width: 24px; height: 18px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 7px; right: 0px; transform-origin: left center; transform: rotate(90deg);\"></div>\n                    <div style=\"position: absolute; width: 18px; height: 24px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; bottom: 0px; left: 7px; transform-origin: center top; transform: rotate(180deg);\"></div>\n                    <div style=\"position: absolute; width: 24px; height: 18px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 7px; left: 0px; transform-origin: right center; transform: rotate(270deg);\"></div>\n                    <!-- Center circle -->\n                    <div style=\"position: absolute; width: 12px; height: 12px; background: #f0ad4e; border-radius: 50%; top: 10px; left: 10px;\"></div>\n                </div>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Fixed!</strong> This version uses pure HTML/CSS shapes that Gmail can't block.\n                <br><br>\n                The logo should now appear as your 4-petal flower shape made entirely with CSS styling.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Fixed! Pure CSS OneDesigner logo üå∏',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ HTML/CSS logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Test email with HTML/CSS created logo (Gmail compatible)\n */\n\nasync function sendHTMLLogoTestEmail() {\n  console.log('üì® Sending HTML/CSS logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <!-- HTML/CSS Logo recreating the 4-petal shape -->\n                <div style=\"display: inline-block; width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <!-- Create 4-petal flower with CSS transforms -->\n                    <div style=\"position: absolute; width: 18px; height: 24px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 0px; left: 7px; transform-origin: center bottom; transform: rotate(0deg);\"></div>\n                    <div style=\"position: absolute; width: 24px; height: 18px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 7px; right: 0px; transform-origin: left center; transform: rotate(90deg);\"></div>\n                    <div style=\"position: absolute; width: 18px; height: 24px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; bottom: 0px; left: 7px; transform-origin: center top; transform: rotate(180deg);\"></div>\n                    <div style=\"position: absolute; width: 24px; height: 18px; background: #f0ad4e; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 7px; left: 0px; transform-origin: right center; transform: rotate(270deg);\"></div>\n                    <!-- Center circle -->\n                    <div style=\"position: absolute; width: 12px; height: 12px; background: #f0ad4e; border-radius: 50%; top: 10px; left: 10px;\"></div>\n                </div>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Fixed!</strong> This version uses pure HTML/CSS shapes that Gmail can't block.\n                <br><br>\n                The logo should now appear as your 4-petal flower shape made entirely with CSS styling.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Fixed! Pure CSS OneDesigner logo üå∏',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ HTML/CSS logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    }
  ],
  "test/send-golden-text-only-email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Test email with just golden OneDesigner text (no logo)\n */\n\nasync function sendGoldenTextOnlyEmail() {\n  console.log('üì® Sending golden OneDesigner text only email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n                <br><br>\n                Here's what happens next:\n                <br><br>\n                <strong>1.</strong> Tell us about your project (2 min max)<br>\n                <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers<br>\n                <strong>3.</strong> Get your <span style=\"background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600; color: #111827; display: inline-block; transform: rotate(-0.5deg); margin: 0 2px;\">perfect match</span> in 0.3 seconds\n                <br><br>\n                No endless scrolling. No awkward interviews. No wondering if they're actually good.\n                <br><br>\n                Just your ideal designer, ready to start.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, ready to skip the portfolio hunt? (Golden text!)',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ Golden text email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "/**\n * Test email with just golden OneDesigner text (no logo)\n */\n\nasync function sendGoldenTextOnlyEmail() {\n  console.log('üì® Sending golden OneDesigner text only email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n                <br><br>\n                Here's what happens next:\n                <br><br>\n                <strong>1.</strong> Tell us about your project (2 min max)<br>\n                <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers<br>\n                <strong>3.</strong> Get your <span style=\"background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600; color: #111827; display: inline-block; transform: rotate(-0.5deg); margin: 0 2px;\">perfect match</span> in 0.3 seconds\n                <br><br>\n                No endless scrolling. No awkward interviews. No wondering if they're actually good.\n                <br><br>\n                Just your ideal designer, ready to start.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, ready to skip the portfolio hunt? (Golden text!)',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ Golden text email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Test email with just golden OneDesigner text (no logo)\n */\n\nasync function sendGoldenTextOnlyEmail() {\n  console.log('üì® Sending golden OneDesigner text only email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n                <br><br>\n                Here's what happens next:\n                <br><br>\n                <strong>1.</strong> Tell us about your project (2 min max)<br>\n                <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers<br>\n                <strong>3.</strong> Get your <span style=\"background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%); padding: 2px 6px; border-radius: 4px; font-weight: 600; color: #111827; display: inline-block; transform: rotate(-0.5deg); margin: 0 2px;\">perfect match</span> in 0.3 seconds\n                <br><br>\n                No endless scrolling. No awkward interviews. No wondering if they're actually good.\n                <br><br>\n                Just your ideal designer, ready to start.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, ready to skip the portfolio hunt? (Golden text!)',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ Golden text email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    }
  ],
  "test/send-final-branding-test.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Final test of all OneDesigner email types with new golden branding standard\n */\n\nasync function sendFinalBrandingTest() {\n  console.log('üé® Final OneDesigner Email Branding Test')\n  console.log('=' .repeat(60))\n  console.log('Testing all email types with:')\n  console.log('‚úÖ Golden OneDesigner text (#f0ad4e)')\n  console.log('‚úÖ team@onedesigner.app sender')\n  console.log('‚úÖ Appropriate sender names')\n  console.log('‚úÖ No logos (email client compatible)')\n  console.log('=' .repeat(60))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const goldenHeader = `\n    <div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n      <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n    </div>\n  `\n  \n  const emailWrapper = (content, footerText = \"‚Äî Hala from OneDesigner\") => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${goldenHeader}\n      <div style=\"padding: 32px;\">\n        ${content}\n      </div>\n      <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n        <p style=\"margin: 0; font-weight: 600; color: #111827;\">${footerText}</p>\n        <p style=\"margin: 8px 0 0 0; font-size: 14px; color: #6B7280;\">Connecting great clients with amazing designers</p>\n      </div>\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email (Marc Lou Style)\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéâ FINAL TEST: Welcome to OneDesigner!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n          <br><br>\n          This is the <strong>final test</strong> with our new golden branding standard.\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Start Your Brief ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      from: 'OneDesigner <team@onedesigner.app>',\n      subject: 'üîê FINAL TEST: Your verification code',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n        <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n          <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n          <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n        </div>\n        <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n      `, \"‚Äî OneDesigner Security\")\n    },\n    \n    // 3. Designer Approval\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: '‚úÖ FINAL TEST: You\\'re approved!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Your application? Approved.</strong>\n          <br><br>\n          Welcome to OneDesigner with our new golden branding!\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Access Dashboard ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéØ FINAL TEST: New project request',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">A client specifically wants YOU for their project.</strong>\n          <br><br>\n          Testing our new consistent branding across all email types.\n        </p>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n          <strong>Project:</strong> Brand Identity Design<br>\n          <strong>Budget:</strong> $3,000 - $7,500<br>\n          <strong>Timeline:</strong> 3 weeks\n        </div>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            View Request ‚Üí\n          </a>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Final test of all OneDesigner email types with new golden branding standard\n */\n\nasync function sendFinalBrandingTest() {\n  console.log('üé® Final OneDesigner Email Branding Test')\n  console.log('=' .repeat(60))\n  console.log('Testing all email types with:')\n  console.log('‚úÖ Golden OneDesigner text (#f0ad4e)')\n  console.log('‚úÖ team@onedesigner.app sender')\n  console.log('‚úÖ Appropriate sender names')\n  console.log('‚úÖ No logos (email client compatible)')\n  console.log('=' .repeat(60))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const goldenHeader = `\n    <div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n      <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n    </div>\n  `\n  \n  const emailWrapper = (content, footerText = \"‚Äî Hala from OneDesigner\") => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${goldenHeader}\n      <div style=\"padding: 32px;\">\n        ${content}\n      </div>\n      <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n        <p style=\"margin: 0; font-weight: 600; color: #111827;\">${footerText}</p>\n        <p style=\"margin: 8px 0 0 0; font-size: 14px; color: #6B7280;\">Connecting great clients with amazing designers</p>\n      </div>\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email (Marc Lou Style)\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéâ FINAL TEST: Welcome to OneDesigner!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n          <br><br>\n          This is the <strong>final test</strong> with our new golden branding standard.\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Start Your Brief ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      from: 'OneDesigner <team@onedesigner.app>',\n      subject: 'üîê FINAL TEST: Your verification code',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n        <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n          <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n          <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n        </div>\n        <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n      `, \"‚Äî OneDesigner Security\")\n    },\n    \n    // 3. Designer Approval\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: '‚úÖ FINAL TEST: You\\'re approved!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Your application? Approved.</strong>\n          <br><br>\n          Welcome to OneDesigner with our new golden branding!\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Access Dashboard ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéØ FINAL TEST: New project request',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">A client specifically wants YOU for their project.</strong>\n          <br><br>\n          Testing our new consistent branding across all email types.\n        </p>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n          <strong>Project:</strong> Brand Identity Design<br>\n          <strong>Budget:</strong> $3,000 - $7,500<br>\n          <strong>Timeline:</strong> 3 weeks\n        </div>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            View Request ‚Üí\n          </a>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Final test of all OneDesigner email types with new golden branding standard\n */\n\nasync function sendFinalBrandingTest() {\n  console.log('üé® Final OneDesigner Email Branding Test')\n  console.log('=' .repeat(60))\n  console.log('Testing all email types with:')\n  console.log('‚úÖ Golden OneDesigner text (#f0ad4e)')\n  console.log('‚úÖ team@onedesigner.app sender')\n  console.log('‚úÖ Appropriate sender names')\n  console.log('‚úÖ No logos (email client compatible)')\n  console.log('=' .repeat(60))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const goldenHeader = `\n    <div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n      <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n    </div>\n  `\n  \n  const emailWrapper = (content, footerText = \"‚Äî Hala from OneDesigner\") => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${goldenHeader}\n      <div style=\"padding: 32px;\">\n        ${content}\n      </div>\n      <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n        <p style=\"margin: 0; font-weight: 600; color: #111827;\">${footerText}</p>\n        <p style=\"margin: 8px 0 0 0; font-size: 14px; color: #6B7280;\">Connecting great clients with amazing designers</p>\n      </div>\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email (Marc Lou Style)\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéâ FINAL TEST: Welcome to OneDesigner!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n          <br><br>\n          This is the <strong>final test</strong> with our new golden branding standard.\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Start Your Brief ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      from: 'OneDesigner <team@onedesigner.app>',\n      subject: 'üîê FINAL TEST: Your verification code',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n        <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n          <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n          <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n        </div>\n        <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n      `, \"‚Äî OneDesigner Security\")\n    },\n    \n    // 3. Designer Approval\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: '‚úÖ FINAL TEST: You\\'re approved!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Your application? Approved.</strong>\n          <br><br>\n          Welcome to OneDesigner with our new golden branding!\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Access Dashboard ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéØ FINAL TEST: New project request',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">A client specifically wants YOU for their project.</strong>\n          <br><br>\n          Testing our new consistent branding across all email types.\n        </p>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n          <strong>Project:</strong> Brand Identity Design<br>\n          <strong>Budget:</strong> $3,000 - $7,500<br>\n          <strong>Timeline:</strong> 3 weeks\n        </div>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            View Request ‚Üí\n          </a>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 3,
      "context": "`)\n  \n  for (let i = 0; i < emails.length; i++) {\n    const email = emails[i]\n    try {\n      console.log(`${i + 1}. ${email.subject}`)\n      console.log(`   Sender: ${email.from}`)\n      \n      const response = await fetch('https://api.resend.com/emails', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${RESEND_API_KEY}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          from: email.from,\n          to: testEmail,\n          subject: email.subject,\n          html: email.html\n        })\n      })\n      \n      if (response.ok) {\n        const result = await response.json()\n        console.log(`   ‚úÖ Sent (ID: ${result.id})`)\n      } else {\n        const error = await response.text()\n        console.log(`   ‚ùå Failed: ${error}`)\n      }\n      \n      // Wait between emails\n      await new Promise(resolve => setTimeout(resolve, 1000))\n      \n    } catch (error) {\n      console.log(`   ‚ùå Error: ${error.message}`)\n    }\n  }\n  \n  console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Final test of all OneDesigner email types with new golden branding standard\n */\n\nasync function sendFinalBrandingTest() {\n  console.log('üé® Final OneDesigner Email Branding Test')\n  console.log('=' .repeat(60))\n  console.log('Testing all email types with:')\n  console.log('‚úÖ Golden OneDesigner text (#f0ad4e)')\n  console.log('‚úÖ team@onedesigner.app sender')\n  console.log('‚úÖ Appropriate sender names')\n  console.log('‚úÖ No logos (email client compatible)')\n  console.log('=' .repeat(60))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const goldenHeader = `\n    <div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n      <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n    </div>\n  `\n  \n  const emailWrapper = (content, footerText = \"‚Äî Hala from OneDesigner\") => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${goldenHeader}\n      <div style=\"padding: 32px;\">\n        ${content}\n      </div>\n      <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n        <p style=\"margin: 0; font-weight: 600; color: #111827;\">${footerText}</p>\n        <p style=\"margin: 8px 0 0 0; font-size: 14px; color: #6B7280;\">Connecting great clients with amazing designers</p>\n      </div>\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email (Marc Lou Style)\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéâ FINAL TEST: Welcome to OneDesigner!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n          <br><br>\n          This is the <strong>final test</strong> with our new golden branding standard.\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Start Your Brief ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      from: 'OneDesigner <team@onedesigner.app>',\n      subject: 'üîê FINAL TEST: Your verification code',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n        <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n          <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n          <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n        </div>\n        <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n      `, \"‚Äî OneDesigner Security\")\n    },\n    \n    // 3. Designer Approval\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: '‚úÖ FINAL TEST: You\\'re approved!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Your application? Approved.</strong>\n          <br><br>\n          Welcome to OneDesigner with our new golden branding!\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Access Dashboard ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéØ FINAL TEST: New project request',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">A client specifically wants YOU for their project.</strong>\n          <br><br>\n          Testing our new consistent branding across all email types.\n        </p>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n          <strong>Project:</strong> Brand Identity Design<br>\n          <strong>Budget:</strong> $3,000 - $7,500<br>\n          <strong>Timeline:</strong> 3 weeks\n        </div>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            View Request ‚Üí\n          </a>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Final test of all OneDesigner email types with new golden branding standard\n */\n\nasync function sendFinalBrandingTest() {\n  console.log('üé® Final OneDesigner Email Branding Test')\n  console.log('=' .repeat(60))\n  console.log('Testing all email types with:')\n  console.log('‚úÖ Golden OneDesigner text (#f0ad4e)')\n  console.log('‚úÖ team@onedesigner.app sender')\n  console.log('‚úÖ Appropriate sender names')\n  console.log('‚úÖ No logos (email client compatible)')\n  console.log('=' .repeat(60))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const goldenHeader = `\n    <div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n      <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n    </div>\n  `\n  \n  const emailWrapper = (content, footerText = \"‚Äî Hala from OneDesigner\") => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${goldenHeader}\n      <div style=\"padding: 32px;\">\n        ${content}\n      </div>\n      <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n        <p style=\"margin: 0; font-weight: 600; color: #111827;\">${footerText}</p>\n        <p style=\"margin: 8px 0 0 0; font-size: 14px; color: #6B7280;\">Connecting great clients with amazing designers</p>\n      </div>\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email (Marc Lou Style)\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéâ FINAL TEST: Welcome to OneDesigner!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n          <br><br>\n          This is the <strong>final test</strong> with our new golden branding standard.\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Start Your Brief ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      from: 'OneDesigner <team@onedesigner.app>',\n      subject: 'üîê FINAL TEST: Your verification code',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n        <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n          <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n          <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n        </div>\n        <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n      `, \"‚Äî OneDesigner Security\")\n    },\n    \n    // 3. Designer Approval\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: '‚úÖ FINAL TEST: You\\'re approved!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Your application? Approved.</strong>\n          <br><br>\n          Welcome to OneDesigner with our new golden branding!\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Access Dashboard ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéØ FINAL TEST: New project request',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">A client specifically wants YOU for their project.</strong>\n          <br><br>\n          Testing our new consistent branding across all email types.\n        </p>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n          <strong>Project:</strong> Brand Identity Design<br>\n          <strong>Budget:</strong> $3,000 - $7,500<br>\n          <strong>Timeline:</strong> 3 weeks\n        </div>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            View Request ‚Üí\n          </a>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Final test of all OneDesigner email types with new golden branding standard\n */\n\nasync function sendFinalBrandingTest() {\n  console.log('üé® Final OneDesigner Email Branding Test')\n  console.log('=' .repeat(60))\n  console.log('Testing all email types with:')\n  console.log('‚úÖ Golden OneDesigner text (#f0ad4e)')\n  console.log('‚úÖ team@onedesigner.app sender')\n  console.log('‚úÖ Appropriate sender names')\n  console.log('‚úÖ No logos (email client compatible)')\n  console.log('=' .repeat(60))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const goldenHeader = `\n    <div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n      <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n    </div>\n  `\n  \n  const emailWrapper = (content, footerText = \"‚Äî Hala from OneDesigner\") => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${goldenHeader}\n      <div style=\"padding: 32px;\">\n        ${content}\n      </div>\n      <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n        <p style=\"margin: 0; font-weight: 600; color: #111827;\">${footerText}</p>\n        <p style=\"margin: 8px 0 0 0; font-size: 14px; color: #6B7280;\">Connecting great clients with amazing designers</p>\n      </div>\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email (Marc Lou Style)\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéâ FINAL TEST: Welcome to OneDesigner!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n          <br><br>\n          This is the <strong>final test</strong> with our new golden branding standard.\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Start Your Brief ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      from: 'OneDesigner <team@onedesigner.app>',\n      subject: 'üîê FINAL TEST: Your verification code',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n        <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n          <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n          <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n        </div>\n        <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n      `, \"‚Äî OneDesigner Security\")\n    },\n    \n    // 3. Designer Approval\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: '‚úÖ FINAL TEST: You\\'re approved!',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">Your application? Approved.</strong>\n          <br><br>\n          Welcome to OneDesigner with our new golden branding!\n        </p>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            Access Dashboard ‚Üí\n          </a>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request\n    {\n      from: 'Hala from OneDesigner <team@onedesigner.app>',\n      subject: 'üéØ FINAL TEST: New project request',\n      html: emailWrapper(`\n        <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n        <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n          <strong style=\"color: #111827;\">A client specifically wants YOU for their project.</strong>\n          <br><br>\n          Testing our new consistent branding across all email types.\n        </p>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n          <strong>Project:</strong> Brand Identity Design<br>\n          <strong>Budget:</strong> $3,000 - $7,500<br>\n          <strong>Timeline:</strong> 3 weeks\n        </div>\n        <div style=\"margin: 24px 0;\">\n          <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n            View Request ‚Üí\n          </a>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    }
  ],
  "test/send-css-logo-test-email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Test email with CSS-based logo (more email client compatible)\n */\n\nasync function sendCSSLogoTestEmail() {\n  console.log('üì® Sending CSS logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Create CSS-based logo that mimics the 4-petal flower shape\n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <!-- CSS Logo - 4 overlapping circles to create petal effect -->\n                <div style=\"display: inline-block; width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: -2px; left: 6px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: 6px; right: -2px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; bottom: -2px; left: 6px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: 6px; left: -2px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 10px; height: 10px; background: #f0ad4e; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%);\"></div>\n                </div>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Testing CSS logo!</strong> This version uses pure CSS shapes instead of SVG.\n                <br><br>\n                The logo should now appear as overlapping circles creating a 4-petal flower effect.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Test Link ‚Üí\n                </a>\n            </div>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Testing CSS-based logo for email compatibility\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, testing CSS logo beside OneDesigner!',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ CSS Logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "/**\n * Test email with CSS-based logo (more email client compatible)\n */\n\nasync function sendCSSLogoTestEmail() {\n  console.log('üì® Sending CSS logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Create CSS-based logo that mimics the 4-petal flower shape\n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <!-- CSS Logo - 4 overlapping circles to create petal effect -->\n                <div style=\"display: inline-block; width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: -2px; left: 6px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: 6px; right: -2px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; bottom: -2px; left: 6px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: 6px; left: -2px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 10px; height: 10px; background: #f0ad4e; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%);\"></div>\n                </div>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Testing CSS logo!</strong> This version uses pure CSS shapes instead of SVG.\n                <br><br>\n                The logo should now appear as overlapping circles creating a 4-petal flower effect.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Test Link ‚Üí\n                </a>\n            </div>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Testing CSS-based logo for email compatibility\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, testing CSS logo beside OneDesigner!',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ CSS Logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Test email with CSS-based logo (more email client compatible)\n */\n\nasync function sendCSSLogoTestEmail() {\n  console.log('üì® Sending CSS logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Create CSS-based logo that mimics the 4-petal flower shape\n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <!-- CSS Logo - 4 overlapping circles to create petal effect -->\n                <div style=\"display: inline-block; width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; position: relative;\">\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: -2px; left: 6px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: 6px; right: -2px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; bottom: -2px; left: 6px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 20px; height: 20px; background: #f0ad4e; border-radius: 50%; top: 6px; left: -2px; opacity: 0.9;\"></div>\n                    <div style=\"position: absolute; width: 10px; height: 10px; background: #f0ad4e; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%);\"></div>\n                </div>\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Testing CSS logo!</strong> This version uses pure CSS shapes instead of SVG.\n                <br><br>\n                The logo should now appear as overlapping circles creating a 4-petal flower effect.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Test Link ‚Üí\n                </a>\n            </div>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Testing CSS-based logo for email compatibility\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, testing CSS logo beside OneDesigner!',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ CSS Logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    }
  ],
  "test/send-all-email-types-with-logo.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Comprehensive test of all OneDesigner email templates with new logo\n * Sends different email types to osamah96@gmail.com\n */\n\nasync function sendAllEmailTypes() {\n  console.log('üé® Testing All OneDesigner Email Templates with New Logo')\n  console.log('=' .repeat(70))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const logoSVG = `\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" style=\"width: 100%; height: 100%;\">\n      <g fill=\"#f0ad4e\">\n        <ellipse cx=\"50\" cy=\"30\" rx=\"20\" ry=\"25\" />\n        <ellipse cx=\"70\" cy=\"50\" rx=\"25\" ry=\"20\" />\n        <ellipse cx=\"50\" cy=\"70\" rx=\"20\" ry=\"25\" />\n        <ellipse cx=\"30\" cy=\"50\" rx=\"25\" ry=\"20\" />\n        <circle cx=\"50\" cy=\"50\" r=\"12\" />\n      </g>\n    </svg>\n  `\n  \n  const emailHeader = `\n    <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n      <div style=\"display: inline-flex; align-items: center; gap: 16px;\">\n        <div style=\"width: 48px; height: 48px; display: inline-block;\">\n          ${logoSVG}\n        </div>\n        <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em;\">OneDesigner</span>\n      </div>\n    </div>\n  `\n  \n  const emailWrapper = (content) => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${emailHeader}\n      ${content}\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email\n    {\n      subject: 'üéâ Test: Welcome Email with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>Welcome to OneDesigner!</strong> This is a test of our welcome email template with the new logo.\n          </p>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              Get Started ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      subject: 'üîê Test: OTP Email with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n          <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n            <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n            <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n          </div>\n          <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî OneDesigner Security</p>\n        </div>\n      `)\n    },\n    \n    // 3. Designer Approval Email\n    {\n      subject: '‚úÖ Test: Designer Approval with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>Your application? Approved.</strong><br><br>\n            This is a test of our designer approval email with the new logo design.\n          </p>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app/designer/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              Access Dashboard ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request Email\n    {\n      subject: 'üéØ Test: Project Request with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>A client specifically wants YOU for their project.</strong><br><br>\n            This is a test of our project request email template with the new logo.\n          </p>\n          <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n            <strong>Project:</strong> Logo Design for Tech Startup<br>\n            <strong>Budget:</strong> $2,000 - $5,000<br>\n            <strong>Timeline:</strong> 2 weeks\n          </div>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              View Request ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Comprehensive test of all OneDesigner email templates with new logo\n * Sends different email types to osamah96@gmail.com\n */\n\nasync function sendAllEmailTypes() {\n  console.log('üé® Testing All OneDesigner Email Templates with New Logo')\n  console.log('=' .repeat(70))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const logoSVG = `\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" style=\"width: 100%; height: 100%;\">\n      <g fill=\"#f0ad4e\">\n        <ellipse cx=\"50\" cy=\"30\" rx=\"20\" ry=\"25\" />\n        <ellipse cx=\"70\" cy=\"50\" rx=\"25\" ry=\"20\" />\n        <ellipse cx=\"50\" cy=\"70\" rx=\"20\" ry=\"25\" />\n        <ellipse cx=\"30\" cy=\"50\" rx=\"25\" ry=\"20\" />\n        <circle cx=\"50\" cy=\"50\" r=\"12\" />\n      </g>\n    </svg>\n  `\n  \n  const emailHeader = `\n    <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n      <div style=\"display: inline-flex; align-items: center; gap: 16px;\">\n        <div style=\"width: 48px; height: 48px; display: inline-block;\">\n          ${logoSVG}\n        </div>\n        <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em;\">OneDesigner</span>\n      </div>\n    </div>\n  `\n  \n  const emailWrapper = (content) => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${emailHeader}\n      ${content}\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email\n    {\n      subject: 'üéâ Test: Welcome Email with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>Welcome to OneDesigner!</strong> This is a test of our welcome email template with the new logo.\n          </p>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              Get Started ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      subject: 'üîê Test: OTP Email with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n          <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n            <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n            <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n          </div>\n          <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî OneDesigner Security</p>\n        </div>\n      `)\n    },\n    \n    // 3. Designer Approval Email\n    {\n      subject: '‚úÖ Test: Designer Approval with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>Your application? Approved.</strong><br><br>\n            This is a test of our designer approval email with the new logo design.\n          </p>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app/designer/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              Access Dashboard ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request Email\n    {\n      subject: 'üéØ Test: Project Request with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>A client specifically wants YOU for their project.</strong><br><br>\n            This is a test of our project request email template with the new logo.\n          </p>\n          <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n            <strong>Project:</strong> Logo Design for Tech Startup<br>\n            <strong>Budget:</strong> $2,000 - $5,000<br>\n            <strong>Timeline:</strong> 2 weeks\n          </div>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              View Request ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Comprehensive test of all OneDesigner email templates with new logo\n * Sends different email types to osamah96@gmail.com\n */\n\nasync function sendAllEmailTypes() {\n  console.log('üé® Testing All OneDesigner Email Templates with New Logo')\n  console.log('=' .repeat(70))\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  const testEmail = 'osamah96@gmail.com'\n  \n  const logoSVG = `\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" style=\"width: 100%; height: 100%;\">\n      <g fill=\"#f0ad4e\">\n        <ellipse cx=\"50\" cy=\"30\" rx=\"20\" ry=\"25\" />\n        <ellipse cx=\"70\" cy=\"50\" rx=\"25\" ry=\"20\" />\n        <ellipse cx=\"50\" cy=\"70\" rx=\"20\" ry=\"25\" />\n        <ellipse cx=\"30\" cy=\"50\" rx=\"25\" ry=\"20\" />\n        <circle cx=\"50\" cy=\"50\" r=\"12\" />\n      </g>\n    </svg>\n  `\n  \n  const emailHeader = `\n    <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n      <div style=\"display: inline-flex; align-items: center; gap: 16px;\">\n        <div style=\"width: 48px; height: 48px; display: inline-block;\">\n          ${logoSVG}\n        </div>\n        <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em;\">OneDesigner</span>\n      </div>\n    </div>\n  `\n  \n  const emailWrapper = (content) => `\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n      ${emailHeader}\n      ${content}\n    </div>\n  `\n  \n  const emails = [\n    // 1. Welcome Email\n    {\n      subject: 'üéâ Test: Welcome Email with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Hey Osama üëã</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>Welcome to OneDesigner!</strong> This is a test of our welcome email template with the new logo.\n          </p>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              Get Started ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    },\n    \n    // 2. OTP Email\n    {\n      subject: 'üîê Test: OTP Email with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Quick verification üëá</h2>\n          <div style=\"background: #F9FAFB; border: 2px dashed #E5E7EB; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;\">\n            <div style=\"font-size: 36px; font-weight: 700; letter-spacing: 8px; color: #111827; font-family: monospace;\">123456</div>\n            <div style=\"font-size: 14px; color: #6B7280; margin-top: 12px;\">Expires in 10 minutes</div>\n          </div>\n          <p style=\"color: #4B5563;\">Just copy and paste this code to continue.</p>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî OneDesigner Security</p>\n        </div>\n      `)\n    },\n    \n    // 3. Designer Approval Email\n    {\n      subject: '‚úÖ Test: Designer Approval with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">Osama, you're in! üéâ</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>Your application? Approved.</strong><br><br>\n            This is a test of our designer approval email with the new logo design.\n          </p>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app/designer/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              Access Dashboard ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    },\n    \n    // 4. Project Request Email\n    {\n      subject: 'üéØ Test: Project Request with New Logo',\n      html: emailWrapper(`\n        <div style=\"padding: 32px;\">\n          <h2 style=\"color: #111827; margin: 0 0 16px 0;\">You've got a match! üéØ</h2>\n          <p style=\"color: #4B5563; line-height: 1.7;\">\n            <strong>A client specifically wants YOU for their project.</strong><br><br>\n            This is a test of our project request email template with the new logo.\n          </p>\n          <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0;\">\n            <strong>Project:</strong> Logo Design for Tech Startup<br>\n            <strong>Budget:</strong> $2,000 - $5,000<br>\n            <strong>Timeline:</strong> 2 weeks\n          </div>\n          <div style=\"margin: 24px 0;\">\n            <a href=\"https://onedesigner.app/designer/requests\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n              View Request ‚Üí\n            </a>\n          </div>\n        </div>\n        <div style=\"padding: 24px 32px; background: #F9FAFB; border-top: 1px solid #F3F4F6;\">\n          <p style=\"margin: 0; font-weight: 600; color: #111827;\">‚Äî Hala from OneDesigner</p>\n        </div>\n      `)\n    }\n  ]\n  \n  console.log(`"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 3,
      "context": "`)\n  \n  for (let i = 0; i < emails.length; i++) {\n    const email = emails[i]\n    try {\n      console.log(`${i + 1}. Sending: ${email.subject}`)\n      \n      const response = await fetch('https://api.resend.com/emails', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${RESEND_API_KEY}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          from: i === 1 ? 'OneDesigner <team@onedesigner.app>' : 'Hala from OneDesigner <team@onedesigner.app>',\n          to: testEmail,\n          subject: email.subject,\n          html: email.html\n        })\n      })\n      \n      if (response.ok) {\n        const result = await response.json()\n        console.log(`   ‚úÖ Sent successfully (ID: ${result.id})`)\n      } else {\n        const error = await response.text()\n        console.log(`   ‚ùå Failed: ${error}`)\n      }\n      \n      // Wait 1 second between emails to avoid rate limiting\n      await new Promise(resolve => setTimeout(resolve, 1000))\n      \n    } catch (error) {\n      console.log(`   ‚ùå Error: ${error.message}`)\n    }\n  }\n  \n  console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 3,
      "context": "`)\n  \n  for (let i = 0; i < emails.length; i++) {\n    const email = emails[i]\n    try {\n      console.log(`${i + 1}. Sending: ${email.subject}`)\n      \n      const response = await fetch('https://api.resend.com/emails', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${RESEND_API_KEY}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          from: i === 1 ? 'OneDesigner <team@onedesigner.app>' : 'Hala from OneDesigner <team@onedesigner.app>',\n          to: testEmail,\n          subject: email.subject,\n          html: email.html\n        })\n      })\n      \n      if (response.ok) {\n        const result = await response.json()\n        console.log(`   ‚úÖ Sent successfully (ID: ${result.id})`)\n      } else {\n        const error = await response.text()\n        console.log(`   ‚ùå Failed: ${error}`)\n      }\n      \n      // Wait 1 second between emails to avoid rate limiting\n      await new Promise(resolve => setTimeout(resolve, 1000))\n      \n    } catch (error) {\n      console.log(`   ‚ùå Error: ${error.message}`)\n    }\n  }\n  \n  console.log('"
    }
  ],
  "test/send-actual-logo-test-email.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Test email with the actual OneDesigner logo as base64 image\n */\n\nasync function sendActualLogoTestEmail() {\n  console.log('üì® Sending actual OneDesigner logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Base64 encoded version of your 4-petal logo (recreated as SVG)\n  const logoSVG = `\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <clipPath id=\"petal-clip\">\n          <circle cx=\"50\" cy=\"50\" r=\"45\"/>\n        </clipPath>\n      </defs>\n      <g clip-path=\"url(#petal-clip)\">\n        <!-- Top petal -->\n        <ellipse cx=\"50\" cy=\"25\" rx=\"25\" ry=\"30\" fill=\"#f0ad4e\" transform=\"rotate(0 50 50)\"/>\n        <!-- Right petal -->\n        <ellipse cx=\"75\" cy=\"50\" rx=\"30\" ry=\"25\" fill=\"#f0ad4e\" transform=\"rotate(90 50 50)\"/>\n        <!-- Bottom petal -->\n        <ellipse cx=\"50\" cy=\"75\" rx=\"25\" ry=\"30\" fill=\"#f0ad4e\" transform=\"rotate(180 50 50)\"/>\n        <!-- Left petal -->\n        <ellipse cx=\"25\" cy=\"50\" rx=\"30\" ry=\"25\" fill=\"#f0ad4e\" transform=\"rotate(270 50 50)\"/>\n        <!-- Center blend -->\n        <circle cx=\"50\" cy=\"50\" r=\"15\" fill=\"#f0ad4e\"/>\n      </g>\n    </svg>\n  `.replace(/\\s+/g, ' ').trim()\n  \n  // Convert SVG to base64 data URI\n  const logoDataUri = `data:image/svg+xml;base64,${Buffer.from(logoSVG).toString('base64')}`\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <img src=\"${logoDataUri}\" alt=\"OneDesigner\" style=\"width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; display: inline-block;\" />\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Perfect!</strong> Now testing with your actual 4-petal OneDesigner logo.\n                <br><br>\n                The logo should now appear as the exact golden flower shape from your brand beside the text.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, your actual OneDesigner logo is here! üå∏',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ Actual logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "/**\n * Test email with the actual OneDesigner logo as base64 image\n */\n\nasync function sendActualLogoTestEmail() {\n  console.log('üì® Sending actual OneDesigner logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Base64 encoded version of your 4-petal logo (recreated as SVG)\n  const logoSVG = `\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <clipPath id=\"petal-clip\">\n          <circle cx=\"50\" cy=\"50\" r=\"45\"/>\n        </clipPath>\n      </defs>\n      <g clip-path=\"url(#petal-clip)\">\n        <!-- Top petal -->\n        <ellipse cx=\"50\" cy=\"25\" rx=\"25\" ry=\"30\" fill=\"#f0ad4e\" transform=\"rotate(0 50 50)\"/>\n        <!-- Right petal -->\n        <ellipse cx=\"75\" cy=\"50\" rx=\"30\" ry=\"25\" fill=\"#f0ad4e\" transform=\"rotate(90 50 50)\"/>\n        <!-- Bottom petal -->\n        <ellipse cx=\"50\" cy=\"75\" rx=\"25\" ry=\"30\" fill=\"#f0ad4e\" transform=\"rotate(180 50 50)\"/>\n        <!-- Left petal -->\n        <ellipse cx=\"25\" cy=\"50\" rx=\"30\" ry=\"25\" fill=\"#f0ad4e\" transform=\"rotate(270 50 50)\"/>\n        <!-- Center blend -->\n        <circle cx=\"50\" cy=\"50\" r=\"15\" fill=\"#f0ad4e\"/>\n      </g>\n    </svg>\n  `.replace(/\\s+/g, ' ').trim()\n  \n  // Convert SVG to base64 data URI\n  const logoDataUri = `data:image/svg+xml;base64,${Buffer.from(logoSVG).toString('base64')}`\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <img src=\"${logoDataUri}\" alt=\"OneDesigner\" style=\"width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; display: inline-block;\" />\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Perfect!</strong> Now testing with your actual 4-petal OneDesigner logo.\n                <br><br>\n                The logo should now appear as the exact golden flower shape from your brand beside the text.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, your actual OneDesigner logo is here! üå∏',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ Actual logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Test email with the actual OneDesigner logo as base64 image\n */\n\nasync function sendActualLogoTestEmail() {\n  console.log('üì® Sending actual OneDesigner logo test email...')\n  \n  const RESEND_API_KEY = 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8'\n  \n  // Base64 encoded version of your 4-petal logo (recreated as SVG)\n  const logoSVG = `\n    <svg width=\"32\" height=\"32\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <clipPath id=\"petal-clip\">\n          <circle cx=\"50\" cy=\"50\" r=\"45\"/>\n        </clipPath>\n      </defs>\n      <g clip-path=\"url(#petal-clip)\">\n        <!-- Top petal -->\n        <ellipse cx=\"50\" cy=\"25\" rx=\"25\" ry=\"30\" fill=\"#f0ad4e\" transform=\"rotate(0 50 50)\"/>\n        <!-- Right petal -->\n        <ellipse cx=\"75\" cy=\"50\" rx=\"30\" ry=\"25\" fill=\"#f0ad4e\" transform=\"rotate(90 50 50)\"/>\n        <!-- Bottom petal -->\n        <ellipse cx=\"50\" cy=\"75\" rx=\"25\" ry=\"30\" fill=\"#f0ad4e\" transform=\"rotate(180 50 50)\"/>\n        <!-- Left petal -->\n        <ellipse cx=\"25\" cy=\"50\" rx=\"30\" ry=\"25\" fill=\"#f0ad4e\" transform=\"rotate(270 50 50)\"/>\n        <!-- Center blend -->\n        <circle cx=\"50\" cy=\"50\" r=\"15\" fill=\"#f0ad4e\"/>\n      </g>\n    </svg>\n  `.replace(/\\s+/g, ' ').trim()\n  \n  // Convert SVG to base64 data URI\n  const logoDataUri = `data:image/svg+xml;base64,${Buffer.from(logoSVG).toString('base64')}`\n  \n  const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #FAFAFA;\">\n    <div style=\"max-width: 560px; margin: 40px auto; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\">\n        <!-- Header -->\n        <div style=\"padding: 32px; border-bottom: 1px solid #F3F4F6; text-align: center;\">\n            <div style=\"display: inline-block;\">\n                <img src=\"${logoDataUri}\" alt=\"OneDesigner\" style=\"width: 32px; height: 32px; margin-right: 12px; vertical-align: middle; display: inline-block;\" />\n                <span style=\"font-size: 24px; font-weight: 700; color: #111827; letter-spacing: -0.02em; vertical-align: middle; line-height: 1;\">OneDesigner</span>\n            </div>\n        </div>\n        \n        <!-- Content -->\n        <div style=\"padding: 32px;\">\n            <h2 style=\"font-size: 18px; font-weight: 600; color: #111827; margin: 0 0 16px 0;\">\n                Hey Osama üëã\n            </h2>\n            \n            <p style=\"color: #4B5563; line-height: 1.7; margin: 0 0 24px 0;\">\n                <strong style=\"color: #111827;\">Perfect!</strong> Now testing with your actual 4-petal OneDesigner logo.\n                <br><br>\n                The logo should now appear as the exact golden flower shape from your brand beside the text.\n            </p>\n            \n            <div style=\"margin: 32px 0;\">\n                <a href=\"https://onedesigner.app/client/dashboard\" style=\"display: inline-block; padding: 14px 28px; background: #111827; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;\">\n                    Start Your Brief ‚Üí\n                </a>\n            </div>\n            \n            <p style=\"color: #4B5563; line-height: 1.7;\">\n                <strong>Quick tip:</strong> The more specific your brief, the better your match. \n                Don't hold back on the details ‚Äî our AI loves them.\n                <br><br>\n                P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n            </p>\n        </div>\n        \n        <!-- Footer -->\n        <div style=\"padding: 24px 32px; border-top: 1px solid #F3F4F6; background: #F9FAFB;\">\n            <p style=\"margin: 0 0 8px 0; font-weight: 600; color: #111827;\">\n                ‚Äî Hala from OneDesigner\n            </p>\n            <p style=\"margin: 0; font-size: 14px; color: #6B7280;\">\n                Connecting great clients with amazing designers\n            </p>\n        </div>\n    </div>\n</body>\n</html>\n  `\n  \n  try {\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: 'Hala from OneDesigner <team@onedesigner.app>',\n        to: 'osamah96@gmail.com',\n        subject: 'Osama, your actual OneDesigner logo is here! üå∏',\n        html: emailHtml\n      })\n    })\n    \n    const responseText = await response.text()\n    \n    if (response.ok) {\n      const result = JSON.parse(responseText)\n      console.log('‚úÖ Actual logo email sent successfully!')\n      console.log('Email ID:', result.id)\n      console.log('"
    }
  ],
  "test/run_update_token_migration.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 3,
      "context": "üîó Go to: https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new')\n    console.log('Paste the SQL above and run it.')\n    \n  } catch (error) {\n    console.error('‚ùå Error:', error.message)\n  }\n}\n\nrunMigration()"
    }
  ],
  "test/run_price_migration_node.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 3,
      "context": "‚ö†Ô∏è  The columns need to be added manually through Supabase SQL Editor:');\n    console.log('Go to: https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new"
    }
  ],
  "test/generate_designers_clean.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js');\nconst { v4: uuidv4 } = require('uuid');\n\n// Supabase configuration\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co';\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyd2NodHd4cG5ybHB6a3N1cGdtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDQxNjM1OCwiZXhwIjoyMDY5OTkyMzU4fQ.etecMSfQ317vkouRXaMX3Jqg669kf5KL4pE08V03TV8';\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey);\n\n// Name pools for realistic diversity\nconst firstNames = {\n  male: ['James', 'John', 'Robert', 'Michael', 'David', 'William', 'Richard', 'Joseph', 'Thomas', 'Christopher', \n         'Daniel', 'Matthew', 'Anthony', 'Mark', 'Paul', 'Steven', 'Andrew', 'Kenneth', 'Joshua', 'Kevin',\n         'Carlos', 'Juan', 'Pedro', 'Luis', 'Miguel', 'Ahmed', 'Muhammad', 'Ali', 'Hassan', 'Omar',\n         'Hiroshi', 'Takeshi', 'Kenji', 'Chen', 'Wei', 'Zhang', 'Raj', 'Arjun', 'Priya', 'Dmitri'],\n  female: ['Mary', 'Patricia', 'Jennifer', 'Linda', 'Elizabeth', 'Barbara', 'Susan', 'Jessica', 'Sarah', 'Karen',\n           'Lisa', 'Nancy', 'Betty', 'Margaret', 'Sandra', 'Ashley', 'Kimberly', 'Emily', 'Donna', 'Michelle',\n           'Maria', 'Sofia', 'Ana', 'Carmen', 'Rosa', 'Fatima', 'Aisha', 'Zara', 'Layla', 'Noor',\n           'Yuki', 'Sakura', 'Mei', 'Lin', 'Xiao', 'Priya', 'Anjali', 'Deepa', 'Nina', 'Olga']\n};\n\nconst lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez',\n                   'Anderson', 'Taylor', 'Thomas', 'Moore', 'Jackson', 'Martin', 'Lee', 'Thompson', 'White', 'Harris',\n                   'Sanchez', 'Clark', 'Ramirez', 'Lewis', 'Robinson', 'Walker', 'Young', 'Allen', 'King', 'Wright',\n                   'Lopez', 'Hill', 'Scott', 'Green', 'Adams', 'Baker', 'Gonzalez', 'Nelson', 'Carter', 'Mitchell',\n                   'Nakamura', 'Yamamoto', 'Tanaka', 'Suzuki', 'Kim', 'Park', 'Chen', 'Wang', 'Singh', 'Patel',\n                   'Dubois', 'Muller', 'Schmidt', 'Petrov', 'Ivanov', 'Novak', 'Kowalski', 'Andersson', 'Nielsen', 'Silva'];\n\nconst cities = [\n  'New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix',\n  'London', 'Manchester', 'Birmingham', 'Edinburgh', 'Bristol',\n  'Paris', 'Lyon', 'Berlin', 'Munich', 'Hamburg',\n  'Toronto', 'Vancouver', 'Montreal', 'Sydney', 'Melbourne',\n  'Tokyo', 'Osaka', 'Seoul', 'Singapore', 'Hong Kong',\n  'Mumbai', 'Delhi', 'Bangalore', 'Dubai', 'Tel Aviv',\n  'Stockholm', 'Copenhagen', 'Amsterdam', 'Brussels', 'Zurich',\n  'Milan', 'Rome', 'Barcelona', 'Madrid', 'Lisbon'\n];\n\nconst countries = [\n  'USA', 'USA', 'USA', 'USA', 'USA',\n  'UK', 'UK', 'UK', 'UK', 'UK',\n  'France', 'France', 'Germany', 'Germany', 'Germany',\n  'Canada', 'Canada', 'Canada', 'Australia', 'Australia',\n  'Japan', 'Japan', 'South Korea', 'Singapore', 'China',\n  'India', 'India', 'India', 'UAE', 'Israel',\n  'Sweden', 'Denmark', 'Netherlands', 'Belgium', 'Switzerland',\n  'Italy', 'Italy', 'Spain', 'Spain', 'Portugal'\n];\n\n// Category-specific data\nconst categoryData = {\n  'Graphic Design': {\n    styles: ['Minimalist', 'Modern', 'Vintage', 'Retro', 'Abstract', 'Geometric', 'Hand-drawn', 'Corporate',\n             'Playful', 'Elegant', 'Bold', 'Organic', 'Grunge', 'Flat Design', 'Material Design'],\n    tools: ['Adobe Illustrator', 'Adobe Photoshop', 'Adobe InDesign', 'Sketch', 'Figma', 'Canva', 'CorelDRAW',\n            'Affinity Designer', 'Procreate', 'Adobe XD'],\n    industries: ['Fashion', 'Food & Beverage', 'Technology', 'Healthcare', 'Finance', 'Real Estate', 'Education',\n                 'Entertainment', 'Sports', 'Non-profit', 'Retail', 'Hospitality', 'Automotive', 'Beauty']\n  },\n  'Web Design': {\n    styles: ['Modern', 'Minimalist', 'Corporate', 'Creative', 'Dark Mode', 'Colorful', 'Brutalist',\n             'Neumorphic', 'Glassmorphism', 'Flat', 'Material Design', 'Swiss Design', 'Retro'],\n    tools: ['Figma', 'Adobe XD', 'Sketch', 'Webflow', 'WordPress', 'Elementor', 'Wix', 'Squarespace',\n            'VS Code', 'Chrome DevTools', 'Bootstrap', 'Tailwind CSS'],\n    industries: ['E-commerce', 'SaaS', 'Technology', 'Education', 'Healthcare', 'Finance', 'Real Estate',\n                 'Media', 'Non-profit', 'Consulting', 'Agency', 'Startups', 'Enterprise', 'Government']\n  },\n  'UI/UX Design': {\n    styles: ['Clean', 'Modern', 'Minimalist', 'Material Design', 'Human Interface', 'Flat Design',\n             'Skeuomorphic', 'Neumorphic', 'Dark UI', 'Colorful', 'Accessible', 'Data-Driven'],\n    tools: ['Figma', 'Sketch', 'Adobe XD', 'InVision', 'Principle', 'Framer', 'Maze', 'Hotjar',\n            'Miro', 'FigJam', 'Zeplin', 'Abstract', 'Marvel', 'Proto.io', 'Axure'],\n    industries: ['FinTech', 'HealthTech', 'EdTech', 'E-commerce', 'SaaS', 'Social Media', 'Gaming',\n                 'Travel', 'Food Delivery', 'Fitness', 'Entertainment', 'Productivity', 'Enterprise']\n  },\n  'Product Design': {\n    styles: ['Minimalist', 'Functional', 'Sustainable', 'Luxury', 'Industrial', 'Organic', 'Futuristic',\n             'Retro', 'Scandinavian', 'Bauhaus', 'Art Deco', 'Biomimicry', 'Modular'],\n    tools: ['SolidWorks', 'AutoCAD', 'Fusion 360', 'Rhino', 'KeyShot', 'Blender', 'SketchUp',\n            'Adobe Dimension', 'Cinema 4D', 'Substance 3D', 'ZBrush', 'Inventor'],\n    industries: ['Consumer Electronics', 'Furniture', 'Automotive', 'Medical Devices', 'Toys', 'Home Appliances',\n                 'Sports Equipment', 'Fashion Accessories', 'Packaging', 'IoT Devices', 'Wearables']\n  },\n  'Motion Design': {\n    styles: ['Flat Animation', '3D Realistic', 'Cartoon', 'Abstract', 'Minimalist', 'Retro', 'Glitch',\n             'Liquid Motion', 'Stop Motion', 'Isometric', 'Line Art', 'Cel Animation', 'Photo-realistic'],\n    tools: ['After Effects', 'Cinema 4D', 'Blender', 'Maya', 'Premiere Pro', 'DaVinci Resolve',\n            'Lottie', 'Principle', 'Cavalry', 'Nuke', 'Houdini', 'Substance 3D'],\n    industries: ['Film & TV', 'Advertising', 'Gaming', 'Social Media', 'Education', 'Corporate',\n                 'Music Industry', 'Sports', 'Technology', 'Healthcare', 'Finance', 'Non-profit']\n  },\n  'Interior Design': {\n    styles: ['Modern', 'Contemporary', 'Traditional', 'Scandinavian', 'Industrial', 'Minimalist', 'Bohemian',\n             'Mid-Century Modern', 'Farmhouse', 'Art Deco', 'Mediterranean', 'Japanese', 'Eclectic'],\n    tools: ['AutoCAD', 'SketchUp', 'Revit', '3ds Max', 'V-Ray', 'Lumion', 'Chief Architect',\n            'ArchiCAD', 'Rhino', 'Enscape', 'Corona Renderer', 'Photoshop'],\n    industries: ['Residential', 'Commercial', 'Hospitality', 'Retail', 'Healthcare', 'Education',\n                 'Corporate Offices', 'Restaurants', 'Hotels', 'Real Estate', 'Museums', 'Theaters']\n  }\n};\n\n// Bio templates\nconst bioTemplates = {\n  junior: [\n    \"Passionate {title} with {years} years of experience. I specialize in creating compelling designs that resonate with target audiences. Proficient in industry-standard tools and always eager to learn new techniques.\",\n    \"Creative professional with {years} years in design. Focused on delivering innovative solutions that meet client objectives. Strong attention to detail and commitment to quality.\",\n    \"Emerging designer with {years} years of experience. Dedicated to creating impactful visual solutions. Quick learner with strong communication skills.\"\n  ],\n  mid: [\n    \"Experienced designer with {years} years creating compelling visual solutions. I've worked with diverse clients across multiple industries, delivering projects that exceed expectations. Expert in modern design tools and methodologies.\",\n    \"Versatile design professional with {years} years of experience. Specialized in creating user-centered designs that drive results. Proven track record of successful project delivery.\",\n    \"Accomplished designer with {years} years delivering high-quality work. Focus on strategic design thinking and creative problem-solving. Strong collaboration skills and client-focused approach.\"\n  ],\n  senior: [\n    \"Award-winning designer with {years}+ years of experience leading major projects for Fortune 500 companies. Expert in design strategy and creative direction. Mentor to emerging designers and thought leader in the industry.\",\n    \"Senior design professional with {years} years of expertise. Led design teams for major brands and startups alike. Specialized in creating scalable design systems and brand identities.\",\n    \"Veteran designer with {years} years shaping visual experiences. Deep expertise in design thinking and innovation. Industry leader with a passion for pushing creative boundaries.\"\n  ]\n};\n\nfunction getRandomElement(array) {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction getRandomElements(array, count) {\n  const shuffled = [...array].sort(() => 0.5 - Math.random());\n  return shuffled.slice(0, count);\n}\n\nfunction getExperienceLevel(years) {\n  if (years <= 3) return 'junior';\n  if (years <= 10) return 'mid';\n  return 'senior';\n}\n\nfunction calculateHourlyRate(years, category) {\n  const baseRates = {\n    'Graphic Design': { min: 30, max: 150 },\n    'Web Design': { min: 40, max: 175 },\n    'UI/UX Design': { min: 50, max: 200 },\n    'Product Design': { min: 60, max: 225 },\n    'Motion Design': { min: 50, max: 200 },\n    'Interior Design': { min: 45, max: 175 }\n  };\n  \n  const { min, max } = baseRates[category];\n  const experienceMultiplier = Math.min(years / 20, 1);\n  const variance = Math.random() * 0.3 - 0.15;\n  \n  const rate = min + (max - min) * experienceMultiplier * (1 + variance);\n  return Math.round(rate / 5) * 5;\n}\n\nfunction generateBio(title, years) {\n  const level = getExperienceLevel(years);\n  const template = getRandomElement(bioTemplates[level]);\n  \n  return template\n    .replace('{title}', title)\n    .replace('{years}', years);\n}\n\nfunction generatePortfolioImages(designerId, category) {\n  const categorySeeds = {\n    'Graphic Design': ['abstract', 'design', 'color'],\n    'Web Design': ['tech', 'website', 'digital'],\n    'UI/UX Design': ['app', 'interface', 'mobile'],\n    'Product Design': ['product', 'object', 'minimal'],\n    'Motion Design': ['motion', 'dynamic', 'animation'],\n    'Interior Design': ['interior', 'architecture', 'room']\n  };\n  \n  const seeds = categorySeeds[category];\n  return [\n    `https://picsum.photos/seed/${seeds[0]}-${designerId}/800/600`,\n    `https://picsum.photos/seed/${seeds[1]}-${designerId}/800/600`,\n    `https://picsum.photos/seed/${seeds[2]}-${designerId}/800/600`\n  ];\n}\n\nfunction generateAvatar(firstName, lastName) {\n  const name = `${firstName}+${lastName}`;\n  const backgrounds = ['264653', '2a9d8f', 'e76f51', 'f4a261', 'e9c46a'];\n  const bg = getRandomElement(backgrounds);\n  return `https://ui-avatars.com/api/?name=${name}&background=${bg}&color=fff&size=200&bold=true`;\n}\n\nasync function generateDesigner(category, index) {\n  const gender = Math.random() > 0.5 ? 'male' : 'female';\n  const firstName = getRandomElement(firstNames[gender]);\n  const lastName = getRandomElement(lastNames);\n  const email = `${firstName.toLowerCase()}.${lastName.toLowerCase()}${Math.floor(Math.random() * 100)}@email.com`;\n  \n  const yearsExperience = Math.floor(Math.random() * 20) + 1;\n  const hourlyRate = calculateHourlyRate(yearsExperience, category);\n  \n  const catData = categoryData[category];\n  const styles = getRandomElements(catData.styles, Math.floor(Math.random() * 4) + 2);\n  const tools = getRandomElements(catData.tools, Math.floor(Math.random() * 4) + 2);\n  const industries = getRandomElements(catData.industries, Math.floor(Math.random() * 3) + 2);\n  \n  const title = `${getExperienceLevel(yearsExperience).charAt(0).toUpperCase() + getExperienceLevel(yearsExperience).slice(1)} ${category} Designer`;\n  const bio = generateBio(title, yearsExperience);\n  \n  const cityIndex = Math.floor(Math.random() * cities.length);\n  const city = cities[cityIndex];\n  const country = countries[cityIndex];\n  \n  const availability = getRandomElement(['available', 'busy', 'away']);\n  const responseTime = getRandomElement(['1 hour', '2 hours', '6 hours', '12 hours', '24 hours']);\n  \n  const portfolioImages = generatePortfolioImages(index, category);\n  const avatar = generateAvatar(firstName, lastName);\n  \n  const completedProjects = Math.floor(Math.random() * 100) + 10;\n  const rating = (4 + Math.random() * 1).toFixed(1);\n  \n  // Only include columns that exist in the base schema\n  return {\n    id: uuidv4(),\n    email,\n    first_name: firstName,\n    last_name: lastName,\n    last_initial: lastName.charAt(0).toUpperCase(),\n    title,\n    city,\n    country,\n    years_experience: yearsExperience,\n    rating: parseFloat(rating),\n    total_projects: completedProjects,\n    avatar_url: avatar,\n    phone: `+1${Math.floor(Math.random() * 9000000000) + 1000000000}`,\n    website_url: `https://portfolio.${firstName.toLowerCase()}${lastName.toLowerCase()}.com`,\n    linkedin_url: `https://linkedin.com/in/${firstName.toLowerCase()}-${lastName.toLowerCase()}`,\n    bio,\n    styles,\n    industries,\n    tools,\n    hourly_rate: hourlyRate,\n    availability,\n    response_time: responseTime,\n    timezone: getRandomElement(['PST', 'EST', 'CST', 'GMT', 'CET', 'JST', 'AEST']),\n    is_contactable: true,\n    hide_phone: Math.random() > 0.7,\n    is_verified: true,\n    subscription_tier: yearsExperience > 10 ? 'premium' : (yearsExperience > 5 ? 'pro' : 'free'),\n    created_at: new Date(Date.now() - Math.random() * 180 * 24 * 60 * 60 * 1000).toISOString(),\n    updated_at: new Date().toISOString()\n  };\n}\n\nasync function checkAndAddColumns() {\n  console.log('Checking and adding missing columns...');\n  \n  // Try to add columns that might be missing\n  const columnsToAdd = [\n    { name: 'is_approved', type: 'BOOLEAN DEFAULT false' },\n    { name: 'edited_after_approval', type: 'BOOLEAN DEFAULT false' },\n    { name: 'portfolio_url', type: 'VARCHAR(500)' },\n    { name: 'dribbble_url', type: 'VARCHAR(500)' },\n    { name: 'behance_url', type: 'VARCHAR(500)' },\n    { name: 'portfolio_images', type: 'TEXT[]' },\n    { name: 'portfolio_image_1', type: 'TEXT' },\n    { name: 'portfolio_image_2', type: 'TEXT' },\n    { name: 'portfolio_image_3', type: 'TEXT' }\n  ];\n  \n  for (const col of columnsToAdd) {\n    try {\n      // We'll try to add each column - if it exists, it will fail silently\n      const { error } = await supabase.rpc('exec_sql', {\n        query: `ALTER TABLE designers ADD COLUMN IF NOT EXISTS ${col.name} ${col.type}`\n      });\n      if (!error) {\n        console.log(`‚úì Added column ${col.name}`);\n      }\n    } catch (e) {\n      // Column might already exist, that's fine\n    }\n  }\n}\n\nasync function insertDesigners(designers) {\n  console.log(`"
    }
  ],
  "test/generate_designers.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js');\nconst { v4: uuidv4 } = require('uuid');\n\n// Supabase configuration\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co';\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyd2NodHd4cG5ybHB6a3N1cGdtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDQxNjM1OCwiZXhwIjoyMDY5OTkyMzU4fQ.etecMSfQ317vkouRXaMX3Jqg669kf5KL4pE08V03TV8';\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey);\n\n// Name pools for realistic diversity\nconst firstNames = {\n  male: ['James', 'John', 'Robert', 'Michael', 'David', 'William', 'Richard', 'Joseph', 'Thomas', 'Christopher', \n         'Daniel', 'Matthew', 'Anthony', 'Mark', 'Paul', 'Steven', 'Andrew', 'Kenneth', 'Joshua', 'Kevin',\n         'Carlos', 'Juan', 'Pedro', 'Luis', 'Miguel', 'Ahmed', 'Muhammad', 'Ali', 'Hassan', 'Omar',\n         'Hiroshi', 'Takeshi', 'Kenji', 'Chen', 'Wei', 'Zhang', 'Raj', 'Arjun', 'Priya', 'Dmitri'],\n  female: ['Mary', 'Patricia', 'Jennifer', 'Linda', 'Elizabeth', 'Barbara', 'Susan', 'Jessica', 'Sarah', 'Karen',\n           'Lisa', 'Nancy', 'Betty', 'Margaret', 'Sandra', 'Ashley', 'Kimberly', 'Emily', 'Donna', 'Michelle',\n           'Maria', 'Sofia', 'Ana', 'Carmen', 'Rosa', 'Fatima', 'Aisha', 'Zara', 'Layla', 'Noor',\n           'Yuki', 'Sakura', 'Mei', 'Lin', 'Xiao', 'Priya', 'Anjali', 'Deepa', 'Nina', 'Olga']\n};\n\nconst lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez',\n                   'Anderson', 'Taylor', 'Thomas', 'Moore', 'Jackson', 'Martin', 'Lee', 'Thompson', 'White', 'Harris',\n                   'Sanchez', 'Clark', 'Ramirez', 'Lewis', 'Robinson', 'Walker', 'Young', 'Allen', 'King', 'Wright',\n                   'Lopez', 'Hill', 'Scott', 'Green', 'Adams', 'Baker', 'Gonzalez', 'Nelson', 'Carter', 'Mitchell',\n                   'Nakamura', 'Yamamoto', 'Tanaka', 'Suzuki', 'Kim', 'Park', 'Chen', 'Wang', 'Singh', 'Patel',\n                   'Dubois', 'Muller', 'Schmidt', 'Petrov', 'Ivanov', 'Novak', 'Kowalski', 'Andersson', 'Nielsen', 'Silva'];\n\nconst cities = [\n  'New York, USA', 'Los Angeles, USA', 'Chicago, USA', 'Houston, USA', 'Phoenix, USA',\n  'London, UK', 'Manchester, UK', 'Birmingham, UK', 'Edinburgh, UK', 'Bristol, UK',\n  'Paris, France', 'Lyon, France', 'Berlin, Germany', 'Munich, Germany', 'Hamburg, Germany',\n  'Toronto, Canada', 'Vancouver, Canada', 'Montreal, Canada', 'Sydney, Australia', 'Melbourne, Australia',\n  'Tokyo, Japan', 'Osaka, Japan', 'Seoul, South Korea', 'Singapore', 'Hong Kong',\n  'Mumbai, India', 'Delhi, India', 'Bangalore, India', 'Dubai, UAE', 'Tel Aviv, Israel',\n  'Stockholm, Sweden', 'Copenhagen, Denmark', 'Amsterdam, Netherlands', 'Brussels, Belgium', 'Zurich, Switzerland',\n  'Milan, Italy', 'Rome, Italy', 'Barcelona, Spain', 'Madrid, Spain', 'Lisbon, Portugal'\n];\n\nconst languages = ['English', 'Spanish', 'French', 'German', 'Italian', 'Portuguese', 'Dutch', 'Swedish', \n                   'Japanese', 'Korean', 'Mandarin', 'Arabic', 'Hindi', 'Russian', 'Polish'];\n\n// Category-specific data\nconst categoryData = {\n  'Graphic Design': {\n    specialties: ['Logo Design', 'Brand Identity', 'Print Design', 'Packaging Design', 'Typography', 'Illustration',\n                  'Poster Design', 'Business Cards', 'Brochure Design', 'Social Media Graphics', 'Infographics',\n                  'Book Cover Design', 'Magazine Layout', 'Label Design', 'Signage Design'],\n    tools: ['Adobe Illustrator', 'Adobe Photoshop', 'Adobe InDesign', 'Sketch', 'Figma', 'Canva', 'CorelDRAW',\n            'Affinity Designer', 'Procreate', 'Adobe XD'],\n    industries: ['Fashion', 'Food & Beverage', 'Technology', 'Healthcare', 'Finance', 'Real Estate', 'Education',\n                 'Entertainment', 'Sports', 'Non-profit', 'Retail', 'Hospitality', 'Automotive', 'Beauty'],\n    styles: ['Minimalist', 'Modern', 'Vintage', 'Retro', 'Abstract', 'Geometric', 'Hand-drawn', 'Corporate',\n             'Playful', 'Elegant', 'Bold', 'Organic', 'Grunge', 'Flat Design', 'Material Design'],\n    projectTypes: ['Logo Design', 'Brand Guidelines', 'Marketing Materials', 'Packaging', 'Print Ads', 'Digital Ads']\n  },\n  'Web Design': {\n    specialties: ['Responsive Design', 'E-commerce', 'Landing Pages', 'WordPress', 'Shopify', 'Webflow',\n                  'HTML/CSS', 'JavaScript', 'React', 'Vue.js', 'SEO Optimization', 'Web Accessibility',\n                  'CMS Development', 'Blog Design', 'Portfolio Sites'],\n    tools: ['Figma', 'Adobe XD', 'Sketch', 'Webflow', 'WordPress', 'Elementor', 'Wix', 'Squarespace',\n            'VS Code', 'Chrome DevTools', 'Bootstrap', 'Tailwind CSS'],\n    industries: ['E-commerce', 'SaaS', 'Technology', 'Education', 'Healthcare', 'Finance', 'Real Estate',\n                 'Media', 'Non-profit', 'Consulting', 'Agency', 'Startups', 'Enterprise', 'Government'],\n    styles: ['Modern', 'Minimalist', 'Corporate', 'Creative', 'Dark Mode', 'Colorful', 'Brutalist',\n             'Neumorphic', 'Glassmorphism', 'Flat', 'Material Design', 'Swiss Design', 'Retro'],\n    projectTypes: ['Corporate Website', 'E-commerce Site', 'Landing Page', 'Web App', 'Blog', 'Portfolio']\n  },\n  'UI/UX Design': {\n    specialties: ['User Research', 'Wireframing', 'Prototyping', 'Usability Testing', 'Information Architecture',\n                  'Interaction Design', 'Visual Design', 'Design Systems', 'Mobile App Design', 'Web App Design',\n                  'Dashboard Design', 'User Flow', 'Journey Mapping', 'Persona Development', 'A/B Testing'],\n    tools: ['Figma', 'Sketch', 'Adobe XD', 'InVision', 'Principle', 'Framer', 'Maze', 'Hotjar',\n            'Miro', 'FigJam', 'Zeplin', 'Abstract', 'Marvel', 'Proto.io', 'Axure'],\n    industries: ['FinTech', 'HealthTech', 'EdTech', 'E-commerce', 'SaaS', 'Social Media', 'Gaming',\n                 'Travel', 'Food Delivery', 'Fitness', 'Entertainment', 'Productivity', 'Enterprise'],\n    styles: ['Clean', 'Modern', 'Minimalist', 'Material Design', 'Human Interface', 'Flat Design',\n             'Skeuomorphic', 'Neumorphic', 'Dark UI', 'Colorful', 'Accessible', 'Data-Driven'],\n    projectTypes: ['Mobile App', 'Web Application', 'Dashboard', 'Design System', 'SaaS Platform', 'Redesign']\n  },\n  'Product Design': {\n    specialties: ['Industrial Design', 'Packaging Design', 'Consumer Products', '3D Modeling', 'CAD Design',\n                  'Prototyping', 'Manufacturing', 'Sustainable Design', 'Ergonomics', 'Material Selection',\n                  'Product Strategy', 'Design for Manufacturing', 'Concept Development', 'User Testing'],\n    tools: ['SolidWorks', 'AutoCAD', 'Fusion 360', 'Rhino', 'KeyShot', 'Blender', 'SketchUp',\n            'Adobe Dimension', 'Cinema 4D', 'Substance 3D', 'ZBrush', 'Inventor'],\n    industries: ['Consumer Electronics', 'Furniture', 'Automotive', 'Medical Devices', 'Toys', 'Home Appliances',\n                 'Sports Equipment', 'Fashion Accessories', 'Packaging', 'IoT Devices', 'Wearables'],\n    styles: ['Minimalist', 'Functional', 'Sustainable', 'Luxury', 'Industrial', 'Organic', 'Futuristic',\n             'Retro', 'Scandinavian', 'Bauhaus', 'Art Deco', 'Biomimicry', 'Modular'],\n    projectTypes: ['Consumer Product', 'Packaging', 'Furniture', 'Electronics', 'Medical Device', 'Toy Design']\n  },\n  'Motion Design': {\n    specialties: ['2D Animation', '3D Animation', 'Character Animation', 'Logo Animation', 'Explainer Videos',\n                  'Title Sequences', 'Infographic Animation', 'UI Animation', 'VFX', 'Compositing',\n                  'Kinetic Typography', 'Particle Effects', 'Motion Tracking', 'Rotoscoping'],\n    tools: ['After Effects', 'Cinema 4D', 'Blender', 'Maya', 'Premiere Pro', 'DaVinci Resolve',\n            'Lottie', 'Principle', 'Cavalry', 'Nuke', 'Houdini', 'Substance 3D'],\n    industries: ['Film & TV', 'Advertising', 'Gaming', 'Social Media', 'Education', 'Corporate',\n                 'Music Industry', 'Sports', 'Technology', 'Healthcare', 'Finance', 'Non-profit'],\n    styles: ['Flat Animation', '3D Realistic', 'Cartoon', 'Abstract', 'Minimalist', 'Retro', 'Glitch',\n             'Liquid Motion', 'Stop Motion', 'Isometric', 'Line Art', 'Cel Animation', 'Photo-realistic'],\n    projectTypes: ['Explainer Video', 'Logo Animation', 'Social Media Content', 'Title Sequence', 'Commercial', 'Music Video']\n  },\n  'Interior Design': {\n    specialties: ['Residential Design', 'Commercial Design', 'Space Planning', 'Color Consultation', 'Furniture Selection',\n                  'Lighting Design', 'Kitchen Design', 'Bathroom Design', 'Office Design', 'Retail Design',\n                  'Restaurant Design', 'Hotel Design', 'Sustainable Design', 'Historic Preservation'],\n    tools: ['AutoCAD', 'SketchUp', 'Revit', '3ds Max', 'V-Ray', 'Lumion', 'Chief Architect',\n            'ArchiCAD', 'Rhino', 'Enscape', 'Corona Renderer', 'Photoshop'],\n    industries: ['Residential', 'Commercial', 'Hospitality', 'Retail', 'Healthcare', 'Education',\n                 'Corporate Offices', 'Restaurants', 'Hotels', 'Real Estate', 'Museums', 'Theaters'],\n    styles: ['Modern', 'Contemporary', 'Traditional', 'Scandinavian', 'Industrial', 'Minimalist', 'Bohemian',\n             'Mid-Century Modern', 'Farmhouse', 'Art Deco', 'Mediterranean', 'Japanese', 'Eclectic'],\n    projectTypes: ['Home Renovation', 'Office Space', 'Retail Store', 'Restaurant', 'Hotel Suite', 'Exhibition Design']\n  }\n};\n\n// Bio templates based on experience level\nconst bioTemplates = {\n  junior: [\n    \"Passionate {category} designer with {years} years of experience. Specialized in {specialty1} and {specialty2}. Proficient in {tool1} and {tool2}. Eager to bring fresh perspectives to your projects.\",\n    \"Creative {category} professional with {years} years in the field. Focus on {specialty1} and {specialty2}. Skilled in {tool1}, {tool2}, and {tool3}. Committed to delivering innovative solutions.\",\n    \"Emerging {category} designer with {years} years of experience. Expertise in {specialty1} and {specialty2}. Proficient with {tool1} and {tool2}. Dedicated to creating impactful designs.\"\n  ],\n  mid: [\n    \"Experienced {category} designer with {years} years creating compelling designs for {industry1} and {industry2}. Expert in {specialty1}, {specialty2}, and {specialty3}. Proficient in {tool1}, {tool2}, and {tool3}.\",\n    \"Versatile {category} professional with {years} years of experience across {industry1}, {industry2}, and {industry3}. Specialized in {specialty1} and {specialty2}. Advanced skills in {tool1} and {tool2}.\",\n    \"Accomplished {category} designer with {years} years delivering high-quality work. Focus on {specialty1}, {specialty2}, and {specialty3}. Expert user of {tool1}, {tool2}, and {tool3}. Proven track record in {industry1} and {industry2}.\"\n  ],\n  senior: [\n    \"Award-winning {category} designer with {years}+ years of experience leading projects for Fortune 500 companies. Expert in {specialty1}, {specialty2}, and {specialty3}. Master of {tool1}, {tool2}, and {tool3}. Specialized in {industry1} and {industry2} sectors.\",\n    \"Senior {category} professional with {years} years of expertise. Led design teams for major brands in {industry1} and {industry2}. Specialized in {specialty1}, {specialty2}, and {specialty3}. Advanced proficiency in entire {tool1} suite.\",\n    \"Veteran {category} designer with {years} years shaping visual experiences. Deep expertise in {specialty1} and {specialty2}. Industry leader in {industry1} and {industry2}. Mentor and thought leader in the design community.\"\n  ]\n};\n\nfunction getRandomElement(array) {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction getRandomElements(array, count) {\n  const shuffled = [...array].sort(() => 0.5 - Math.random());\n  return shuffled.slice(0, count);\n}\n\nfunction getExperienceLevel(years) {\n  if (years <= 3) return 'junior';\n  if (years <= 10) return 'mid';\n  return 'senior';\n}\n\nfunction calculateHourlyRate(years, category) {\n  const baseRates = {\n    'Graphic Design': { min: 30, max: 150 },\n    'Web Design': { min: 40, max: 175 },\n    'UI/UX Design': { min: 50, max: 200 },\n    'Product Design': { min: 60, max: 225 },\n    'Motion Design': { min: 50, max: 200 },\n    'Interior Design': { min: 45, max: 175 }\n  };\n  \n  const { min, max } = baseRates[category];\n  const experienceMultiplier = Math.min(years / 20, 1); // Max out at 20 years\n  const variance = Math.random() * 0.3 - 0.15; // ¬±15% variance\n  \n  const rate = min + (max - min) * experienceMultiplier * (1 + variance);\n  return Math.round(rate / 5) * 5; // Round to nearest $5\n}\n\nfunction generateBio(category, years, specialties, tools, industries) {\n  const level = getExperienceLevel(years);\n  const template = getRandomElement(bioTemplates[level]);\n  \n  return template\n    .replace('{category}', category)\n    .replace('{years}', years)\n    .replace('{specialty1}', specialties[0])\n    .replace('{specialty2}', specialties[1])\n    .replace('{specialty3}', specialties[2] || specialties[0])\n    .replace('{tool1}', tools[0])\n    .replace('{tool2}', tools[1])\n    .replace('{tool3}', tools[2] || tools[0])\n    .replace('{industry1}', industries[0])\n    .replace('{industry2}', industries[1])\n    .replace('{industry3}', industries[2] || industries[0]);\n}\n\nfunction generatePortfolioImages(designerId, category) {\n  // Using Lorem Picsum for realistic placeholder images\n  const categorySeeds = {\n    'Graphic Design': ['abstract', 'design', 'color'],\n    'Web Design': ['tech', 'website', 'digital'],\n    'UI/UX Design': ['app', 'interface', 'mobile'],\n    'Product Design': ['product', 'object', 'minimal'],\n    'Motion Design': ['motion', 'dynamic', 'animation'],\n    'Interior Design': ['interior', 'architecture', 'room']\n  };\n  \n  const seeds = categorySeeds[category];\n  return [\n    `https://picsum.photos/seed/${seeds[0]}-${designerId}/800/600`,\n    `https://picsum.photos/seed/${seeds[1]}-${designerId}/800/600`,\n    `https://picsum.photos/seed/${seeds[2]}-${designerId}/800/600`\n  ];\n}\n\nfunction generateAvatar(firstName, lastName) {\n  // Using UI Avatars service for realistic avatar placeholders\n  const name = `${firstName}+${lastName}`;\n  const backgrounds = ['264653', '2a9d8f', 'e76f51', 'f4a261', 'e9c46a'];\n  const bg = getRandomElement(backgrounds);\n  return `https://ui-avatars.com/api/?name=${name}&background=${bg}&color=fff&size=200&bold=true`;\n}\n\nasync function generateDesigner(category, index) {\n  const gender = Math.random() > 0.5 ? 'male' : 'female';\n  const firstName = getRandomElement(firstNames[gender]);\n  const lastName = getRandomElement(lastNames);\n  const email = `${firstName.toLowerCase()}.${lastName.toLowerCase()}${Math.floor(Math.random() * 100)}@email.com`;\n  \n  const yearsExperience = Math.floor(Math.random() * 20) + 1;\n  const hourlyRate = calculateHourlyRate(yearsExperience, category);\n  \n  const catData = categoryData[category];\n  const specialties = getRandomElements(catData.specialties, Math.floor(Math.random() * 3) + 2);\n  const tools = getRandomElements(catData.tools, Math.floor(Math.random() * 4) + 2);\n  const industries = getRandomElements(catData.industries, Math.floor(Math.random() * 3) + 2);\n  const styles = getRandomElements(catData.styles, Math.floor(Math.random() * 4) + 2);\n  const projectTypes = getRandomElements(catData.projectTypes, Math.floor(Math.random() * 3) + 2);\n  \n  const bio = generateBio(category, yearsExperience, specialties, tools, industries);\n  const location = getRandomElement(cities);\n  const locationParts = location.split(', ');\n  const city = locationParts[0] || 'New York';\n  const country = locationParts[1] || 'USA';\n  const userLanguages = ['English'].concat(getRandomElements(languages.filter(l => l !== 'English'), Math.floor(Math.random() * 2) + 1));\n  \n  const availability = getRandomElement(['immediate', '1_week', '2_weeks', '1_month']);\n  const responseTime = getRandomElement(['1_hour', '2_hours', '6_hours', '12_hours', '24_hours']);\n  const preferredProjectSize = getRandomElement(['small', 'medium', 'large', 'any']);\n  \n  const portfolioImages = generatePortfolioImages(index, category);\n  const avatar = generateAvatar(firstName, lastName);\n  \n  // Generate realistic ratings\n  const completedProjects = Math.floor(Math.random() * 100) + 10;\n  const rating = (4 + Math.random() * 1).toFixed(1); // 4.0 to 5.0\n  \n  // Map to actual database columns based on schema\n  return {\n    id: uuidv4(),\n    email,\n    first_name: firstName,\n    last_name: lastName,\n    last_initial: lastName.charAt(0).toUpperCase(),\n    title: `${getExperienceLevel(yearsExperience).charAt(0).toUpperCase() + getExperienceLevel(yearsExperience).slice(1)} ${category} Designer`,\n    city,\n    country,\n    years_experience: yearsExperience,\n    rating: parseFloat(rating),\n    total_projects: completedProjects,\n    avatar_url: avatar,\n    phone: `+1${Math.floor(Math.random() * 9000000000) + 1000000000}`,\n    website_url: `https://portfolio.${firstName.toLowerCase()}${lastName.toLowerCase()}.com`,\n    linkedin_url: `https://linkedin.com/in/${firstName.toLowerCase()}-${lastName.toLowerCase()}`,\n    bio,\n    styles,\n    industries,\n    tools,\n    hourly_rate: hourlyRate,\n    availability,\n    response_time: responseTime,\n    timezone: getRandomElement(['PST', 'EST', 'CST', 'GMT', 'CET', 'JST', 'AEST']),\n    is_contactable: true,\n    hide_phone: Math.random() > 0.7,\n    is_verified: true,\n    is_approved: true,\n    edited_after_approval: false,\n    subscription_tier: yearsExperience > 10 ? 'premium' : (yearsExperience > 5 ? 'pro' : 'free'),\n    // Additional fields that might exist (will be added only if column exists)\n    portfolio_url: `https://portfolio.${firstName.toLowerCase()}${lastName.toLowerCase()}.com`,\n    dribbble_url: Math.random() > 0.5 ? `https://dribbble.com/${firstName.toLowerCase()}${lastName.toLowerCase()}` : null,\n    behance_url: Math.random() > 0.5 ? `https://behance.net/${firstName.toLowerCase()}${lastName.toLowerCase()}` : null,\n    portfolio_images: portfolioImages,\n    portfolio_image_1: portfolioImages[0],\n    portfolio_image_2: portfolioImages[1],\n    portfolio_image_3: portfolioImages[2],\n    specializations: specialties,\n    project_types: projectTypes,\n    preferred_project_size: preferredProjectSize,\n    communication_style: getRandomElement(['formal', 'casual', 'collaborative']),\n    created_at: new Date(Date.now() - Math.random() * 180 * 24 * 60 * 60 * 1000).toISOString(),\n    updated_at: new Date().toISOString()\n  };\n}\n\nasync function insertDesigners(designers) {\n  console.log(`"
    }
  ],
  "test/final_image_test.js": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "');\n  \n  const matchId = 'd4a262ed-7dff-47e0-92ba-7a3be2cd8236';\n  const productionUrl = `https://onedesigner2-buw7fqa9c-onedesigners-projects.vercel.app/client/match/${matchId}`;\n  \n  console.log('üåê Test URL (after Next.js Image fix):');\n  console.log(productionUrl);\n  console.log('');\n  \n  console.log('‚úÖ **FIXES APPLIED:**');\n  console.log('1. ‚úÖ Fixed API field mapping (snake_case ‚Üí camelCase)');\n  console.log('   - first_name ‚Üí firstName');\n  console.log('   - last_name ‚Üí lastName');\n  console.log('   - years_experience ‚Üí yearsExperience');\n  console.log('   - total_projects ‚Üí totalProjects');\n  console.log('');\n  \n  console.log('2. ‚úÖ Added portfolio images API integration');\n  console.log('   - API now fetches from designer_portfolio_images table');\n  console.log('   - Falls back to generated Picsum images if no uploads');\n  console.log('   - Includes project titles and descriptions');\n  console.log('');\n  \n  console.log('3. ‚úÖ Switched to Next.js Image component');\n  console.log('   - Replaced <img> tags with <Image>');\n  console.log('   - Added unoptimized={true} for external URLs');\n  console.log('   - Added priority={true} for avatar loading');\n  console.log('   - Better error handling and loading');\n  console.log('');\n  \n  console.log('4. ‚úÖ Verified all data sources');\n  console.log('   - Avatar URLs: ui-avatars.com (working ‚úÖ)');\n  console.log('   - Portfolio URLs: picsum.photos (working ‚úÖ)');\n  console.log('   - Database fields: all mapped correctly ‚úÖ');\n  console.log('   - API response: proper structure ‚úÖ');\n  console.log('');\n  \n  // Test avatar URL one more time\n  const avatarUrl = 'https://ui-avatars.com/api/?name=Muhammad+Garcia&background=e9c46a&color=fff&size=200&bold=true';\n  console.log('üñºÔ∏è  Testing avatar URL one final time...');\n  try {\n    const response = await fetch(avatarUrl);\n    console.log(`Status: ${response.status} ${response.statusText}`);\n    console.log(`Content-Type: ${response.headers.get('content-type')}`);\n    \n    if (response.ok) {\n      console.log('‚úÖ Avatar URL is still accessible');\n    } else {\n      console.log('‚ùå Avatar URL issue detected');\n    }\n  } catch (error) {\n    console.error('‚ùå Network error:', error.message);\n  }\n  \n  console.log('"
    },
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 2,
      "context": "');\n  \n  const matchId = 'd4a262ed-7dff-47e0-92ba-7a3be2cd8236';\n  const productionUrl = `https://onedesigner2-buw7fqa9c-onedesigners-projects.vercel.app/client/match/${matchId}`;\n  \n  console.log('üåê Test URL (after Next.js Image fix):');\n  console.log(productionUrl);\n  console.log('');\n  \n  console.log('‚úÖ **FIXES APPLIED:**');\n  console.log('1. ‚úÖ Fixed API field mapping (snake_case ‚Üí camelCase)');\n  console.log('   - first_name ‚Üí firstName');\n  console.log('   - last_name ‚Üí lastName');\n  console.log('   - years_experience ‚Üí yearsExperience');\n  console.log('   - total_projects ‚Üí totalProjects');\n  console.log('');\n  \n  console.log('2. ‚úÖ Added portfolio images API integration');\n  console.log('   - API now fetches from designer_portfolio_images table');\n  console.log('   - Falls back to generated Picsum images if no uploads');\n  console.log('   - Includes project titles and descriptions');\n  console.log('');\n  \n  console.log('3. ‚úÖ Switched to Next.js Image component');\n  console.log('   - Replaced <img> tags with <Image>');\n  console.log('   - Added unoptimized={true} for external URLs');\n  console.log('   - Added priority={true} for avatar loading');\n  console.log('   - Better error handling and loading');\n  console.log('');\n  \n  console.log('4. ‚úÖ Verified all data sources');\n  console.log('   - Avatar URLs: ui-avatars.com (working ‚úÖ)');\n  console.log('   - Portfolio URLs: picsum.photos (working ‚úÖ)');\n  console.log('   - Database fields: all mapped correctly ‚úÖ');\n  console.log('   - API response: proper structure ‚úÖ');\n  console.log('');\n  \n  // Test avatar URL one more time\n  const avatarUrl = 'https://ui-avatars.com/api/?name=Muhammad+Garcia&background=e9c46a&color=fff&size=200&bold=true';\n  console.log('üñºÔ∏è  Testing avatar URL one final time...');\n  try {\n    const response = await fetch(avatarUrl);\n    console.log(`Status: ${response.status} ${response.statusText}`);\n    console.log(`Content-Type: ${response.headers.get('content-type')}`);\n    \n    if (response.ok) {\n      console.log('‚úÖ Avatar URL is still accessible');\n    } else {\n      console.log('‚ùå Avatar URL issue detected');\n    }\n  } catch (error) {\n    console.error('‚ùå Network error:', error.message);\n  }\n  \n  console.log('"
    }
  ],
  "test/final-migration-approach.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 7,
      "context": "üîó Go to: https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql');\n  console.log('"
    }
  ],
  "test/debug_match_data.js": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 7,
      "context": "üîÑ Testing API Endpoint...');\n  try {\n    const apiResponse = await fetch(`http://localhost:3000/api/client/matches/${match.id}`);\n    if (apiResponse.ok) {\n      const apiData = await apiResponse.json();\n      console.log('API Response (abbreviated):');\n      console.log('Match ID:', apiData.match?.id);\n      console.log('Designer Name:', apiData.match?.designer?.firstName, apiData.match?.designer?.lastName);\n      console.log('Avatar URL:', apiData.match?.designer?.avatar_url);\n      console.log('Designer Object Keys:', Object.keys(apiData.match?.designer || {}));\n    } else {\n      console.log('API Response Status:', apiResponse.status);\n    }\n  } catch (error) {\n    console.error('API test failed:', error.message);\n  }\n}\n\ndebugMatchData().catch(console.error);"
    }
  ],
  "test/debug_browser_rendering.js": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 6,
      "context": "');\n    \n    console.log('üåê **Test URLs to check manually in browser:**');\n    console.log('Avatar: https://ui-avatars.com/api/?name=Muhammad+Garcia&background=e9c46a&color=fff&size=200&bold=true');\n    console.log('Portfolio: https://picsum.photos/seed/abstract1-c2a4bbe1-58d7-41ea-ac2d-1b46af219bed/800/600');\n    \n  } catch (error) {\n    console.error('Error:', error.message);\n  }\n}\n\ndebugBrowserRendering().catch(console.error);"
    }
  ],
  "test/create_real_test_designer.js": [
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 2,
      "context": "üìß Sending updated rejection email with valid token...')\n    \n    const updateApplicationUrl = `https://onedesigner2-n84w5crhh-onedesigners-projects.vercel.app/designer/update-application?token=${updateToken}`\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear Test Designer,</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${rejectionReason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner (WORKING LINK)',\n        html: emailHtml,\n        text: `Application Update Required"
    },
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\nimport crypto from 'crypto'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function createRealTestDesigner() {\n  console.log('üîß Creating real test designer with valid update token...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    const updateToken = crypto.randomBytes(32).toString('hex')\n    const tokenExpiry = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n    const rejectionReason = 'Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.'\n    \n    // Check if designer exists\n    const { data: existingDesigner, error: findError } = await supabase\n      .from('designers')\n      .select('id, email')\n      .eq('email', testEmail)\n      .single()\n    \n    if (existingDesigner) {\n      // Update existing designer\n      const { data: updatedDesigner, error: updateError } = await supabase\n        .from('designers')\n        .update({\n          update_token: updateToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: rejectionReason,\n          is_approved: false\n        })\n        .eq('id', existingDesigner.id)\n        .select('*')\n        .single()\n      \n      if (updateError) {\n        console.error('‚ùå Failed to update existing designer:', updateError)\n        return\n      }\n      \n      console.log('‚úÖ Updated existing designer with update token')\n      console.log('üîó Update URL:', `https://onedesigner2-n84w5crhh-onedesigners-projects.vercel.app/designer/update-application?token=${updateToken}`)\n      \n    } else {\n      // Create new designer\n      const { data: newDesigner, error: createError } = await supabase\n        .from('designers')\n        .insert({\n          email: testEmail,\n          first_name: 'Test',\n          last_name: 'Designer',\n          last_initial: 'D',\n          title: 'UI/UX Designer',\n          city: 'Test City',\n          country: 'Test Country',\n          years_experience: '3-5 years',\n          bio: 'I am a passionate designer with experience in web and mobile design.',\n          styles: ['Modern', 'Minimalist'],\n          industries: ['Technology', 'E-commerce'],\n          project_price_from: 1000,\n          project_price_to: 5000,\n          availability: 'Available',\n          website_url: 'https://testdesigner.com',\n          portfolio_url: 'https://behance.net/testdesigner',\n          update_token: updateToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: rejectionReason,\n          is_approved: false,\n          is_verified: true,\n          created_at: new Date().toISOString()\n        })\n        .select('*')\n        .single()\n      \n      if (createError) {\n        console.error('‚ùå Failed to create test designer:', createError)\n        return\n      }\n      \n      console.log('‚úÖ Created new test designer with update token')\n      console.log('üîó Update URL:', `https://onedesigner2-n84w5crhh-onedesigners-projects.vercel.app/designer/update-application?token=${updateToken}`)\n    }\n    \n    // Send the updated email with the real token\n    console.log('"
    },
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\nimport crypto from 'crypto'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function createRealTestDesigner() {\n  console.log('üîß Creating real test designer with valid update token...')\n  \n  try {\n    const testEmail = 'designbattlefield@gmail.com'\n    const updateToken = crypto.randomBytes(32).toString('hex')\n    const tokenExpiry = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n    const rejectionReason = 'Please update your portfolio section to include more recent work samples (within the last 2 years) and add detailed case studies for at least 3 projects. Also, ensure your bio clearly describes your design process and unique value proposition.'\n    \n    // Check if designer exists\n    const { data: existingDesigner, error: findError } = await supabase\n      .from('designers')\n      .select('id, email')\n      .eq('email', testEmail)\n      .single()\n    \n    if (existingDesigner) {\n      // Update existing designer\n      const { data: updatedDesigner, error: updateError } = await supabase\n        .from('designers')\n        .update({\n          update_token: updateToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: rejectionReason,\n          is_approved: false\n        })\n        .eq('id', existingDesigner.id)\n        .select('*')\n        .single()\n      \n      if (updateError) {\n        console.error('‚ùå Failed to update existing designer:', updateError)\n        return\n      }\n      \n      console.log('‚úÖ Updated existing designer with update token')\n      console.log('üîó Update URL:', `https://onedesigner2-n84w5crhh-onedesigners-projects.vercel.app/designer/update-application?token=${updateToken}`)\n      \n    } else {\n      // Create new designer\n      const { data: newDesigner, error: createError } = await supabase\n        .from('designers')\n        .insert({\n          email: testEmail,\n          first_name: 'Test',\n          last_name: 'Designer',\n          last_initial: 'D',\n          title: 'UI/UX Designer',\n          city: 'Test City',\n          country: 'Test Country',\n          years_experience: '3-5 years',\n          bio: 'I am a passionate designer with experience in web and mobile design.',\n          styles: ['Modern', 'Minimalist'],\n          industries: ['Technology', 'E-commerce'],\n          project_price_from: 1000,\n          project_price_to: 5000,\n          availability: 'Available',\n          website_url: 'https://testdesigner.com',\n          portfolio_url: 'https://behance.net/testdesigner',\n          update_token: updateToken,\n          update_token_expires: tokenExpiry,\n          rejection_reason: rejectionReason,\n          is_approved: false,\n          is_verified: true,\n          created_at: new Date().toISOString()\n        })\n        .select('*')\n        .single()\n      \n      if (createError) {\n        console.error('‚ùå Failed to create test designer:', createError)\n        return\n      }\n      \n      console.log('‚úÖ Created new test designer with update token')\n      console.log('üîó Update URL:', `https://onedesigner2-n84w5crhh-onedesigners-projects.vercel.app/designer/update-application?token=${updateToken}`)\n    }\n    \n    // Send the updated email with the real token\n    console.log('"
    },
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 2,
      "context": "üìß Sending updated rejection email with valid token...')\n    \n    const updateApplicationUrl = `https://onedesigner2-n84w5crhh-onedesigners-projects.vercel.app/designer/update-application?token=${updateToken}`\n    \n    const emailHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Application Update Required</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <div style=\"background-color: #f5f5f5; padding: 40px 20px;\">\n    <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n      <!-- Header -->\n      <div style=\"background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); padding: 40px 30px; text-align: center;\">\n        <div style=\"display: inline-block; width: 60px; height: 60px; background-color: white; border-radius: 50%; padding: 15px; margin-bottom: 20px;\">\n          <svg viewBox=\"0 0 100 100\" style=\"width: 100%; height: 100%;\">\n            <circle cx=\"50\" cy=\"50\" r=\"8\" fill=\"#f0ad4e\"/>\n            <circle cx=\"50\" cy=\"30\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"50\" cy=\"70\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"30\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"70\" cy=\"50\" r=\"5\" fill=\"#f0ad4e\" opacity=\"0.7\"/>\n            <circle cx=\"35\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"35\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"35\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <circle cx=\"65\" cy=\"65\" r=\"4\" fill=\"#f0ad4e\" opacity=\"0.5\"/>\n            <line x1=\"50\" y1=\"30\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"70\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"30\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n            <line x1=\"50\" y1=\"50\" x2=\"70\" y2=\"50\" stroke=\"#f0ad4e\" stroke-width=\"1\" opacity=\"0.3\"/>\n          </svg>\n        </div>\n        <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 600;\">Application Update Required</h1>\n      </div>\n      \n      <!-- Content -->\n      <div style=\"padding: 40px 30px;\">\n        <p style=\"color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px;\">Dear Test Designer,</p>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">Thank you for your interest in joining OneDesigner. After careful review of your application, we need you to update certain aspects of your profile to better showcase your expertise.</p>\n        \n        <!-- Feedback Section -->\n        <div style=\"background-color: #fff8e1; border-left: 4px solid #f0ad4e; padding: 20px; margin: 30px 0; border-radius: 4px;\">\n          <h3 style=\"color: #333; margin: 0 0 10px; font-size: 16px; font-weight: 600;\">Feedback from our team:</h3>\n          <p style=\"color: #555; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">${rejectionReason}</p>\n        </div>\n        \n        <p style=\"color: #555; font-size: 15px; line-height: 1.6; margin: 0 0 30px;\">We believe in your potential and would love to see an updated application that better reflects your capabilities. Your previous application data has been saved, so you can easily update only the sections that need improvement.</p>\n        \n        <!-- CTA Button -->\n        <div style=\"text-align: center; margin: 40px 0;\">\n          <a href=\"${updateApplicationUrl}\" style=\"display: inline-block; background: linear-gradient(135deg, #f0ad4e 0%, #ff9933 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 6px rgba(240, 173, 78, 0.3); transition: transform 0.2s;\">Update Your Application</a>\n        </div>\n        \n        <p style=\"color: #888; font-size: 13px; line-height: 1.5; margin: 30px 0 0; text-align: center;\">This update link will expire in 7 days. If you need more time or have any questions, please contact our support team.</p>\n      </div>\n      \n      <!-- Footer -->\n      <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n        <p style=\"color: #6c757d; font-size: 14px; margin: 0 0 10px;\">Best regards,<br><strong>The OneDesigner Team</strong></p>\n        <p style=\"color: #adb5bd; font-size: 12px; margin: 10px 0 0;\">¬© 2025 OneDesigner. All rights reserved.</p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n    `\n    \n    // Send email using Resend API\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer re_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: 'OneDesigner <team@onedesigner.app>',\n        to: 'designbattlefield@gmail.com',\n        subject: 'Application Update Required - OneDesigner (WORKING LINK)',\n        html: emailHtml,\n        text: `Application Update Required"
    }
  ],
  "test/create-test-designer-complete.js": [
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js');\n\nconst supabase = createClient(\n  'https://frwchtwxpnrlpzksupgm.supabase.co',\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n);\n\nasync function createTestDesigner() {\n  // Create a complete test designer with all fields from centralized config\n  const testDesigner = {\n    email: `test-designer-${Date.now()}@example.com`,\n    first_name: 'Alex',\n    last_name: 'TestDesigner',\n    last_initial: 'T',\n    title: 'Senior Product Designer',\n    bio: \"I am a passionate product designer with over 8 years of experience creating user-centered digital experiences. My expertise spans UX research, interaction design, and visual design. I've worked with startups and Fortune 500 companies to deliver innovative solutions that drive business results. My design philosophy centers on simplicity, accessibility, and delight. I believe great design should be invisible - it should just work. When I'm not designing, you can find me exploring new design tools, contributing to open source projects, or mentoring junior designers.\",\n    country: 'United States',\n    city: 'San Francisco',\n    availability: 'immediate',\n    years_experience: 8,\n    portfolio_url: 'https://alexdesigner.com',\n    website_url: 'https://alexblog.com', \n    dribbble_url: 'https://dribbble.com/alexdesigner',\n    behance_url: 'https://behance.net/alexdesigner',\n    linkedin_url: 'https://linkedin.com/in/alexdesigner',\n    avatar_url: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjNEY0NkU1Ii8+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iODAiIGZpbGw9IndoaXRlIj5BVDwvdGV4dD4KPC9zdmc+',\n    is_approved: false,\n    is_verified: true,\n    rating: 0,\n    total_projects: 0,\n    created_at: new Date().toISOString(),\n    \n    // Add a rejection for testing\n    rejection_reason: 'Your portfolio looks great! However, we need to see more examples of mobile app design work to better match you with our clients. Please add 2-3 mobile app case studies to your portfolio.'\n  };\n\n  console.log('Creating test designer with email:', testDesigner.email);\n\n  const { data, error } = await supabase\n    .from('designers')\n    .insert(testDesigner)\n    .select()\n    .single();\n\n  if (error) {\n    console.error('Error creating designer:', error);\n    return;\n  }\n\n  console.log('‚úÖ Test designer created successfully!');\n  console.log('Designer ID:', data.id);\n  console.log('Email:', data.email);\n  console.log('Status: Rejected (for testing)');\n  console.log('');\n  console.log('You can now test the profile page by:');\n  console.log('1. Going to http://localhost:3001/designer/login');\n  console.log('2. Enter email:', data.email);\n  console.log('3. Use OTP: 123456 (test mode)');\n  console.log('4. You should be redirected to the dashboard showing rejection feedback');\n  console.log('5. Then navigate to Profile to see the centralized field system in action');\n  \n  return data;\n}\n\ncreateTestDesigner();"
    }
  ],
  "test/check_portfolio_images.js": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 5,
      "context": "üìã **STEP 2: Check what the direct DB API returns**')\n  \n  // Test our direct DB API\n  try {\n    const response = await fetch('https://onedesigner.app/api/test-direct-db')\n    const data = await response.json()\n    \n    if (data.success && data.match && data.match.designer) {\n      console.log('‚úÖ **API RESPONSE FOR PORTFOLIO:**')\n      const designer = data.match.designer\n      console.log('Designer ID:', designer.id)\n      console.log('Portfolio images in API response:', designer.portfolioImages || 'Not included in response')\n    }\n  } catch (error) {\n    console.log('‚ùå Error testing API:', error.message)\n  }\n  \n  console.log('"
    }
  ],
  "test/apply_missing_designer_fields.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 6,
      "context": "üîó Go to: https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new');\n  console.log('üìã Copy and paste the SQL above, then click \"Run\""
    }
  ],
  "test/apply-messaging-tables.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "const { createClient } = require('@supabase/supabase-js');\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co';\nconst supabaseServiceKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyd2NodHd4cG5ybHB6a3N1cGdtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDQxNjM1OCwiZXhwIjoyMDY5OTkyMzU4fQ.etecMSfQ317vkouRXaMX3Jqg669kf5KL4pE08V03TV8';\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey);\n\nasync function checkAndCreateTables() {\n  console.log('üîç Checking if messaging tables exist...');\n  \n  try {\n    // Check if conversations table exists\n    const { data: conversations, error: convError } = await supabase\n      .from('conversations')\n      .select('id')\n      .limit(1);\n    \n    if (convError && convError.message.includes('relation \"public.conversations\" does not exist')) {\n      console.log('‚ùå Conversations table does not exist');\n      console.log('üìù Please run the migration SQL manually in Supabase dashboard:');\n      console.log('   1. Go to https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql');\n      console.log('   2. Copy and run the contents of migrations/012_messaging_system.sql');\n      return false;\n    }\n    \n    // Check if messages table exists\n    const { data: messages, error: msgError } = await supabase\n      .from('messages')\n      .select('id')\n      .limit(1);\n    \n    if (msgError && msgError.message.includes('relation \"public.messages\" does not exist')) {\n      console.log('‚ùå Messages table does not exist');\n      console.log('üìù Please run the migration SQL manually in Supabase dashboard');\n      return false;\n    }\n    \n    // Check if match_requests table exists\n    const { data: requests, error: reqError } = await supabase\n      .from('match_requests')\n      .select('id')\n      .limit(1);\n    \n    if (reqError && reqError.message.includes('relation \"public.match_requests\" does not exist')) {\n      console.log('‚ùå Match requests table does not exist');\n      console.log('üìù Please run the migration SQL manually in Supabase dashboard');\n      return false;\n    }\n    \n    console.log('‚úÖ All messaging tables exist!');\n    \n    // Test creating a conversation\n    console.log('"
    }
  ],
  "test/add_update_token_columns.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://frwchtwxpnrlpzksupgm.supabase.co'\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseServiceKey) {\n  console.error('‚ùå SUPABASE_SERVICE_ROLE_KEY environment variable is required')\n  process.exit(1)\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey)\n\nasync function addUpdateTokenColumns() {\n  console.log('üì¶ Adding update token columns to designers table...')\n  \n  try {\n    // Use RPC to execute raw SQL\n    const { data, error } = await supabase.rpc('exec_sql', {\n      sql: `\n        -- Add update token columns if they don't exist\n        ALTER TABLE designers\n        ADD COLUMN IF NOT EXISTS update_token TEXT,\n        ADD COLUMN IF NOT EXISTS update_token_expires TIMESTAMP WITH TIME ZONE,\n        ADD COLUMN IF NOT EXISTS rejection_reason TEXT;\n        \n        -- Create index for faster token lookups\n        CREATE INDEX IF NOT EXISTS idx_designers_update_token ON designers(update_token) WHERE update_token IS NOT NULL;\n      `\n    })\n    \n    if (error) {\n      // Try a different approach - add columns one by one\n      console.log('üìù Direct SQL execution failed, trying alternative approach...')\n      \n      // Test if columns already exist\n      const { data: testData, error: testError } = await supabase\n        .from('designers')\n        .select('id')\n        .limit(1)\n      \n      if (testError) {\n        console.error('‚ùå Cannot access designers table:', testError)\n        return\n      }\n      \n      console.log(`\n‚ùó The columns need to be added manually. Please run this SQL in the Supabase dashboard:\n\n-- Add update token columns for designer application updates\nALTER TABLE designers\nADD COLUMN IF NOT EXISTS update_token TEXT,\nADD COLUMN IF NOT EXISTS update_token_expires TIMESTAMP WITH TIME ZONE,\nADD COLUMN IF NOT EXISTS rejection_reason TEXT;\n\n-- Create index for faster token lookups\nCREATE INDEX IF NOT EXISTS idx_designers_update_token ON designers(update_token) WHERE update_token IS NOT NULL;\n\n-- Add comments\nCOMMENT ON COLUMN designers.update_token IS 'Unique token for updating rejected applications';\nCOMMENT ON COLUMN designers.update_token_expires IS 'Expiration time for the update token';\nCOMMENT ON COLUMN designers.rejection_reason IS 'Reason for rejection provided by admin';\n\nüîó Go to: https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new\n      `)\n    } else {\n      console.log('‚úÖ Update token columns added successfully!')\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Error:', error.message)\n    console.log(`\nPlease add the columns manually in Supabase SQL Editor:\n\nALTER TABLE designers\nADD COLUMN IF NOT EXISTS update_token TEXT,\nADD COLUMN IF NOT EXISTS update_token_expires TIMESTAMP WITH TIME ZONE,\nADD COLUMN IF NOT EXISTS rejection_reason TEXT;\n\nCREATE INDEX IF NOT EXISTS idx_designers_update_token ON designers(update_token) WHERE update_token IS NOT NULL;\n    `)\n  }\n}\n\naddUpdateTokenColumns()"
    }
  ],
  "test/add-portfolio-image-columns.js": [
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 4,
      "context": "Run these in Supabase SQL Editor at:');\n    console.log('https://supabase.com/dashboard/project/frwchtwxpnrlpzksupgm/sql/new');\n    \n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n\naddPortfolioImageColumns();"
    }
  ],
  "test/PORTFOLIO_IMAGES_SOLUTION.md": [
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 1,
      "context": "# Portfolio Images Solution\n\n## Problem Summary\nThe admin dashboard was displaying fields that no longer existed in the designer application form, and portfolio images weren't showing even though they were being uploaded by designers.\n\n## Root Cause\n1. **Field Mismatch**: Admin dashboard was querying for non-existent related tables and showing obsolete fields\n2. **Missing Database Columns**: The database didn't have `portfolio_image_1`, `portfolio_image_2`, `portfolio_image_3` columns\n3. **Storage Issue**: Portfolio images were being collected in the application but had no proper storage location\n\n## Solution Implemented\n\n### 1. Synchronized Admin Dashboard with Application Fields\n- Removed obsolete fields from the admin modal that don't exist in the application\n- Updated the Designer interface to match actual application fields\n- Cleaned up the admin API route to remove queries to non-existent tables\n\n### 2. Portfolio Images Storage (Temporary Solution)\nSince we couldn't directly add columns to the database, we repurposed the unused `tools` array field:\n- Portfolio images are now stored as an array in the `tools` column\n- The `tools` field is a PostgreSQL array type that was previously unused\n- Images are stored as base64 strings in the array\n\n### 3. Code Changes\n\n#### Designer Service (`/src/lib/database/designer-service.ts`)\n```typescript\n// Storing portfolio images\nif (formData.portfolioImages !== undefined) {\n  dbData.tools = formData.portfolioImages.length > 0 ? formData.portfolioImages : []\n}\n\n// Retrieving portfolio images\nportfolioImages: Array.isArray(dbData.tools) ? dbData.tools : []\n```\n\n#### Admin API (`/src/app/api/admin/designers/route.ts`)\n```typescript\n// Portfolio images from tools field\nportfolio_images: Array.isArray(designer.tools) ? designer.tools : []\n```\n\n### 4. Email Template Unification\n- Unified OTP email templates across admin, designer, and client pages\n- Changed sender name from \"team\" to \"OneDesigner\"\n- All OTP emails now use the same centralized template\n\n## Testing\nCreated test designer \"John Designer\" with portfolio images successfully stored and retrieved.\n\n## Future Migration Path\nWhen database access is available, run this SQL to add proper columns:\n```sql\nALTER TABLE designers \nADD COLUMN IF NOT EXISTS portfolio_image_1 TEXT,\nADD COLUMN IF NOT EXISTS portfolio_image_2 TEXT,\nADD COLUMN IF NOT EXISTS portfolio_image_3 TEXT;\n```\n\nThen update the code to use these dedicated columns instead of the `tools` field.\n\n## Verification Steps\n1. Go to the admin dashboard\n2. Look for any designer (e.g., \"John Designer\")\n3. Click on the designer to open the modal\n4. Portfolio images should now be visible if the designer has uploaded them\n\n## Files Modified\n- `/src/lib/database/designer-service.ts` - Added portfolio image mapping\n- `/src/app/api/admin/designers/route.ts` - Updated to retrieve portfolio images\n- `/src/app/admin/dashboard/page.tsx` - Removed obsolete fields\n- `/src/lib/auth/custom-otp.ts` - Unified OTP email sending\n- `/src/lib/core/email-service.ts` - Updated sender name\n- `/.env.vercel` - Updated EMAIL_FROM configuration\n\n## Deployment\n- Committed to GitHub: `8dea144`\n- Deployed to Vercel: https://onedesigner2-bpwgvqfoe-onedesigners-projects.vercel.app\n\n## Status\n‚úÖ COMPLETE - Portfolio images are now working and admin dashboard is synchronized with the application form."
    }
  ],
  "src/lib/email/EMAIL_BRANDING_STANDARDS.md": [
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "# OneDesigner Email Branding Standards\n\n## üìß **Official Email Branding Guidelines**\n\n### **üéØ Golden Rules (NEVER CHANGE):**\n1. ‚úÖ **Golden OneDesigner text**: `color: #f0ad4e` in all email headers\n2. ‚úÖ **No logos**: Simple text-only branding (email client compatible)\n3. ‚úÖ **team@onedesigner.app**: Default sender email address\n4. ‚úÖ **Sender name**: \"Hala from OneDesigner\" for ALL emails (personal touch)\n\n---\n\n## üé® **Visual Standards**\n\n### **Header Design:**\n```html\n<div style=\"text-align: center; padding: 32px; border-bottom: 1px solid #F3F4F6;\">\n  <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n</div>\n```\n\n### **Color Palette:**\n- **Primary Brand**: `#f0ad4e` (Golden OneDesigner text)\n- **Text Primary**: `#111827` (Main content)\n- **Text Secondary**: `#4B5563` (Supporting text)\n- **Background**: `#FAFAFA` (Email background)\n- **White**: `#FFFFFF` (Content containers)\n- **Border**: `#F3F4F6` (Subtle separators)\n\n---\n\n## üì§ **Sender Standards**\n\n### **Email Addresses:**\n- **Default**: `team@onedesigner.app`\n- **Environment Override**: `process.env.EMAIL_FROM_ADDRESS`\n\n### **Sender Names:**\n```typescript\n// ALL emails now use the personalized sender\n\"Hala from OneDesigner <team@onedesigner.app>\"\n```\n\n---\n\n## üìÅ **Implementation Files**\n\n### **Core Services:**\n- `/src/lib/core/email-service.ts` - Main email service with sender logic\n- `/src/lib/email/components/logo.ts` - Golden header component\n\n### **Templates:**\n- `/src/lib/email/templates/marc-lou-style.ts` - Marc Lou style templates\n- `/src/lib/email/template-base.ts` - Original template base\n- `/src/lib/email/send-email.ts` - Direct email sender\n- `/src/lib/email/send-otp.ts` - OTP emails\n\n### **Usage Example:**\n```typescript\nimport { getEmailLogoHeader } from '@/lib/email/components/logo'\n\nconst emailHtml = `\n<html>\n<body>\n  ${getEmailLogoHeader()}\n  <!-- Email content -->\n</body>\n</html>\n`\n```\n\n---\n\n## ‚úÖ **Quality Checklist**\n\nBefore sending any email, ensure:\n- [ ] Golden OneDesigner header (`#f0ad4e`)\n- [ ] Correct sender (`team@onedesigner.app`)\n- [ ] Appropriate sender name (OneDesigner vs Hala from OneDesigner)\n- [ ] No logos or images (email client compatibility)\n- [ ] Consistent typography and spacing\n- [ ] Marc Lou casual tone (where appropriate)\n\n---\n\n## üö´ **What NOT to Do**\n\n‚ùå **Never use:**\n- SVG logos (blocked by Gmail)\n- Base64 images (blocked by most clients)\n- Complex CSS transforms (inconsistent rendering)\n- noreply@onedesigner.app (old address)\n- magic@onedesigner.app (test address)\n\n‚ùå **Never change:**\n- The golden color `#f0ad4e`\n- The sender email `team@onedesigner.app`\n- The simple text-only header design\n\n---\n\n## üîÑ **Future Email Creation**\n\n### **For New Email Templates:**\n1. Copy structure from `/src/lib/email/templates/marc-lou-style.ts`\n2. Use golden header: `getEmailLogoHeader()`\n3. Apply appropriate sender name logic\n4. Test in Gmail, Outlook, and Apple Mail\n5. Follow Marc Lou's casual, direct copywriting style\n\n### **For Emergency Fixes:**\nIf emails aren't displaying correctly:\n1. Remove all images/SVG/complex CSS\n2. Use simple HTML tables for layout\n3. Inline all CSS styles\n4. Test with golden text header only\n\n---\n\n**Last Updated**: August 14, 2025  \n**Status**: ‚úÖ ACTIVE STANDARD  \n**Next Review**: When email client compatibility changes"
    }
  ],
  "src/lib/constants/urls.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://www.onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.WWW",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "http://localhost:3001",
      "replacement": "DEV_URLS.LOCAL.ALT_PORT",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://api.lemonsqueezy.com/v1",
      "replacement": "API_ENDPOINTS.LEMONSQUEEZY",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://api.deepseek.com/v1",
      "replacement": "API_ENDPOINTS.DEEPSEEK",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://onedesigner2-",
      "replacement": "DEV_URLS.VERCEL_DEPLOYMENTS.PREVIEW",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://supabase.com/dashboard/project/",
      "replacement": "EXTERNAL_URLS.SUPABASE.DASHBOARD",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://images.unsplash.com/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "https://images.unsplash.com/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UNSPLASH_*",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "Hala from OneDesigner <team@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.DEFAULT",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "OneDesigner <noreply@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.NOREPLY",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    },
    {
      "pattern": "OneDesigner Support <support@onedesigner.app>",
      "replacement": "EMAIL_URLS.SENDER.SUPPORT",
      "line": 1,
      "context": "/**\n * Centralized URL Configuration\n * All hardcoded URLs should be managed through this file\n */\n\n// Environment-aware URL building\nconst getBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // Client-side: use window.location.origin\n    return window.location.origin\n  }\n  \n  // Server-side: use environment variable or fallback\n  return process.env.NEXT_PUBLIC_APP_URL || process.env.NEXTAUTH_URL || 'https://onedesigner.app'\n}\n\n// Production URLs (environment configurable)\nexport const PRODUCTION_URLS = {\n  APP: {\n    BASE: process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app',\n    WWW: 'https://www.onedesigner.app',\n    DYNAMIC: getBaseUrl()\n  },\n  API: {\n    RESEND: process.env.RESEND_API_URL || 'https://api.resend.com/emails',\n    LEMONSQUEEZY: process.env.LEMONSQUEEZY_API_URL || 'https://api.lemonsqueezy.com/v1',\n    DEEPSEEK: process.env.DEEPSEEK_API_URL || 'https://api.deepseek.com/v1'\n  }\n} as const\n\n// Page URLs - environment aware\nexport const PAGE_URLS = {\n  // Authentication\n  CLIENT: {\n    LOGIN: '/client/login',\n    SIGNUP: '/client/signup',\n    VERIFY: '/client/signup/verify',\n    DASHBOARD: '/client/dashboard',\n    CONVERSATIONS: '/client/conversations'\n  },\n  DESIGNER: {\n    LOGIN: '/designer/login',\n    SIGNUP: '/designer/signup',\n    VERIFY: '/designer/signup/verify',\n    APPLY: '/designer/apply',\n    DASHBOARD: '/designer/dashboard',\n    REQUESTS: '/designer/requests',\n    UPDATE_APPLICATION: '/designer/update-application'\n  },\n  ADMIN: {\n    LOGIN: '/admin/login',\n    DASHBOARD: '/admin/dashboard',\n    DESIGNERS: '/admin/designers'\n  },\n  \n  // Public pages\n  PUBLIC: {\n    HOME: '/',\n    BRIEF: '/brief',\n    CONTACT: '/contact',\n    HELP: '/help',\n    BLOG: '/blog',\n    BLOG_ADMIN: '/blog/admin'\n  },\n  \n  // Match pages\n  MATCH: {\n    BASE: '/match',\n    DYNAMIC: (briefId: string) => `/match/${briefId}`\n  }\n} as const\n\n// Full URL builders (with domain)\nexport const FULL_URLS = {\n  // Authentication URLs\n  CLIENT: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.DASHBOARD}`,\n    VERIFY: () => `${getBaseUrl()}${PAGE_URLS.CLIENT.VERIFY}`\n  },\n  DESIGNER: {\n    LOGIN: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.LOGIN}`,\n    DASHBOARD: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.DASHBOARD}`,\n    REQUESTS: () => `${getBaseUrl()}${PAGE_URLS.DESIGNER.REQUESTS}`,\n    UPDATE_APPLICATION: (token?: string) => \n      `${getBaseUrl()}${PAGE_URLS.DESIGNER.UPDATE_APPLICATION}${token ? `?token=${token}` : ''}`\n  },\n  \n  // Public URLs\n  PUBLIC: {\n    CONTACT: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.CONTACT}`,\n    HELP: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HELP}`,\n    HOME: () => `${getBaseUrl()}${PAGE_URLS.PUBLIC.HOME}`\n  },\n  \n  // Match URLs\n  MATCH: {\n    VIEW: (briefId: string) => `${getBaseUrl()}${PAGE_URLS.MATCH.DYNAMIC(briefId)}`\n  }\n} as const\n\n// External service URLs\nexport const EXTERNAL_URLS = {\n  SUPABASE: {\n    DASHBOARD: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}`,\n    SQL_EDITOR: `https://supabase.com/dashboard/project/${process.env.NEXT_PUBLIC_SUPABASE_PROJECT_REF || 'frwchtwxpnrlpzksupgm'}/sql/new`\n  },\n  SOCIAL: {\n    TWITTER: 'https://twitter.com/onedesigner',\n    LINKEDIN: 'https://linkedin.com/company/onedesigner'\n  },\n  PLACEHOLDER: {\n    UNSPLASH_DESIGNER: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',\n    UNSPLASH_PROJECT: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe',\n    UI_AVATARS: (name: string, size = 200, background = 'e9c46a') => \n      `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=${background}&color=fff&size=${size}&bold=true`\n  }\n} as const\n\n// Development URLs (for testing)\nexport const DEV_URLS = {\n  LOCAL: {\n    BASE: 'http://localhost:3000',\n    ALT_PORT: 'http://localhost:3001',\n    API_BASE: (port = 3000) => `http://localhost:${port}/api`\n  },\n  VERCEL_DEPLOYMENTS: {\n    // Common Vercel deployment patterns\n    PREVIEW: (hash: string) => `https://onedesigner2-${hash}-onedesigners-projects.vercel.app`,\n    STAGING: 'https://onedesigner-staging.vercel.app'\n  }\n} as const\n\n// Email-specific URLs (for templates)\nexport const EMAIL_URLS = {\n  SENDER: {\n    DEFAULT: process.env.EMAIL_FROM || 'Hala from OneDesigner <team@onedesigner.app>',\n    SUPPORT: 'OneDesigner Support <support@onedesigner.app>',\n    NOREPLY: 'OneDesigner <noreply@onedesigner.app>'\n  },\n  UNSUBSCRIBE: {\n    BASE: () => `${getBaseUrl()}/unsubscribe`,\n    DYNAMIC: (token: string) => `${getBaseUrl()}/unsubscribe?token=${token}`\n  },\n  FOOTER_LINKS: {\n    WEBSITE: () => getBaseUrl(),\n    CONTACT: () => FULL_URLS.PUBLIC.CONTACT(),\n    HELP: () => FULL_URLS.PUBLIC.HELP()\n  }\n} as const\n\n// API Route URLs (internal)\nexport const API_ROUTES = {\n  AUTH: {\n    SEND_OTP: '/api/auth/send-otp',\n    VERIFY_OTP: '/api/auth/verify-otp'\n  },\n  CLIENT: {\n    MATCHES: '/api/client/matches',\n    UNLOCK: (matchId: string) => `/api/client/matches/${matchId}/unlock`,\n    CONTACT: (matchId: string) => `/api/client/matches/${matchId}/contact`\n  },\n  DESIGNER: {\n    APPLY: '/api/designer/apply',\n    REQUESTS: '/api/designer/project-requests',\n    RESPOND: (requestId: string) => `/api/designer/project-requests/${requestId}/respond`\n  },\n  ADMIN: {\n    DESIGNERS: '/api/admin/designers',\n    APPROVE: (designerId: string) => `/api/admin/designers/${designerId}/approve`\n  },\n  WEBHOOKS: {\n    LEMONSQUEEZY: '/api/webhooks/lemonsqueezy'\n  },\n  HEALTH: '/api/health',\n  TEST: {\n    DIRECT_DB: '/api/test-direct-db',\n    MATCH: '/api/test-match'\n  }\n} as const\n\n// Utility functions for URL building\nexport const urlBuilders = {\n  /**\n   * Build a full URL for the current environment\n   */\n  buildUrl: (path: string, params?: Record<string, string>) => {\n    const baseUrl = getBaseUrl()\n    const url = new URL(path, baseUrl)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, value)\n      })\n    }\n    \n    return url.toString()\n  },\n  \n  /**\n   * Build API URL for current environment\n   */\n  buildApiUrl: (endpoint: string) => {\n    return `${getBaseUrl()}${endpoint}`\n  },\n  \n  /**\n   * Get current environment type\n   */\n  getEnvironment: () => {\n    const baseUrl = getBaseUrl()\n    if (baseUrl.includes('localhost')) return 'development'\n    if (baseUrl.includes('vercel.app')) return 'preview'\n    return 'production'\n  }\n}\n\n// Type exports for type safety\nexport type ProductionUrls = typeof PRODUCTION_URLS\nexport type PageUrls = typeof PAGE_URLS\nexport type FullUrls = typeof FULL_URLS\nexport type ExternalUrls = typeof EXTERNAL_URLS\nexport type DevUrls = typeof DEV_URLS\nexport type EmailUrls = typeof EMAIL_URLS\nexport type ApiRoutes = typeof API_ROUTES"
    }
  ],
  "src/app/test-images/page.tsx": [
    {
      "pattern": "https://ui-avatars.com/api/",
      "replacement": "EXTERNAL_URLS.PLACEHOLDER.UI_AVATARS",
      "line": 1,
      "context": "'use client'\n\nimport { useState } from 'react'\nimport { getTheme } from '@/lib/design-system'\n\n// Test page to verify avatar and portfolio image functionality\nexport default function TestImagesPage() {\n  const [isDarkMode, setIsDarkMode] = useState(true)\n  const theme = getTheme(isDarkMode)\n\n  // Sample designer data\n  const sampleDesigner = {\n    id: \"c915ab9a-7a38-42e9-85e4-8ebaf2fbbecb\",\n    firstName: \"Mark\",\n    lastName: \"Kowalski\", \n    title: \"Senior Motion Design Designer\",\n    avatar_url: \"https://ui-avatars.com/api/?name=Mark+Kowalski&background=e9c46a&color=fff&size=200&bold=true\"\n  }\n\n  // Avatar component with fallback\n  const DesignerAvatar = ({ designer, size = 80, className = \"\" }: { designer: any, size?: number, className?: string }) => {\n    const [imageError, setImageError] = useState(false)\n    \n    const getInitials = () => {\n      return `${designer.firstName?.[0] || ''}${designer.lastName?.[0] || ''}`\n    }\n    \n    if (imageError || !designer.avatar_url) {\n      return (\n        <div \n          className={`flex items-center justify-center rounded-full font-bold text-white ${className}`}\n          style={{ \n            width: size, \n            height: size,\n            backgroundColor: theme.accent,\n            fontSize: size / 3\n          }}\n        >\n          {getInitials()}\n        </div>\n      )\n    }\n    \n    return (\n      <img\n        src={designer.avatar_url}\n        alt={`${designer.firstName} ${designer.lastName}`}\n        className={`rounded-full object-cover ${className}`}\n        style={{ width: size, height: size }}\n        onError={() => setImageError(true)}\n      />\n    )\n  }\n\n  // Portfolio Image component with error handling\n  const PortfolioImage = ({ src, alt, index }: { src: string, alt: string, index: number }) => {\n    const [imageError, setImageError] = useState(false)\n    \n    if (imageError) {\n      return (\n        <div \n          className=\"aspect-square bg-gray-200 rounded-xl flex items-center justify-center\"\n          style={{ backgroundColor: theme.border }}\n        >\n          <span style={{ color: theme.text.muted }}>Image {index + 1}</span>\n        </div>\n      )\n    }\n    \n    return (\n      <img\n        src={src}\n        alt={alt}\n        className=\"aspect-square object-cover rounded-xl\"\n        onError={() => setImageError(true)}\n      />\n    )\n  }\n\n  return (\n    <main className=\"min-h-screen transition-colors duration-300 p-8\" style={{ backgroundColor: theme.bg }}>\n      <div className=\"max-w-4xl mx-auto\">\n        <h1 className=\"text-3xl font-bold mb-8 transition-colors duration-300\" style={{ color: theme.text.primary }}>\n          Image Display Test\n        </h1>\n\n        <button\n          onClick={() => setIsDarkMode(!isDarkMode)}\n          className=\"mb-8 px-4 py-2 rounded-lg font-medium transition-colors duration-300\"\n          style={{ backgroundColor: theme.accent, color: '#000' }}\n        >\n          Toggle {isDarkMode ? 'Light' : 'Dark'} Mode\n        </button>\n\n        {/* Avatar Test */}\n        <div className=\"rounded-2xl p-6 mb-6\" \n          style={{ \n            backgroundColor: theme.cardBg,\n            border: `1px solid ${theme.border}`\n          }}>\n          <h2 className=\"text-xl font-bold mb-4 transition-colors duration-300\" style={{ color: theme.text.primary }}>\n            Avatar Test\n          </h2>\n          <div className=\"flex items-center gap-4\">\n            <DesignerAvatar designer={sampleDesigner} size={80} />\n            <div>\n              <p style={{ color: theme.text.primary }}>{sampleDesigner.firstName} {sampleDesigner.lastName}</p>\n              <p style={{ color: theme.text.secondary }}>{sampleDesigner.title}</p>\n              <p className=\"text-sm mt-2\" style={{ color: theme.text.muted }}>\n                Avatar URL: <code>{sampleDesigner.avatar_url}</code>\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Blurred Avatar Test */}\n        <div className=\"rounded-2xl p-6 mb-6\" \n          style={{ \n            backgroundColor: theme.cardBg,\n            border: `1px solid ${theme.border}`\n          }}>\n          <h2 className=\"text-xl font-bold mb-4 transition-colors duration-300\" style={{ color: theme.text.primary }}>\n            Blurred Avatar Test (Locked State)\n          </h2>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"relative\">\n              <DesignerAvatar designer={sampleDesigner} size={80} className=\"blur-sm\" />\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <div className=\"bg-black/50 text-white text-xs px-2 py-1 rounded\">\n                  üîí\n                </div>\n              </div>\n            </div>\n            <div>\n              <p style={{ color: theme.text.primary }}>Designer {sampleDesigner.firstName}***</p>\n              <p style={{ color: theme.text.secondary }}>{sampleDesigner.title}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Portfolio Images Test */}\n        <div className=\"rounded-2xl p-6 mb-6\" \n          style={{ \n            backgroundColor: theme.cardBg,\n            border: `1px solid ${theme.border}`\n          }}>\n          <h2 className=\"text-xl font-bold mb-4 transition-colors duration-300\" style={{ color: theme.text.primary }}>\n            Portfolio Images Test\n          </h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {[1, 2, 3].map((index) => {\n              // Generate portfolio image based on designer's category\n              const category = sampleDesigner.title?.includes('Motion') ? 'motion' : 'design'\n              const portfolioImageUrl = `https://picsum.photos/seed/${category}${index}-${sampleDesigner.id}/800/600`\n              \n              return (\n                <div key={index}>\n                  <h3 className=\"text-sm font-medium mb-2\" style={{ color: theme.text.secondary }}>\n                    Portfolio Image {index}\n                  </h3>\n                  <PortfolioImage \n                    src={portfolioImageUrl} \n                    alt={`Portfolio ${index}`} \n                    index={index - 1}\n                  />\n                  <p className=\"text-xs mt-2 break-all\" style={{ color: theme.text.muted }}>\n                    {portfolioImageUrl}\n                  </p>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n\n        {/* Blurred Portfolio Test */}\n        <div className=\"rounded-2xl p-6\" \n          style={{ \n            backgroundColor: theme.cardBg,\n            border: `1px solid ${theme.border}`\n          }}>\n          <h2 className=\"text-xl font-bold mb-4 transition-colors duration-300\" style={{ color: theme.text.primary }}>\n            Blurred Portfolio Test (Locked State)\n          </h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {[1, 2, 3].map((index) => {\n              const category = 'motion'\n              const portfolioImageUrl = `https://picsum.photos/seed/${category}${index}-${sampleDesigner.id}/800/600`\n              \n              return (\n                <div key={index} className=\"relative group\">\n                  <PortfolioImage \n                    src={portfolioImageUrl} \n                    alt={`Portfolio ${index}`} \n                    index={index - 1}\n                  />\n                  <div className=\"absolute inset-0 bg-black/30 backdrop-blur-sm rounded-xl flex items-center justify-center\">\n                    <div className=\"bg-black/50 text-white text-xs px-3 py-2 rounded-lg\">\n                      üîí Unlock to view\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}"
    }
  ],
  "src/app/blog/page.tsx": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { Suspense } from 'react';\nimport BlogListingClient from './BlogListingClient';\n\nexport const metadata = {\n  title: 'üìñ OneDesigner Blog - Design Tips & Insights',\n  description: 'üé® Discover the latest design trends, tips, and insights from professional designers. Boost your creative skills with OneDesigner Blog.',\n  keywords: 'design blog, UI/UX tips, design trends, creative insights, OneDesigner',\n  openGraph: {\n    title: 'üìñ OneDesigner Blog - Design Tips & Insights',\n    description: 'üé® Discover the latest design trends, tips, and insights from professional designers.',\n    type: 'website',\n    url: 'https://onedesigner.app/blog',\n  },\n};\n\nexport default function BlogPage() {\n  return (\n    <div className=\"min-h-screen\">\n      <Suspense fallback={\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading blog posts... üìñ</p>\n          </div>\n        </div>\n      }>\n        <BlogListingClient />\n      </Suspense>\n    </div>\n  );\n}"
    }
  ],
  "src/lib/email/templates/marc-lou-style.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Email templates inspired by Marc Lou's casual, direct style\n * Combined with OneDesigner's design system\n */\n\nexport interface MarcLouEmailProps {\n  title: string\n  preheader?: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n    additionalContent?: string\n    signature?: string\n  }\n  isOTPEmail?: boolean\n  isRejectionEmail?: boolean\n}\n\n/**\n * Create email template with Marc Lou's casual style + OneDesigner design\n */\nexport function createMarcLouStyleEmail(props: MarcLouEmailProps): { html: string; text: string } {\n  const senderName = props.isOTPEmail ? 'OneDesigner' : 'Hala from OneDesigner'\n  \n  const html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${props.title}</title>\n    ${props.preheader ? `<meta name=\"description\" content=\"${props.preheader}\">` : ''}\n    <style>\n        /* Reset styles */\n        body, table, td, p, a, li, blockquote {\n            -webkit-text-size-adjust: 100%;\n            -ms-text-size-adjust: 100%;\n        }\n        \n        /* Marc Lou inspired minimalist style */\n        body {\n            background-color: #FAFAFA;\n            margin: 0 !important;\n            padding: 0 !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Helvetica, Arial, sans-serif;\n            font-size: 16px;\n            line-height: 1.6;\n            color: #111827;\n        }\n        \n        .email-wrapper {\n            background-color: #FAFAFA;\n            padding: 40px 20px;\n        }\n        \n        .email-container {\n            max-width: 560px;\n            margin: 0 auto;\n            background-color: #FFFFFF;\n            border-radius: 16px;\n            overflow: hidden;\n            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        }\n        \n        /* Header with OneDesigner branding */\n        .header {\n            padding: 32px 32px 24px 32px;\n            border-bottom: 1px solid #F3F4F6;\n            text-align: center;\n        }\n        \n        .logo-container {\n            display: inline-flex;\n            align-items: center;\n            gap: 12px;\n            justify-content: center;\n        }\n        \n        .logo {\n            width: 32px;\n            height: 32px;\n            display: inline-block;\n            vertical-align: middle;\n        }\n        \n        .logo svg {\n            width: 100%;\n            height: 100%;\n        }\n        \n        .brand-name {\n            font-size: 24px;\n            font-weight: 700;\n            color: #111827;\n            letter-spacing: -0.02em;\n            display: inline-block;\n            vertical-align: middle;\n            line-height: 1;\n        }\n        \n        /* Content area */\n        .content {\n            padding: 32px;\n        }\n        \n        .greeting {\n            font-size: 18px;\n            font-weight: 600;\n            color: #111827;\n            margin-bottom: 16px;\n            letter-spacing: -0.01em;\n        }\n        \n        .main-text {\n            font-size: 16px;\n            line-height: 1.7;\n            color: #4B5563;\n            margin-bottom: 24px;\n        }\n        \n        .main-text strong {\n            color: #111827;\n            font-weight: 600;\n        }\n        \n        .highlight {\n            background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%);\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-weight: 600;\n            color: #111827;\n            display: inline-block;\n            transform: rotate(-0.5deg);\n            margin: 0 2px;\n        }\n        \n        /* CTA Button - Marc Lou style */\n        .cta-container {\n            margin: 32px 0;\n        }\n        \n        .cta-button {\n            display: inline-block;\n            padding: 14px 28px;\n            background: #111827;\n            color: #FFFFFF !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-weight: 600;\n            font-size: 16px;\n            letter-spacing: -0.01em;\n            transition: all 0.2s ease;\n        }\n        \n        .cta-button:hover {\n            background: #1F2937;\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n        \n        /* Special styling for OTP */\n        .otp-container {\n            background: #F9FAFB;\n            border: 2px dashed #E5E7EB;\n            border-radius: 12px;\n            padding: 24px;\n            margin: 24px 0;\n            text-align: center;\n        }\n        \n        .otp-code {\n            font-size: 36px;\n            font-weight: 700;\n            letter-spacing: 8px;\n            color: #111827;\n            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;\n        }\n        \n        .otp-expiry {\n            font-size: 14px;\n            color: #6B7280;\n            margin-top: 12px;\n        }\n        \n        /* Footer */\n        .footer {\n            padding: 24px 32px;\n            border-top: 1px solid #F3F4F6;\n            background: #F9FAFB;\n        }\n        \n        .signature {\n            font-size: 16px;\n            color: #111827;\n            font-weight: 600;\n            margin-bottom: 8px;\n        }\n        \n        .footer-text {\n            font-size: 14px;\n            color: #6B7280;\n            margin: 4px 0;\n        }\n        \n        .footer-links {\n            margin-top: 16px;\n            padding-top: 16px;\n            border-top: 1px solid #E5E7EB;\n        }\n        \n        .footer-links a {\n            color: #f0ad4e;\n            text-decoration: none;\n            font-size: 14px;\n            margin: 0 12px;\n        }\n        \n        .footer-links a:hover {\n            text-decoration: underline;\n        }\n        \n        /* Responsive styles */\n        @media only screen and (max-width: 600px) {\n            .email-container {\n                width: 100% !important;\n                border-radius: 0;\n            }\n            .header, .content, .footer {\n                padding: 24px 20px;\n            }\n            .cta-button {\n                display: block;\n                text-align: center;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-wrapper\">\n        <div class=\"email-container\">\n            <!-- Header -->\n            <div class=\"header\">\n                <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n            </div>\n            \n            <!-- Content -->\n            <div class=\"content\">\n                ${props.content.greeting ? `<div class=\"greeting\">${props.content.greeting}</div>` : ''}\n                \n                <div class=\"main-text\">${props.content.mainText}</div>\n                \n                ${props.content.ctaButton ? `\n                    <div class=\"cta-container\">\n                        <a href=\"${props.content.ctaButton.href}\" class=\"cta-button\">\n                            ${props.content.ctaButton.text} ‚Üí\n                        </a>\n                    </div>\n                ` : ''}\n                \n                ${props.content.additionalContent ? `\n                    <div class=\"main-text\">${props.content.additionalContent}</div>\n                ` : ''}\n            </div>\n            \n            <!-- Footer -->\n            <div class=\"footer\">\n                <div class=\"signature\">${props.content.signature || `‚Äî ${senderName}`}</div>\n                <div class=\"footer-text\">Connecting great clients with amazing designers</div>\n                \n                <div class=\"footer-links\">\n                    <a href=\"https://onedesigner.app\">Website</a>\n                    <a href=\"https://onedesigner.app/help\">Help</a>\n                    <a href=\"https://twitter.com/onedesigner\">Twitter</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>`\n\n  // Generate plain text version\n  const text = `\n${props.content.greeting || ''}\n\n${props.content.mainText.replace(/<[^>]*>/g, '')}\n\n${props.content.ctaButton ? `${props.content.ctaButton.text}: ${props.content.ctaButton.href}` : ''}\n\n${props.content.additionalContent ? props.content.additionalContent.replace(/<[^>]*>/g, '') : ''}\n\n${props.content.signature || `‚Äî ${senderName}`}\n\nOneDesigner - Connecting great clients with amazing designers\nWebsite: https://onedesigner.app\n`.trim()\n\n  return { html, text }\n}\n\n/**\n * Welcome email for new clients - Marc Lou style\n */\nexport function createWelcomeClientEmailMarcStyle(data: {\n  clientName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Welcome to OneDesigner!',\n    preheader: 'Your perfect designer match is 0.3 seconds away',\n    content: {\n      greeting: `Hey ${data.clientName} üëã`,\n      mainText: `\n        <strong>Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n        <br><br>\n        Here's what happens next:\n        <br><br>\n        <strong>1.</strong> Tell us about your project (2 min max) <br>\n        <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers <br>\n        <strong>3.</strong> Get your <span class=\"highlight\">perfect match</span> in 0.3 seconds\n        <br><br>\n        No endless scrolling. No awkward interviews. No wondering if they're actually good.\n        <br><br>\n        Just your ideal designer, ready to start.\n      `,\n      ctaButton: {\n        text: 'Start Your Brief',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick tip:</strong> The more specific your brief, the better your match. \n        Don't hold back on the details ‚Äî our AI loves them.\n        <br><br>\n        P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.clientName}, ready to skip the portfolio hunt?`,\n    ...template\n  }\n}\n\n/**\n * Designer approval email - Marc Lou style\n */\nexport function createDesignerApprovalEmailMarcStyle(data: {\n  designerName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: \"You're in!\",\n    preheader: 'Welcome to OneDesigner',\n    content: {\n      greeting: `${data.designerName}, you're in! üéâ`,\n      mainText: `\n        <strong>Your application? Approved.</strong>\n        <br><br>\n        Out of 847 applications this week, yours stood out. Here's why:\n        <br><br>\n        ‚úì Your portfolio shows real client work (not just Dribbble shots)<br>\n        ‚úì You actually explain your design process<br>\n        ‚úì Your style is distinctive, not generic\n        <br><br>\n        <strong>What happens now?</strong>\n        <br><br>\n        Clients submit briefs ‚Üí Our AI matches them to designers ‚Üí \n        If you're the match, you get <span class=\"highlight\">the project request</span>\n        <br><br>\n        No bidding. No competing with 50 other designers. No race to the bottom pricing.\n      `,\n      ctaButton: {\n        text: 'Access Your Dashboard',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Pro tip:</strong> Keep your availability updated. \n        Clients can see if you're ready to start immediately.\n        <br><br>\n        Welcome to the club. Let's get you some great projects.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you're approved! (847 applied, you got in)`,\n    ...template\n  }\n}\n\n/**\n * Designer rejection email - Marc Lou style (simplified without token)\n */\nexport function createDesignerRejectionEmailMarcStyle(data: {\n  designerName: string\n  rejectionReason: string\n  loginUrl?: string\n}): { subject: string; html: string; text: string } {\n  const loginLink = data.loginUrl || 'https://onedesigner.app/designer/login'\n  \n  const template = createMarcLouStyleEmail({\n    title: \"Not quite there yet\",\n    preheader: 'Update your application based on our feedback',\n    isRejectionEmail: true,\n    content: {\n      greeting: `${data.designerName}, let's be honest üí≠`,\n      mainText: `\n        Your application didn't make it this time. But here's the thing:\n        <br><br>\n        <strong>37% of our approved designers</strong> got rejected on their first try.\n        <br><br>\n        <div class=\"highlight-box\" style=\"background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 24px 0; border-radius: 4px;\">\n          <strong style=\"color: #92400E;\">Why we couldn't approve you:</strong>\n          <br><br>\n          <span style=\"color: #78350F; line-height: 1.6;\">${data.rejectionReason}</span>\n        </div>\n        \n        <strong>The good news?</strong>\n        <br><br>\n        You can fix this right now. Just log in, go to your profile, and update it.\n        <br><br>\n        No starting from scratch. No re-entering everything. Just fix what needs fixing.\n        <br><br>\n        <strong>Quick tips that work:</strong>\n        <br><br>\n        ‚úì Show real client work (not just concepts)<br>\n        ‚úì Explain your design decisions<br>\n        ‚úì Include before/after examples<br>\n        ‚úì Add links to live projects\n      `,\n      ctaButton: {\n        text: 'Login & Update Profile',\n        href: loginLink\n      },\n      additionalContent: `\n        <strong>How to update:</strong>\n        <br>\n        1. Login to your account<br>\n        2. You'll see our feedback<br>\n        3. Click \"Edit Profile\"<br>\n        4. Make the changes<br>\n        5. Hit \"Resubmit for Review\"\n        <br><br>\n        Takes about 5 minutes. Then we'll review it again (usually within 24 hours).\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, quick fixes needed (then you're in)`,\n    ...template\n  }\n}\n\n/**\n * OTP verification email - Marc Lou style\n */\nexport function createOTPEmailMarcStyle(data: {\n  otp: string\n  purpose?: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Your verification code',\n    preheader: `Code: ${data.otp}`,\n    isOTPEmail: true,\n    content: {\n      greeting: 'Quick verification üëá',\n      mainText: `\n        <div class=\"otp-container\">\n          <div class=\"otp-code\">${data.otp}</div>\n          <div class=\"otp-expiry\">Expires in 10 minutes</div>\n        </div>\n        \n        Just copy and paste this code to continue.\n        <br><br>\n        <em style=\"color: #9CA3AF; font-size: 14px;\">\n        (If you didn't request this, just ignore this email)\n        </em>\n      `,\n      signature: '‚Äî OneDesigner Security'\n    }\n  })\n\n  return {\n    subject: `${data.otp} is your OneDesigner code`,\n    ...template\n  }\n}\n\n/**\n * Project request email for designers - Marc Lou style\n */\nexport function createProjectRequestEmailMarcStyle(data: {\n  designerName: string\n  clientMessage: string\n  projectType?: string\n  timeline?: string\n  budget?: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'New project request!',\n    preheader: 'A client wants to work with you',\n    content: {\n      greeting: `${data.designerName}, you've got a match! üéØ`,\n      mainText: `\n        <strong>A client specifically wants YOU for their project.</strong>\n        <br><br>\n        Not 10 other designers. Not the cheapest option. You.\n        <br><br>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0; border-radius: 4px;\">\n          <strong>Client's message:</strong><br>\n          <em style=\"color: #4B5563;\">\"${data.clientMessage}\"</em>\n        </div>\n        \n        <strong>Project details:</strong><br>\n        üìÅ Type: ${data.projectType || 'Not specified'}<br>\n        ‚è± Timeline: ${data.timeline || 'Flexible'}<br>\n        üí∞ Budget: ${data.budget || 'To be discussed'}\n        <br><br>\n        You have <span class=\"highlight\">7 days</span> to respond before this expires.\n      `,\n      ctaButton: {\n        text: 'View Full Request',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick reminder:</strong> Accepting reveals your contact info to the client. \n        Rejecting keeps you anonymous but frees them to find another designer.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you just got picked for a ${data.budget || 'new'} project`,\n    ...template\n  }\n}"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Email templates inspired by Marc Lou's casual, direct style\n * Combined with OneDesigner's design system\n */\n\nexport interface MarcLouEmailProps {\n  title: string\n  preheader?: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n    additionalContent?: string\n    signature?: string\n  }\n  isOTPEmail?: boolean\n  isRejectionEmail?: boolean\n}\n\n/**\n * Create email template with Marc Lou's casual style + OneDesigner design\n */\nexport function createMarcLouStyleEmail(props: MarcLouEmailProps): { html: string; text: string } {\n  const senderName = props.isOTPEmail ? 'OneDesigner' : 'Hala from OneDesigner'\n  \n  const html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${props.title}</title>\n    ${props.preheader ? `<meta name=\"description\" content=\"${props.preheader}\">` : ''}\n    <style>\n        /* Reset styles */\n        body, table, td, p, a, li, blockquote {\n            -webkit-text-size-adjust: 100%;\n            -ms-text-size-adjust: 100%;\n        }\n        \n        /* Marc Lou inspired minimalist style */\n        body {\n            background-color: #FAFAFA;\n            margin: 0 !important;\n            padding: 0 !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Helvetica, Arial, sans-serif;\n            font-size: 16px;\n            line-height: 1.6;\n            color: #111827;\n        }\n        \n        .email-wrapper {\n            background-color: #FAFAFA;\n            padding: 40px 20px;\n        }\n        \n        .email-container {\n            max-width: 560px;\n            margin: 0 auto;\n            background-color: #FFFFFF;\n            border-radius: 16px;\n            overflow: hidden;\n            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        }\n        \n        /* Header with OneDesigner branding */\n        .header {\n            padding: 32px 32px 24px 32px;\n            border-bottom: 1px solid #F3F4F6;\n            text-align: center;\n        }\n        \n        .logo-container {\n            display: inline-flex;\n            align-items: center;\n            gap: 12px;\n            justify-content: center;\n        }\n        \n        .logo {\n            width: 32px;\n            height: 32px;\n            display: inline-block;\n            vertical-align: middle;\n        }\n        \n        .logo svg {\n            width: 100%;\n            height: 100%;\n        }\n        \n        .brand-name {\n            font-size: 24px;\n            font-weight: 700;\n            color: #111827;\n            letter-spacing: -0.02em;\n            display: inline-block;\n            vertical-align: middle;\n            line-height: 1;\n        }\n        \n        /* Content area */\n        .content {\n            padding: 32px;\n        }\n        \n        .greeting {\n            font-size: 18px;\n            font-weight: 600;\n            color: #111827;\n            margin-bottom: 16px;\n            letter-spacing: -0.01em;\n        }\n        \n        .main-text {\n            font-size: 16px;\n            line-height: 1.7;\n            color: #4B5563;\n            margin-bottom: 24px;\n        }\n        \n        .main-text strong {\n            color: #111827;\n            font-weight: 600;\n        }\n        \n        .highlight {\n            background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%);\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-weight: 600;\n            color: #111827;\n            display: inline-block;\n            transform: rotate(-0.5deg);\n            margin: 0 2px;\n        }\n        \n        /* CTA Button - Marc Lou style */\n        .cta-container {\n            margin: 32px 0;\n        }\n        \n        .cta-button {\n            display: inline-block;\n            padding: 14px 28px;\n            background: #111827;\n            color: #FFFFFF !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-weight: 600;\n            font-size: 16px;\n            letter-spacing: -0.01em;\n            transition: all 0.2s ease;\n        }\n        \n        .cta-button:hover {\n            background: #1F2937;\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n        \n        /* Special styling for OTP */\n        .otp-container {\n            background: #F9FAFB;\n            border: 2px dashed #E5E7EB;\n            border-radius: 12px;\n            padding: 24px;\n            margin: 24px 0;\n            text-align: center;\n        }\n        \n        .otp-code {\n            font-size: 36px;\n            font-weight: 700;\n            letter-spacing: 8px;\n            color: #111827;\n            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;\n        }\n        \n        .otp-expiry {\n            font-size: 14px;\n            color: #6B7280;\n            margin-top: 12px;\n        }\n        \n        /* Footer */\n        .footer {\n            padding: 24px 32px;\n            border-top: 1px solid #F3F4F6;\n            background: #F9FAFB;\n        }\n        \n        .signature {\n            font-size: 16px;\n            color: #111827;\n            font-weight: 600;\n            margin-bottom: 8px;\n        }\n        \n        .footer-text {\n            font-size: 14px;\n            color: #6B7280;\n            margin: 4px 0;\n        }\n        \n        .footer-links {\n            margin-top: 16px;\n            padding-top: 16px;\n            border-top: 1px solid #E5E7EB;\n        }\n        \n        .footer-links a {\n            color: #f0ad4e;\n            text-decoration: none;\n            font-size: 14px;\n            margin: 0 12px;\n        }\n        \n        .footer-links a:hover {\n            text-decoration: underline;\n        }\n        \n        /* Responsive styles */\n        @media only screen and (max-width: 600px) {\n            .email-container {\n                width: 100% !important;\n                border-radius: 0;\n            }\n            .header, .content, .footer {\n                padding: 24px 20px;\n            }\n            .cta-button {\n                display: block;\n                text-align: center;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-wrapper\">\n        <div class=\"email-container\">\n            <!-- Header -->\n            <div class=\"header\">\n                <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n            </div>\n            \n            <!-- Content -->\n            <div class=\"content\">\n                ${props.content.greeting ? `<div class=\"greeting\">${props.content.greeting}</div>` : ''}\n                \n                <div class=\"main-text\">${props.content.mainText}</div>\n                \n                ${props.content.ctaButton ? `\n                    <div class=\"cta-container\">\n                        <a href=\"${props.content.ctaButton.href}\" class=\"cta-button\">\n                            ${props.content.ctaButton.text} ‚Üí\n                        </a>\n                    </div>\n                ` : ''}\n                \n                ${props.content.additionalContent ? `\n                    <div class=\"main-text\">${props.content.additionalContent}</div>\n                ` : ''}\n            </div>\n            \n            <!-- Footer -->\n            <div class=\"footer\">\n                <div class=\"signature\">${props.content.signature || `‚Äî ${senderName}`}</div>\n                <div class=\"footer-text\">Connecting great clients with amazing designers</div>\n                \n                <div class=\"footer-links\">\n                    <a href=\"https://onedesigner.app\">Website</a>\n                    <a href=\"https://onedesigner.app/help\">Help</a>\n                    <a href=\"https://twitter.com/onedesigner\">Twitter</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>`\n\n  // Generate plain text version\n  const text = `\n${props.content.greeting || ''}\n\n${props.content.mainText.replace(/<[^>]*>/g, '')}\n\n${props.content.ctaButton ? `${props.content.ctaButton.text}: ${props.content.ctaButton.href}` : ''}\n\n${props.content.additionalContent ? props.content.additionalContent.replace(/<[^>]*>/g, '') : ''}\n\n${props.content.signature || `‚Äî ${senderName}`}\n\nOneDesigner - Connecting great clients with amazing designers\nWebsite: https://onedesigner.app\n`.trim()\n\n  return { html, text }\n}\n\n/**\n * Welcome email for new clients - Marc Lou style\n */\nexport function createWelcomeClientEmailMarcStyle(data: {\n  clientName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Welcome to OneDesigner!',\n    preheader: 'Your perfect designer match is 0.3 seconds away',\n    content: {\n      greeting: `Hey ${data.clientName} üëã`,\n      mainText: `\n        <strong>Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n        <br><br>\n        Here's what happens next:\n        <br><br>\n        <strong>1.</strong> Tell us about your project (2 min max) <br>\n        <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers <br>\n        <strong>3.</strong> Get your <span class=\"highlight\">perfect match</span> in 0.3 seconds\n        <br><br>\n        No endless scrolling. No awkward interviews. No wondering if they're actually good.\n        <br><br>\n        Just your ideal designer, ready to start.\n      `,\n      ctaButton: {\n        text: 'Start Your Brief',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick tip:</strong> The more specific your brief, the better your match. \n        Don't hold back on the details ‚Äî our AI loves them.\n        <br><br>\n        P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.clientName}, ready to skip the portfolio hunt?`,\n    ...template\n  }\n}\n\n/**\n * Designer approval email - Marc Lou style\n */\nexport function createDesignerApprovalEmailMarcStyle(data: {\n  designerName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: \"You're in!\",\n    preheader: 'Welcome to OneDesigner',\n    content: {\n      greeting: `${data.designerName}, you're in! üéâ`,\n      mainText: `\n        <strong>Your application? Approved.</strong>\n        <br><br>\n        Out of 847 applications this week, yours stood out. Here's why:\n        <br><br>\n        ‚úì Your portfolio shows real client work (not just Dribbble shots)<br>\n        ‚úì You actually explain your design process<br>\n        ‚úì Your style is distinctive, not generic\n        <br><br>\n        <strong>What happens now?</strong>\n        <br><br>\n        Clients submit briefs ‚Üí Our AI matches them to designers ‚Üí \n        If you're the match, you get <span class=\"highlight\">the project request</span>\n        <br><br>\n        No bidding. No competing with 50 other designers. No race to the bottom pricing.\n      `,\n      ctaButton: {\n        text: 'Access Your Dashboard',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Pro tip:</strong> Keep your availability updated. \n        Clients can see if you're ready to start immediately.\n        <br><br>\n        Welcome to the club. Let's get you some great projects.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you're approved! (847 applied, you got in)`,\n    ...template\n  }\n}\n\n/**\n * Designer rejection email - Marc Lou style (simplified without token)\n */\nexport function createDesignerRejectionEmailMarcStyle(data: {\n  designerName: string\n  rejectionReason: string\n  loginUrl?: string\n}): { subject: string; html: string; text: string } {\n  const loginLink = data.loginUrl || 'https://onedesigner.app/designer/login'\n  \n  const template = createMarcLouStyleEmail({\n    title: \"Not quite there yet\",\n    preheader: 'Update your application based on our feedback',\n    isRejectionEmail: true,\n    content: {\n      greeting: `${data.designerName}, let's be honest üí≠`,\n      mainText: `\n        Your application didn't make it this time. But here's the thing:\n        <br><br>\n        <strong>37% of our approved designers</strong> got rejected on their first try.\n        <br><br>\n        <div class=\"highlight-box\" style=\"background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 24px 0; border-radius: 4px;\">\n          <strong style=\"color: #92400E;\">Why we couldn't approve you:</strong>\n          <br><br>\n          <span style=\"color: #78350F; line-height: 1.6;\">${data.rejectionReason}</span>\n        </div>\n        \n        <strong>The good news?</strong>\n        <br><br>\n        You can fix this right now. Just log in, go to your profile, and update it.\n        <br><br>\n        No starting from scratch. No re-entering everything. Just fix what needs fixing.\n        <br><br>\n        <strong>Quick tips that work:</strong>\n        <br><br>\n        ‚úì Show real client work (not just concepts)<br>\n        ‚úì Explain your design decisions<br>\n        ‚úì Include before/after examples<br>\n        ‚úì Add links to live projects\n      `,\n      ctaButton: {\n        text: 'Login & Update Profile',\n        href: loginLink\n      },\n      additionalContent: `\n        <strong>How to update:</strong>\n        <br>\n        1. Login to your account<br>\n        2. You'll see our feedback<br>\n        3. Click \"Edit Profile\"<br>\n        4. Make the changes<br>\n        5. Hit \"Resubmit for Review\"\n        <br><br>\n        Takes about 5 minutes. Then we'll review it again (usually within 24 hours).\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, quick fixes needed (then you're in)`,\n    ...template\n  }\n}\n\n/**\n * OTP verification email - Marc Lou style\n */\nexport function createOTPEmailMarcStyle(data: {\n  otp: string\n  purpose?: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Your verification code',\n    preheader: `Code: ${data.otp}`,\n    isOTPEmail: true,\n    content: {\n      greeting: 'Quick verification üëá',\n      mainText: `\n        <div class=\"otp-container\">\n          <div class=\"otp-code\">${data.otp}</div>\n          <div class=\"otp-expiry\">Expires in 10 minutes</div>\n        </div>\n        \n        Just copy and paste this code to continue.\n        <br><br>\n        <em style=\"color: #9CA3AF; font-size: 14px;\">\n        (If you didn't request this, just ignore this email)\n        </em>\n      `,\n      signature: '‚Äî OneDesigner Security'\n    }\n  })\n\n  return {\n    subject: `${data.otp} is your OneDesigner code`,\n    ...template\n  }\n}\n\n/**\n * Project request email for designers - Marc Lou style\n */\nexport function createProjectRequestEmailMarcStyle(data: {\n  designerName: string\n  clientMessage: string\n  projectType?: string\n  timeline?: string\n  budget?: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'New project request!',\n    preheader: 'A client wants to work with you',\n    content: {\n      greeting: `${data.designerName}, you've got a match! üéØ`,\n      mainText: `\n        <strong>A client specifically wants YOU for their project.</strong>\n        <br><br>\n        Not 10 other designers. Not the cheapest option. You.\n        <br><br>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0; border-radius: 4px;\">\n          <strong>Client's message:</strong><br>\n          <em style=\"color: #4B5563;\">\"${data.clientMessage}\"</em>\n        </div>\n        \n        <strong>Project details:</strong><br>\n        üìÅ Type: ${data.projectType || 'Not specified'}<br>\n        ‚è± Timeline: ${data.timeline || 'Flexible'}<br>\n        üí∞ Budget: ${data.budget || 'To be discussed'}\n        <br><br>\n        You have <span class=\"highlight\">7 days</span> to respond before this expires.\n      `,\n      ctaButton: {\n        text: 'View Full Request',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick reminder:</strong> Accepting reveals your contact info to the client. \n        Rejecting keeps you anonymous but frees them to find another designer.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you just got picked for a ${data.budget || 'new'} project`,\n    ...template\n  }\n}"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Email templates inspired by Marc Lou's casual, direct style\n * Combined with OneDesigner's design system\n */\n\nexport interface MarcLouEmailProps {\n  title: string\n  preheader?: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n    additionalContent?: string\n    signature?: string\n  }\n  isOTPEmail?: boolean\n  isRejectionEmail?: boolean\n}\n\n/**\n * Create email template with Marc Lou's casual style + OneDesigner design\n */\nexport function createMarcLouStyleEmail(props: MarcLouEmailProps): { html: string; text: string } {\n  const senderName = props.isOTPEmail ? 'OneDesigner' : 'Hala from OneDesigner'\n  \n  const html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${props.title}</title>\n    ${props.preheader ? `<meta name=\"description\" content=\"${props.preheader}\">` : ''}\n    <style>\n        /* Reset styles */\n        body, table, td, p, a, li, blockquote {\n            -webkit-text-size-adjust: 100%;\n            -ms-text-size-adjust: 100%;\n        }\n        \n        /* Marc Lou inspired minimalist style */\n        body {\n            background-color: #FAFAFA;\n            margin: 0 !important;\n            padding: 0 !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Helvetica, Arial, sans-serif;\n            font-size: 16px;\n            line-height: 1.6;\n            color: #111827;\n        }\n        \n        .email-wrapper {\n            background-color: #FAFAFA;\n            padding: 40px 20px;\n        }\n        \n        .email-container {\n            max-width: 560px;\n            margin: 0 auto;\n            background-color: #FFFFFF;\n            border-radius: 16px;\n            overflow: hidden;\n            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        }\n        \n        /* Header with OneDesigner branding */\n        .header {\n            padding: 32px 32px 24px 32px;\n            border-bottom: 1px solid #F3F4F6;\n            text-align: center;\n        }\n        \n        .logo-container {\n            display: inline-flex;\n            align-items: center;\n            gap: 12px;\n            justify-content: center;\n        }\n        \n        .logo {\n            width: 32px;\n            height: 32px;\n            display: inline-block;\n            vertical-align: middle;\n        }\n        \n        .logo svg {\n            width: 100%;\n            height: 100%;\n        }\n        \n        .brand-name {\n            font-size: 24px;\n            font-weight: 700;\n            color: #111827;\n            letter-spacing: -0.02em;\n            display: inline-block;\n            vertical-align: middle;\n            line-height: 1;\n        }\n        \n        /* Content area */\n        .content {\n            padding: 32px;\n        }\n        \n        .greeting {\n            font-size: 18px;\n            font-weight: 600;\n            color: #111827;\n            margin-bottom: 16px;\n            letter-spacing: -0.01em;\n        }\n        \n        .main-text {\n            font-size: 16px;\n            line-height: 1.7;\n            color: #4B5563;\n            margin-bottom: 24px;\n        }\n        \n        .main-text strong {\n            color: #111827;\n            font-weight: 600;\n        }\n        \n        .highlight {\n            background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%);\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-weight: 600;\n            color: #111827;\n            display: inline-block;\n            transform: rotate(-0.5deg);\n            margin: 0 2px;\n        }\n        \n        /* CTA Button - Marc Lou style */\n        .cta-container {\n            margin: 32px 0;\n        }\n        \n        .cta-button {\n            display: inline-block;\n            padding: 14px 28px;\n            background: #111827;\n            color: #FFFFFF !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-weight: 600;\n            font-size: 16px;\n            letter-spacing: -0.01em;\n            transition: all 0.2s ease;\n        }\n        \n        .cta-button:hover {\n            background: #1F2937;\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n        \n        /* Special styling for OTP */\n        .otp-container {\n            background: #F9FAFB;\n            border: 2px dashed #E5E7EB;\n            border-radius: 12px;\n            padding: 24px;\n            margin: 24px 0;\n            text-align: center;\n        }\n        \n        .otp-code {\n            font-size: 36px;\n            font-weight: 700;\n            letter-spacing: 8px;\n            color: #111827;\n            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;\n        }\n        \n        .otp-expiry {\n            font-size: 14px;\n            color: #6B7280;\n            margin-top: 12px;\n        }\n        \n        /* Footer */\n        .footer {\n            padding: 24px 32px;\n            border-top: 1px solid #F3F4F6;\n            background: #F9FAFB;\n        }\n        \n        .signature {\n            font-size: 16px;\n            color: #111827;\n            font-weight: 600;\n            margin-bottom: 8px;\n        }\n        \n        .footer-text {\n            font-size: 14px;\n            color: #6B7280;\n            margin: 4px 0;\n        }\n        \n        .footer-links {\n            margin-top: 16px;\n            padding-top: 16px;\n            border-top: 1px solid #E5E7EB;\n        }\n        \n        .footer-links a {\n            color: #f0ad4e;\n            text-decoration: none;\n            font-size: 14px;\n            margin: 0 12px;\n        }\n        \n        .footer-links a:hover {\n            text-decoration: underline;\n        }\n        \n        /* Responsive styles */\n        @media only screen and (max-width: 600px) {\n            .email-container {\n                width: 100% !important;\n                border-radius: 0;\n            }\n            .header, .content, .footer {\n                padding: 24px 20px;\n            }\n            .cta-button {\n                display: block;\n                text-align: center;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-wrapper\">\n        <div class=\"email-container\">\n            <!-- Header -->\n            <div class=\"header\">\n                <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n            </div>\n            \n            <!-- Content -->\n            <div class=\"content\">\n                ${props.content.greeting ? `<div class=\"greeting\">${props.content.greeting}</div>` : ''}\n                \n                <div class=\"main-text\">${props.content.mainText}</div>\n                \n                ${props.content.ctaButton ? `\n                    <div class=\"cta-container\">\n                        <a href=\"${props.content.ctaButton.href}\" class=\"cta-button\">\n                            ${props.content.ctaButton.text} ‚Üí\n                        </a>\n                    </div>\n                ` : ''}\n                \n                ${props.content.additionalContent ? `\n                    <div class=\"main-text\">${props.content.additionalContent}</div>\n                ` : ''}\n            </div>\n            \n            <!-- Footer -->\n            <div class=\"footer\">\n                <div class=\"signature\">${props.content.signature || `‚Äî ${senderName}`}</div>\n                <div class=\"footer-text\">Connecting great clients with amazing designers</div>\n                \n                <div class=\"footer-links\">\n                    <a href=\"https://onedesigner.app\">Website</a>\n                    <a href=\"https://onedesigner.app/help\">Help</a>\n                    <a href=\"https://twitter.com/onedesigner\">Twitter</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>`\n\n  // Generate plain text version\n  const text = `\n${props.content.greeting || ''}\n\n${props.content.mainText.replace(/<[^>]*>/g, '')}\n\n${props.content.ctaButton ? `${props.content.ctaButton.text}: ${props.content.ctaButton.href}` : ''}\n\n${props.content.additionalContent ? props.content.additionalContent.replace(/<[^>]*>/g, '') : ''}\n\n${props.content.signature || `‚Äî ${senderName}`}\n\nOneDesigner - Connecting great clients with amazing designers\nWebsite: https://onedesigner.app\n`.trim()\n\n  return { html, text }\n}\n\n/**\n * Welcome email for new clients - Marc Lou style\n */\nexport function createWelcomeClientEmailMarcStyle(data: {\n  clientName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Welcome to OneDesigner!',\n    preheader: 'Your perfect designer match is 0.3 seconds away',\n    content: {\n      greeting: `Hey ${data.clientName} üëã`,\n      mainText: `\n        <strong>Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n        <br><br>\n        Here's what happens next:\n        <br><br>\n        <strong>1.</strong> Tell us about your project (2 min max) <br>\n        <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers <br>\n        <strong>3.</strong> Get your <span class=\"highlight\">perfect match</span> in 0.3 seconds\n        <br><br>\n        No endless scrolling. No awkward interviews. No wondering if they're actually good.\n        <br><br>\n        Just your ideal designer, ready to start.\n      `,\n      ctaButton: {\n        text: 'Start Your Brief',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick tip:</strong> The more specific your brief, the better your match. \n        Don't hold back on the details ‚Äî our AI loves them.\n        <br><br>\n        P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.clientName}, ready to skip the portfolio hunt?`,\n    ...template\n  }\n}\n\n/**\n * Designer approval email - Marc Lou style\n */\nexport function createDesignerApprovalEmailMarcStyle(data: {\n  designerName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: \"You're in!\",\n    preheader: 'Welcome to OneDesigner',\n    content: {\n      greeting: `${data.designerName}, you're in! üéâ`,\n      mainText: `\n        <strong>Your application? Approved.</strong>\n        <br><br>\n        Out of 847 applications this week, yours stood out. Here's why:\n        <br><br>\n        ‚úì Your portfolio shows real client work (not just Dribbble shots)<br>\n        ‚úì You actually explain your design process<br>\n        ‚úì Your style is distinctive, not generic\n        <br><br>\n        <strong>What happens now?</strong>\n        <br><br>\n        Clients submit briefs ‚Üí Our AI matches them to designers ‚Üí \n        If you're the match, you get <span class=\"highlight\">the project request</span>\n        <br><br>\n        No bidding. No competing with 50 other designers. No race to the bottom pricing.\n      `,\n      ctaButton: {\n        text: 'Access Your Dashboard',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Pro tip:</strong> Keep your availability updated. \n        Clients can see if you're ready to start immediately.\n        <br><br>\n        Welcome to the club. Let's get you some great projects.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you're approved! (847 applied, you got in)`,\n    ...template\n  }\n}\n\n/**\n * Designer rejection email - Marc Lou style (simplified without token)\n */\nexport function createDesignerRejectionEmailMarcStyle(data: {\n  designerName: string\n  rejectionReason: string\n  loginUrl?: string\n}): { subject: string; html: string; text: string } {\n  const loginLink = data.loginUrl || 'https://onedesigner.app/designer/login'\n  \n  const template = createMarcLouStyleEmail({\n    title: \"Not quite there yet\",\n    preheader: 'Update your application based on our feedback',\n    isRejectionEmail: true,\n    content: {\n      greeting: `${data.designerName}, let's be honest üí≠`,\n      mainText: `\n        Your application didn't make it this time. But here's the thing:\n        <br><br>\n        <strong>37% of our approved designers</strong> got rejected on their first try.\n        <br><br>\n        <div class=\"highlight-box\" style=\"background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 24px 0; border-radius: 4px;\">\n          <strong style=\"color: #92400E;\">Why we couldn't approve you:</strong>\n          <br><br>\n          <span style=\"color: #78350F; line-height: 1.6;\">${data.rejectionReason}</span>\n        </div>\n        \n        <strong>The good news?</strong>\n        <br><br>\n        You can fix this right now. Just log in, go to your profile, and update it.\n        <br><br>\n        No starting from scratch. No re-entering everything. Just fix what needs fixing.\n        <br><br>\n        <strong>Quick tips that work:</strong>\n        <br><br>\n        ‚úì Show real client work (not just concepts)<br>\n        ‚úì Explain your design decisions<br>\n        ‚úì Include before/after examples<br>\n        ‚úì Add links to live projects\n      `,\n      ctaButton: {\n        text: 'Login & Update Profile',\n        href: loginLink\n      },\n      additionalContent: `\n        <strong>How to update:</strong>\n        <br>\n        1. Login to your account<br>\n        2. You'll see our feedback<br>\n        3. Click \"Edit Profile\"<br>\n        4. Make the changes<br>\n        5. Hit \"Resubmit for Review\"\n        <br><br>\n        Takes about 5 minutes. Then we'll review it again (usually within 24 hours).\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, quick fixes needed (then you're in)`,\n    ...template\n  }\n}\n\n/**\n * OTP verification email - Marc Lou style\n */\nexport function createOTPEmailMarcStyle(data: {\n  otp: string\n  purpose?: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Your verification code',\n    preheader: `Code: ${data.otp}`,\n    isOTPEmail: true,\n    content: {\n      greeting: 'Quick verification üëá',\n      mainText: `\n        <div class=\"otp-container\">\n          <div class=\"otp-code\">${data.otp}</div>\n          <div class=\"otp-expiry\">Expires in 10 minutes</div>\n        </div>\n        \n        Just copy and paste this code to continue.\n        <br><br>\n        <em style=\"color: #9CA3AF; font-size: 14px;\">\n        (If you didn't request this, just ignore this email)\n        </em>\n      `,\n      signature: '‚Äî OneDesigner Security'\n    }\n  })\n\n  return {\n    subject: `${data.otp} is your OneDesigner code`,\n    ...template\n  }\n}\n\n/**\n * Project request email for designers - Marc Lou style\n */\nexport function createProjectRequestEmailMarcStyle(data: {\n  designerName: string\n  clientMessage: string\n  projectType?: string\n  timeline?: string\n  budget?: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'New project request!',\n    preheader: 'A client wants to work with you',\n    content: {\n      greeting: `${data.designerName}, you've got a match! üéØ`,\n      mainText: `\n        <strong>A client specifically wants YOU for their project.</strong>\n        <br><br>\n        Not 10 other designers. Not the cheapest option. You.\n        <br><br>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0; border-radius: 4px;\">\n          <strong>Client's message:</strong><br>\n          <em style=\"color: #4B5563;\">\"${data.clientMessage}\"</em>\n        </div>\n        \n        <strong>Project details:</strong><br>\n        üìÅ Type: ${data.projectType || 'Not specified'}<br>\n        ‚è± Timeline: ${data.timeline || 'Flexible'}<br>\n        üí∞ Budget: ${data.budget || 'To be discussed'}\n        <br><br>\n        You have <span class=\"highlight\">7 days</span> to respond before this expires.\n      `,\n      ctaButton: {\n        text: 'View Full Request',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick reminder:</strong> Accepting reveals your contact info to the client. \n        Rejecting keeps you anonymous but frees them to find another designer.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you just got picked for a ${data.budget || 'new'} project`,\n    ...template\n  }\n}"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "/**\n * Email templates inspired by Marc Lou's casual, direct style\n * Combined with OneDesigner's design system\n */\n\nexport interface MarcLouEmailProps {\n  title: string\n  preheader?: string\n  content: {\n    greeting?: string\n    mainText: string\n    ctaButton?: {\n      text: string\n      href: string\n    }\n    additionalContent?: string\n    signature?: string\n  }\n  isOTPEmail?: boolean\n  isRejectionEmail?: boolean\n}\n\n/**\n * Create email template with Marc Lou's casual style + OneDesigner design\n */\nexport function createMarcLouStyleEmail(props: MarcLouEmailProps): { html: string; text: string } {\n  const senderName = props.isOTPEmail ? 'OneDesigner' : 'Hala from OneDesigner'\n  \n  const html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${props.title}</title>\n    ${props.preheader ? `<meta name=\"description\" content=\"${props.preheader}\">` : ''}\n    <style>\n        /* Reset styles */\n        body, table, td, p, a, li, blockquote {\n            -webkit-text-size-adjust: 100%;\n            -ms-text-size-adjust: 100%;\n        }\n        \n        /* Marc Lou inspired minimalist style */\n        body {\n            background-color: #FAFAFA;\n            margin: 0 !important;\n            padding: 0 !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Helvetica, Arial, sans-serif;\n            font-size: 16px;\n            line-height: 1.6;\n            color: #111827;\n        }\n        \n        .email-wrapper {\n            background-color: #FAFAFA;\n            padding: 40px 20px;\n        }\n        \n        .email-container {\n            max-width: 560px;\n            margin: 0 auto;\n            background-color: #FFFFFF;\n            border-radius: 16px;\n            overflow: hidden;\n            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        }\n        \n        /* Header with OneDesigner branding */\n        .header {\n            padding: 32px 32px 24px 32px;\n            border-bottom: 1px solid #F3F4F6;\n            text-align: center;\n        }\n        \n        .logo-container {\n            display: inline-flex;\n            align-items: center;\n            gap: 12px;\n            justify-content: center;\n        }\n        \n        .logo {\n            width: 32px;\n            height: 32px;\n            display: inline-block;\n            vertical-align: middle;\n        }\n        \n        .logo svg {\n            width: 100%;\n            height: 100%;\n        }\n        \n        .brand-name {\n            font-size: 24px;\n            font-weight: 700;\n            color: #111827;\n            letter-spacing: -0.02em;\n            display: inline-block;\n            vertical-align: middle;\n            line-height: 1;\n        }\n        \n        /* Content area */\n        .content {\n            padding: 32px;\n        }\n        \n        .greeting {\n            font-size: 18px;\n            font-weight: 600;\n            color: #111827;\n            margin-bottom: 16px;\n            letter-spacing: -0.01em;\n        }\n        \n        .main-text {\n            font-size: 16px;\n            line-height: 1.7;\n            color: #4B5563;\n            margin-bottom: 24px;\n        }\n        \n        .main-text strong {\n            color: #111827;\n            font-weight: 600;\n        }\n        \n        .highlight {\n            background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%);\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-weight: 600;\n            color: #111827;\n            display: inline-block;\n            transform: rotate(-0.5deg);\n            margin: 0 2px;\n        }\n        \n        /* CTA Button - Marc Lou style */\n        .cta-container {\n            margin: 32px 0;\n        }\n        \n        .cta-button {\n            display: inline-block;\n            padding: 14px 28px;\n            background: #111827;\n            color: #FFFFFF !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-weight: 600;\n            font-size: 16px;\n            letter-spacing: -0.01em;\n            transition: all 0.2s ease;\n        }\n        \n        .cta-button:hover {\n            background: #1F2937;\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n        \n        /* Special styling for OTP */\n        .otp-container {\n            background: #F9FAFB;\n            border: 2px dashed #E5E7EB;\n            border-radius: 12px;\n            padding: 24px;\n            margin: 24px 0;\n            text-align: center;\n        }\n        \n        .otp-code {\n            font-size: 36px;\n            font-weight: 700;\n            letter-spacing: 8px;\n            color: #111827;\n            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;\n        }\n        \n        .otp-expiry {\n            font-size: 14px;\n            color: #6B7280;\n            margin-top: 12px;\n        }\n        \n        /* Footer */\n        .footer {\n            padding: 24px 32px;\n            border-top: 1px solid #F3F4F6;\n            background: #F9FAFB;\n        }\n        \n        .signature {\n            font-size: 16px;\n            color: #111827;\n            font-weight: 600;\n            margin-bottom: 8px;\n        }\n        \n        .footer-text {\n            font-size: 14px;\n            color: #6B7280;\n            margin: 4px 0;\n        }\n        \n        .footer-links {\n            margin-top: 16px;\n            padding-top: 16px;\n            border-top: 1px solid #E5E7EB;\n        }\n        \n        .footer-links a {\n            color: #f0ad4e;\n            text-decoration: none;\n            font-size: 14px;\n            margin: 0 12px;\n        }\n        \n        .footer-links a:hover {\n            text-decoration: underline;\n        }\n        \n        /* Responsive styles */\n        @media only screen and (max-width: 600px) {\n            .email-container {\n                width: 100% !important;\n                border-radius: 0;\n            }\n            .header, .content, .footer {\n                padding: 24px 20px;\n            }\n            .cta-button {\n                display: block;\n                text-align: center;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-wrapper\">\n        <div class=\"email-container\">\n            <!-- Header -->\n            <div class=\"header\">\n                <span style=\"font-size: 24px; font-weight: 700; color: #f0ad4e; letter-spacing: -0.02em;\">OneDesigner</span>\n            </div>\n            \n            <!-- Content -->\n            <div class=\"content\">\n                ${props.content.greeting ? `<div class=\"greeting\">${props.content.greeting}</div>` : ''}\n                \n                <div class=\"main-text\">${props.content.mainText}</div>\n                \n                ${props.content.ctaButton ? `\n                    <div class=\"cta-container\">\n                        <a href=\"${props.content.ctaButton.href}\" class=\"cta-button\">\n                            ${props.content.ctaButton.text} ‚Üí\n                        </a>\n                    </div>\n                ` : ''}\n                \n                ${props.content.additionalContent ? `\n                    <div class=\"main-text\">${props.content.additionalContent}</div>\n                ` : ''}\n            </div>\n            \n            <!-- Footer -->\n            <div class=\"footer\">\n                <div class=\"signature\">${props.content.signature || `‚Äî ${senderName}`}</div>\n                <div class=\"footer-text\">Connecting great clients with amazing designers</div>\n                \n                <div class=\"footer-links\">\n                    <a href=\"https://onedesigner.app\">Website</a>\n                    <a href=\"https://onedesigner.app/help\">Help</a>\n                    <a href=\"https://twitter.com/onedesigner\">Twitter</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>`\n\n  // Generate plain text version\n  const text = `\n${props.content.greeting || ''}\n\n${props.content.mainText.replace(/<[^>]*>/g, '')}\n\n${props.content.ctaButton ? `${props.content.ctaButton.text}: ${props.content.ctaButton.href}` : ''}\n\n${props.content.additionalContent ? props.content.additionalContent.replace(/<[^>]*>/g, '') : ''}\n\n${props.content.signature || `‚Äî ${senderName}`}\n\nOneDesigner - Connecting great clients with amazing designers\nWebsite: https://onedesigner.app\n`.trim()\n\n  return { html, text }\n}\n\n/**\n * Welcome email for new clients - Marc Lou style\n */\nexport function createWelcomeClientEmailMarcStyle(data: {\n  clientName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Welcome to OneDesigner!',\n    preheader: 'Your perfect designer match is 0.3 seconds away',\n    content: {\n      greeting: `Hey ${data.clientName} üëã`,\n      mainText: `\n        <strong>Congrats!</strong> You just saved yourself weeks of portfolio browsing.\n        <br><br>\n        Here's what happens next:\n        <br><br>\n        <strong>1.</strong> Tell us about your project (2 min max) <br>\n        <strong>2.</strong> Our AI analyzes 2,847 pre-vetted designers <br>\n        <strong>3.</strong> Get your <span class=\"highlight\">perfect match</span> in 0.3 seconds\n        <br><br>\n        No endless scrolling. No awkward interviews. No wondering if they're actually good.\n        <br><br>\n        Just your ideal designer, ready to start.\n      `,\n      ctaButton: {\n        text: 'Start Your Brief',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick tip:</strong> The more specific your brief, the better your match. \n        Don't hold back on the details ‚Äî our AI loves them.\n        <br><br>\n        P.S. ‚Äî Average time from brief to match? 37 seconds. Beat that if you can üòâ\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.clientName}, ready to skip the portfolio hunt?`,\n    ...template\n  }\n}\n\n/**\n * Designer approval email - Marc Lou style\n */\nexport function createDesignerApprovalEmailMarcStyle(data: {\n  designerName: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: \"You're in!\",\n    preheader: 'Welcome to OneDesigner',\n    content: {\n      greeting: `${data.designerName}, you're in! üéâ`,\n      mainText: `\n        <strong>Your application? Approved.</strong>\n        <br><br>\n        Out of 847 applications this week, yours stood out. Here's why:\n        <br><br>\n        ‚úì Your portfolio shows real client work (not just Dribbble shots)<br>\n        ‚úì You actually explain your design process<br>\n        ‚úì Your style is distinctive, not generic\n        <br><br>\n        <strong>What happens now?</strong>\n        <br><br>\n        Clients submit briefs ‚Üí Our AI matches them to designers ‚Üí \n        If you're the match, you get <span class=\"highlight\">the project request</span>\n        <br><br>\n        No bidding. No competing with 50 other designers. No race to the bottom pricing.\n      `,\n      ctaButton: {\n        text: 'Access Your Dashboard',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Pro tip:</strong> Keep your availability updated. \n        Clients can see if you're ready to start immediately.\n        <br><br>\n        Welcome to the club. Let's get you some great projects.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you're approved! (847 applied, you got in)`,\n    ...template\n  }\n}\n\n/**\n * Designer rejection email - Marc Lou style (simplified without token)\n */\nexport function createDesignerRejectionEmailMarcStyle(data: {\n  designerName: string\n  rejectionReason: string\n  loginUrl?: string\n}): { subject: string; html: string; text: string } {\n  const loginLink = data.loginUrl || 'https://onedesigner.app/designer/login'\n  \n  const template = createMarcLouStyleEmail({\n    title: \"Not quite there yet\",\n    preheader: 'Update your application based on our feedback',\n    isRejectionEmail: true,\n    content: {\n      greeting: `${data.designerName}, let's be honest üí≠`,\n      mainText: `\n        Your application didn't make it this time. But here's the thing:\n        <br><br>\n        <strong>37% of our approved designers</strong> got rejected on their first try.\n        <br><br>\n        <div class=\"highlight-box\" style=\"background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 24px 0; border-radius: 4px;\">\n          <strong style=\"color: #92400E;\">Why we couldn't approve you:</strong>\n          <br><br>\n          <span style=\"color: #78350F; line-height: 1.6;\">${data.rejectionReason}</span>\n        </div>\n        \n        <strong>The good news?</strong>\n        <br><br>\n        You can fix this right now. Just log in, go to your profile, and update it.\n        <br><br>\n        No starting from scratch. No re-entering everything. Just fix what needs fixing.\n        <br><br>\n        <strong>Quick tips that work:</strong>\n        <br><br>\n        ‚úì Show real client work (not just concepts)<br>\n        ‚úì Explain your design decisions<br>\n        ‚úì Include before/after examples<br>\n        ‚úì Add links to live projects\n      `,\n      ctaButton: {\n        text: 'Login & Update Profile',\n        href: loginLink\n      },\n      additionalContent: `\n        <strong>How to update:</strong>\n        <br>\n        1. Login to your account<br>\n        2. You'll see our feedback<br>\n        3. Click \"Edit Profile\"<br>\n        4. Make the changes<br>\n        5. Hit \"Resubmit for Review\"\n        <br><br>\n        Takes about 5 minutes. Then we'll review it again (usually within 24 hours).\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, quick fixes needed (then you're in)`,\n    ...template\n  }\n}\n\n/**\n * OTP verification email - Marc Lou style\n */\nexport function createOTPEmailMarcStyle(data: {\n  otp: string\n  purpose?: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'Your verification code',\n    preheader: `Code: ${data.otp}`,\n    isOTPEmail: true,\n    content: {\n      greeting: 'Quick verification üëá',\n      mainText: `\n        <div class=\"otp-container\">\n          <div class=\"otp-code\">${data.otp}</div>\n          <div class=\"otp-expiry\">Expires in 10 minutes</div>\n        </div>\n        \n        Just copy and paste this code to continue.\n        <br><br>\n        <em style=\"color: #9CA3AF; font-size: 14px;\">\n        (If you didn't request this, just ignore this email)\n        </em>\n      `,\n      signature: '‚Äî OneDesigner Security'\n    }\n  })\n\n  return {\n    subject: `${data.otp} is your OneDesigner code`,\n    ...template\n  }\n}\n\n/**\n * Project request email for designers - Marc Lou style\n */\nexport function createProjectRequestEmailMarcStyle(data: {\n  designerName: string\n  clientMessage: string\n  projectType?: string\n  timeline?: string\n  budget?: string\n  dashboardUrl: string\n}): { subject: string; html: string; text: string } {\n  const template = createMarcLouStyleEmail({\n    title: 'New project request!',\n    preheader: 'A client wants to work with you',\n    content: {\n      greeting: `${data.designerName}, you've got a match! üéØ`,\n      mainText: `\n        <strong>A client specifically wants YOU for their project.</strong>\n        <br><br>\n        Not 10 other designers. Not the cheapest option. You.\n        <br><br>\n        <div style=\"background: #F9FAFB; border-left: 4px solid #f0ad4e; padding: 16px; margin: 16px 0; border-radius: 4px;\">\n          <strong>Client's message:</strong><br>\n          <em style=\"color: #4B5563;\">\"${data.clientMessage}\"</em>\n        </div>\n        \n        <strong>Project details:</strong><br>\n        üìÅ Type: ${data.projectType || 'Not specified'}<br>\n        ‚è± Timeline: ${data.timeline || 'Flexible'}<br>\n        üí∞ Budget: ${data.budget || 'To be discussed'}\n        <br><br>\n        You have <span class=\"highlight\">7 days</span> to respond before this expires.\n      `,\n      ctaButton: {\n        text: 'View Full Request',\n        href: data.dashboardUrl\n      },\n      additionalContent: `\n        <strong>Quick reminder:</strong> Accepting reveals your contact info to the client. \n        Rejecting keeps you anonymous but frees them to find another designer.\n      `,\n      signature: '‚Äî Hala from OneDesigner'\n    }\n  })\n\n  return {\n    subject: `${data.designerName}, you just got picked for a ${data.budget || 'new'} project`,\n    ...template\n  }\n}"
    }
  ],
  "src/app/api/test-email/route.ts": [
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function GET(request: NextRequest) {\n  // Only allow in development\n  if (process.env.NODE_ENV === 'production' && !request.headers.get('x-test-key')) {\n    return NextResponse.json({ error: 'Not allowed' }, { status: 403 })\n  }\n\n  const email = request.nextUrl.searchParams.get('email')\n  \n  if (!email) {\n    return NextResponse.json({ error: 'Email parameter required' }, { status: 400 })\n  }\n\n  logger.info('Test email endpoint called')\n  logger.info('EMAIL_FROM:', process.env.EMAIL_FROM)\n  logger.info('RESEND_API_KEY exists:', !!process.env.RESEND_API_KEY)\n  logger.info('RESEND_API_KEY length:', process.env.RESEND_API_KEY?.length)\n  logger.info('RESEND_API_KEY starts with:', process.env.RESEND_API_KEY?.substring(0, 10))\n\n  try {\n    // Test direct Resend API call\n    const response = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${process.env.RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: process.env.EMAIL_FROM || 'OneDesigner <team@onedesigner.app>',\n        to: email,\n        subject: 'Test Email from OneDesigner',\n        html: '<h1>Test Email</h1><p>If you receive this, email sending is working!</p>',\n        text: 'Test Email - If you receive this, email sending is working!'\n      }),\n    })\n\n    const responseText = await response.text()\n    logger.info('Resend response status:', response.status)\n    logger.info('Resend response:', responseText)\n\n    if (!response.ok) {\n      return NextResponse.json({ \n        error: 'Resend API error',\n        status: response.status,\n        details: responseText \n      }, { status: response.status })\n    }\n\n    return NextResponse.json({ \n      success: true, \n      message: 'Test email sent',\n      response: JSON.parse(responseText)\n    })\n  } catch (error) {\n    logger.error('Test email error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Failed to send test email',\n      details: error\n    }, { status: 500 })\n  }\n}"
    }
  ],
  "src/app/api/config/route.ts": [
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "import { NextRequest } from 'next/server'\nimport { apiResponse } from '@/lib/api/responses'\nimport { Features } from '@/lib/features'\nimport { getOneDesignerConfig, isConfigInitialized, safeInitConfig } from '@/lib/config/init'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function GET(request: NextRequest) {\n  try {\n    // Initialize config if not already initialized\n    if (!isConfigInitialized()) {\n      await safeInitConfig()\n    }\n\n    // Use ConfigManager if enabled\n    if (Features.USE_CONFIG_MANAGER) {\n      logger.info('‚ú® Using ConfigManager for configuration endpoint')\n      \n      const { getConfig } = await import('@/lib/core/config-manager')\n      const configManager = getConfig()\n      \n      // Get all non-sensitive configuration\n      const allConfig = configManager.getAll(false)\n      \n      // Get some metadata for demonstration\n      const metadata = {\n        'app.name': configManager.getMetadata('app.name'),\n        'app.environment': configManager.getMetadata('app.environment'),\n        'features.dataService': configManager.getMetadata('features.dataService')\n      }\n\n      return apiResponse.success({\n        message: 'Configuration loaded via ConfigManager',\n        configManager: {\n          isLoaded: configManager.isLoaded(),\n          totalValues: Object.keys(allConfig).length\n        },\n        configuration: allConfig,\n        sampleMetadata: metadata,\n        features: {\n          dataService: Features.USE_NEW_DATA_SERVICE,\n          errorManager: Features.USE_ERROR_MANAGER,\n          requestPipeline: Features.USE_REQUEST_PIPELINE,\n          configManager: Features.USE_CONFIG_MANAGER,\n          queryCache: Features.ENABLE_QUERY_CACHE,\n          monitoring: Features.ENABLE_MONITORING\n        }\n      })\n    }\n\n    // Legacy configuration display\n    return apiResponse.success({\n      message: 'Configuration loaded via environment variables (legacy)',\n      configuration: {\n        'app.environment': process.env.NODE_ENV || 'development',\n        'app.url': process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000',\n        'database.url': process.env.NEXT_PUBLIC_SUPABASE_URL ? '[CONFIGURED]' : '[MISSING]',\n        'api.deepseek.key': process.env.DEEPSEEK_API_KEY ? '[CONFIGURED]' : '[MISSING]'\n      },\n      features: {\n        dataService: Features.USE_NEW_DATA_SERVICE,\n        errorManager: Features.USE_ERROR_MANAGER,\n        requestPipeline: Features.USE_REQUEST_PIPELINE,\n        configManager: Features.USE_CONFIG_MANAGER\n      }\n    })\n\n  } catch (error) {\n    logger.error('Configuration endpoint error:', error)\n    return apiResponse.error('Failed to load configuration')\n  }\n}\n\n// POST endpoint to update configuration (admin only in production)\nexport async function POST(request: NextRequest) {\n  try {\n    if (process.env.NODE_ENV === 'production') {\n      return apiResponse.error('Configuration updates not allowed in production via API')\n    }\n\n    if (!Features.USE_CONFIG_MANAGER) {\n      return apiResponse.error('ConfigManager not enabled')\n    }\n\n    const { key, value } = await request.json()\n\n    if (!key || value === undefined) {\n      return apiResponse.error('Key and value are required')\n    }\n\n    const { getConfig, ConfigSource } = await import('@/lib/core/config-manager')\n    const configManager = getConfig()\n\n    // Update configuration\n    configManager.set(key, value, ConfigSource.DEFAULT)\n\n    return apiResponse.success({\n      message: `Configuration '${key}' updated successfully`,\n      key,\n      value,\n      metadata: configManager.getMetadata(key)\n    })\n\n  } catch (error) {\n    logger.error('Configuration update error:', error)\n    return apiResponse.error('Failed to update configuration')\n  }\n}"
    }
  ],
  "src/app/blog/[slug]/page.tsx": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { Suspense } from 'react';\nimport { notFound } from 'next/navigation';\nimport BlogPostClient from './BlogPostClient';\n\ninterface BlogPostPageProps {\n  params: {\n    slug: string;\n  };\n}\n\nasync function getPost(slug: string) {\n  try {\n    // Use relative URL for server-side fetching in development\n    const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n    const response = await fetch(`${baseUrl}/api/blog/posts/slug/${slug}`, {\n      cache: 'no-store'\n    });\n    \n    if (!response.ok) {\n      return null;\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Failed to fetch post:', error);\n    return null;\n  }\n}\n\nexport async function generateMetadata({ params }: BlogPostPageProps) {\n  const post = await getPost(params.slug);\n  \n  if (!post) {\n    return {\n      title: 'Post Not Found - OneDesigner Blog',\n    };\n  }\n\n  return {\n    title: `${post.title} - OneDesigner Blog`,\n    description: post.preview,\n    keywords: `${post.title}, OneDesigner, design blog, ${post.category}`,\n    openGraph: {\n      title: post.title,\n      description: post.preview,\n      type: 'article',\n      url: `https://onedesigner.app/blog/${post.slug}`,\n      images: post.cover_image ? [post.cover_image] : [],\n      publishedTime: post.created_at,\n      modifiedTime: post.updated_at,\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: post.title,\n      description: post.preview,\n      images: post.cover_image ? [post.cover_image] : [],\n    },\n  };\n}\n\nexport default async function BlogPostPage({ params }: BlogPostPageProps) {\n  const post = await getPost(params.slug);\n\n  if (!post) {\n    notFound();\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Suspense fallback={\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading article... üìñ</p>\n          </div>\n        </div>\n      }>\n        <BlogPostClient post={post} />\n      </Suspense>\n    </div>\n  );\n}"
    },
    {
      "pattern": "http://localhost:3000",
      "replacement": "DEV_URLS.LOCAL.BASE",
      "line": 1,
      "context": "import { Suspense } from 'react';\nimport { notFound } from 'next/navigation';\nimport BlogPostClient from './BlogPostClient';\n\ninterface BlogPostPageProps {\n  params: {\n    slug: string;\n  };\n}\n\nasync function getPost(slug: string) {\n  try {\n    // Use relative URL for server-side fetching in development\n    const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n    const response = await fetch(`${baseUrl}/api/blog/posts/slug/${slug}`, {\n      cache: 'no-store'\n    });\n    \n    if (!response.ok) {\n      return null;\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Failed to fetch post:', error);\n    return null;\n  }\n}\n\nexport async function generateMetadata({ params }: BlogPostPageProps) {\n  const post = await getPost(params.slug);\n  \n  if (!post) {\n    return {\n      title: 'Post Not Found - OneDesigner Blog',\n    };\n  }\n\n  return {\n    title: `${post.title} - OneDesigner Blog`,\n    description: post.preview,\n    keywords: `${post.title}, OneDesigner, design blog, ${post.category}`,\n    openGraph: {\n      title: post.title,\n      description: post.preview,\n      type: 'article',\n      url: `https://onedesigner.app/blog/${post.slug}`,\n      images: post.cover_image ? [post.cover_image] : [],\n      publishedTime: post.created_at,\n      modifiedTime: post.updated_at,\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: post.title,\n      description: post.preview,\n      images: post.cover_image ? [post.cover_image] : [],\n    },\n  };\n}\n\nexport default async function BlogPostPage({ params }: BlogPostPageProps) {\n  const post = await getPost(params.slug);\n\n  if (!post) {\n    notFound();\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Suspense fallback={\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading article... üìñ</p>\n          </div>\n        </div>\n      }>\n        <BlogPostClient post={post} />\n      </Suspense>\n    </div>\n  );\n}"
    }
  ],
  "src/app/api/payment/create-checkout/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { createCheckout } from '@/lib/lemonsqueezy/checkout'\nimport { ProductKey } from '@/lib/lemonsqueezy/client'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { productKey, email, clientId, matchId } = await request.json()\n\n    if (!productKey || !email || !clientId) {\n      return NextResponse.json(\n        { error: 'Missing required fields' },\n        { status: 400 }\n      )\n    }\n\n    // Validate product key\n    if (!['STARTER_PACK', 'GROWTH_PACK', 'SCALE_PACK'].includes(productKey)) {\n      return NextResponse.json(\n        { error: 'Invalid product' },\n        { status: 400 }\n      )\n    }\n\n    // Create checkout URL\n    const checkoutUrl = await createCheckout({\n      productKey: productKey as ProductKey,\n      email,\n      clientId,\n      matchId,\n      redirectUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/payment/success`\n    })\n\n    return NextResponse.json({ \n      success: true, \n      checkoutUrl \n    })\n  } catch (error) {\n    logger.error('Error creating checkout:', error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Failed to create checkout' },\n      { status: 500 }\n    )\n  }\n}"
    }
  ],
  "src/app/api/designer/verify/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { createServiceClient } from '@/lib/supabase/server'\nimport { verifyCustomOTP } from '@/lib/auth/custom-otp'\nimport { cookies } from 'next/headers'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { welcomeDesignerEmail } from '@/lib/email/templates/welcome-designer'\nimport { apiResponse, handleApiError } from '@/lib/api/responses'\nimport { AUTH_COOKIES } from '@/lib/constants'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email, token, applicationData } = await request.json()\n\n    if (!email || !token || !applicationData) {\n      return apiResponse.error('Missing required fields')\n    }\n\n    // Verify OTP\n    const isValid = await verifyCustomOTP(email, token)\n\n    if (!isValid) {\n      return apiResponse.unauthorized('Invalid or expired code')\n    }\n\n    const supabase = createServiceClient()\n\n    // Create designer profile with all application data\n    const { data: designer, error } = await supabase\n      .from('designers')\n      .insert({\n        // Basic Info\n        first_name: applicationData.firstName,\n        last_name: applicationData.lastName,\n        last_initial: applicationData.lastName ? applicationData.lastName.charAt(0).toUpperCase() : '',\n        email: applicationData.email,\n        phone: applicationData.phone || null,\n        \n        // Professional Info\n        title: applicationData.title,\n        years_experience: applicationData.yearsExperience, // This will store as string (e.g., \"3-5\")\n        website_url: applicationData.websiteUrl,\n        portfolio_url: applicationData.portfolioUrl || null,\n        project_price_from: parseFloat(applicationData.projectPriceFrom),\n        project_price_to: parseFloat(applicationData.projectPriceTo),\n        \n        // Location & Availability\n        city: applicationData.city,\n        country: applicationData.country,\n        timezone: applicationData.timezone,\n        availability: applicationData.availability,\n        \n        // Style & Expertise\n        bio: applicationData.bio,\n        \n        // Enhanced Portfolio\n        dribbble_url: applicationData.dribbbleUrl || null,\n        behance_url: applicationData.behanceUrl || null,\n        linkedin_url: applicationData.linkedinUrl || null,\n        \n        // Experience & Preferences\n        previous_clients: applicationData.previousClients || null,\n        project_preferences: applicationData.projectPreferences,\n        working_style: applicationData.workingStyle,\n        communication_style: applicationData.communicationStyle,\n        remote_experience: applicationData.remoteExperience,\n        team_collaboration: applicationData.teamCollaboration || null,\n        \n        // Status flags\n        is_verified: true, // Email verified\n        is_approved: false, // Needs admin approval\n        is_available: true,\n        \n        // Defaults\n        rating: 0, // No rating yet\n        total_projects: 0,\n        subscription_tier: 'free'\n      })\n      .select()\n      .single()\n\n    if (error) {\n      logger.error('Error creating designer:', error)\n      return apiResponse.serverError('Failed to create designer profile', error)\n    }\n\n    // Insert styles\n    if (applicationData.styles && applicationData.styles.length > 0) {\n      const styleRecords = applicationData.styles.map((style: string) => ({\n        designer_id: designer.id,\n        style\n      }))\n      await supabase.from('designer_styles').insert(styleRecords)\n    }\n\n    // Insert project types\n    if (applicationData.projectTypes && applicationData.projectTypes.length > 0) {\n      const projectTypeRecords = applicationData.projectTypes.map((projectType: string) => ({\n        designer_id: designer.id,\n        project_type: projectType\n      }))\n      await supabase.from('designer_project_types').insert(projectTypeRecords)\n    }\n\n    // Insert industries\n    if (applicationData.industries && applicationData.industries.length > 0) {\n      const industryRecords = applicationData.industries.map((industry: string) => ({\n        designer_id: designer.id,\n        industry\n      }))\n      await supabase.from('designer_industries').insert(industryRecords)\n    }\n\n    // Insert specializations\n    if (applicationData.specializations && applicationData.specializations.length > 0) {\n      const specializationRecords = applicationData.specializations.map((specialization: string) => ({\n        designer_id: designer.id,\n        specialization\n      }))\n      await supabase.from('designer_specializations').insert(specializationRecords)\n    }\n\n    // Insert software skills\n    if (applicationData.softwareSkills && applicationData.softwareSkills.length > 0) {\n      const softwareRecords = applicationData.softwareSkills.map((software: string) => ({\n        designer_id: designer.id,\n        software\n      }))\n      await supabase.from('designer_software_skills').insert(softwareRecords)\n    }\n\n    // Send welcome email to new designer\n    const { subject, html, text } = welcomeDesignerEmail({\n      designerName: designer.first_name,\n      dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/designer/dashboard`\n    })\n    \n    await sendEmail({ to: email, subject, html, text })\n\n    // Set session cookie for designer\n    const cookieStore = cookies()\n    cookieStore.set(AUTH_COOKIES.DESIGNER, JSON.stringify({\n      email,\n      designerId: designer.id,\n      authenticatedAt: new Date().toISOString()\n    }), {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'lax',\n      maxAge: 60 * 60 * 24 * 30, // 30 days\n    })\n\n    return apiResponse.success({ \n      success: true, \n      designer: {\n        id: designer.id,\n        email: designer.email,\n        firstName: designer.first_name,\n        lastName: designer.last_name,\n        isApproved: designer.is_approved\n      }\n    })\n  } catch (error) {\n    return handleApiError(error, 'designer/verify')\n  }\n}"
    }
  ],
  "src/app/api/checkout/create/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { cookies } from 'next/headers'\nimport { PRODUCTS } from '@/lib/lemonsqueezy/client'\nimport { AUTH_COOKIES, API_ENDPOINTS } from '@/lib/constants'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function POST(request: NextRequest) {\n  try {\n    logger.info('üõí Checkout API called')\n    const { productKey, matchId } = await request.json()\n    logger.info('üì¶ Request data:', { productKey, matchId })\n\n    if (!productKey || !PRODUCTS[productKey as keyof typeof PRODUCTS]) {\n      logger.error('Invalid product key:', productKey)\n      return NextResponse.json(\n        { error: 'Invalid product' },\n        { status: 400 }\n      )\n    }\n\n    // Get client session\n    const cookieStore = cookies()\n    const sessionCookie = cookieStore.get(AUTH_COOKIES.CLIENT)\n    logger.info('Session cookie exists:', !!sessionCookie)\n    \n    if (!sessionCookie) {\n      logger.error('No session cookie found')\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    let session\n    try {\n      session = JSON.parse(sessionCookie.value)\n      logger.info('Session parsed:', { email: session.email, clientId: session.clientId })\n    } catch (e) {\n      logger.error('Failed to parse session:', e)\n      return NextResponse.json(\n        { error: 'Invalid session' },\n        { status: 401 }\n      )\n    }\n\n    const { email, clientId } = session\n    \n    if (!email || !clientId) {\n      logger.error('Missing email or clientId in session:', { email: !!email, clientId: !!clientId })\n      return NextResponse.json(\n        { error: 'Invalid session data' },\n        { status: 401 }\n      )\n    }\n\n    const product = PRODUCTS[productKey as keyof typeof PRODUCTS]\n    logger.info('Product selected:', { productKey, credits: product.credits, variantId: product.variantId })\n\n    // Create checkout URL - simplified format for Lemon Squeezy\n    const checkoutData = {\n      email: email,\n      name: email.split('@')[0] // Use part before @ as name\n    }\n\n    // Verify environment variables\n    const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'\n    logger.info('üîç Environment check:', {\n      hasApiKey: !!process.env.LEMONSQUEEZY_API_KEY,\n      apiKeyStart: process.env.LEMONSQUEEZY_API_KEY?.substring(0, 20) + '...',\n      hasStoreId: !!process.env.LEMONSQUEEZY_STORE_ID,\n      storeId: process.env.LEMONSQUEEZY_STORE_ID,\n      baseUrl: baseUrl\n    })\n\n    if (!process.env.LEMONSQUEEZY_API_KEY) {\n      logger.error('‚ùå Missing LEMONSQUEEZY_API_KEY')\n      logger.error('‚ùå Available env vars:', Object.keys(process.env).filter(k => k.includes('LEMON')))\n      return NextResponse.json(\n        { error: 'LemonSqueezy API key not configured', details: 'LEMONSQUEEZY_API_KEY environment variable not found' },\n        { status: 500 }\n      )\n    }\n\n    if (!process.env.LEMONSQUEEZY_STORE_ID) {\n      logger.error('‚ùå Missing LEMONSQUEEZY_STORE_ID')\n      return NextResponse.json(\n        { error: 'LemonSqueezy store ID not configured' },\n        { status: 500 }\n      )\n    }\n\n    if (!product.variantId) {\n      logger.error('‚ùå Missing variantId for product:', productKey)\n      return NextResponse.json(\n        { error: `Product ${productKey} not properly configured` },\n        { status: 500 }\n      )\n    }\n\n    // Create checkout using correct LemonSqueezy API format\n    const requestBody = {\n      data: {\n        type: 'checkouts',\n        attributes: {\n          checkout_data: {\n            email: email,\n            name: email.split('@')[0],\n            custom: {\n              client_id: clientId,\n              credits: product.credits.toString(),\n              match_id: matchId || 'none',\n              product_key: productKey\n            }\n          },\n          checkout_options: {\n            embed: false,\n            media: false,\n            logo: true\n          },\n          product_options: {\n            name: product.name,\n            description: `Get ${product.credits} designer matches for your projects`,\n            media: [],\n            redirect_url: `${baseUrl}/payment/success`,\n            receipt_button_text: 'View Your Matches',\n            receipt_link_url: `${baseUrl}/match`,\n            receipt_thank_you_note: 'Thanks for your purchase! Your credits have been added to your account.'\n          }\n        },\n        relationships: {\n          store: {\n            data: {\n              type: 'stores',\n              id: process.env.LEMONSQUEEZY_STORE_ID!.toString()\n            }\n          },\n          variant: {\n            data: {\n              type: 'variants', \n              id: product.variantId.toString()\n            }\n          }\n        }\n      }\n    }\n\n    logger.info('üöÄ Creating checkout with payload:', JSON.stringify(requestBody, null, 2))\n\n    let response\n    try {\n      response = await fetch(`${API_ENDPOINTS.LEMONSQUEEZY}/checkouts`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${process.env.LEMONSQUEEZY_API_KEY}`,\n          'Accept': 'application/vnd.api+json',\n          'Content-Type': 'application/vnd.api+json',\n        },\n        body: JSON.stringify(requestBody)\n      })\n    } catch (fetchError) {\n      logger.error('‚ùå Fetch failed:', fetchError)\n      throw new Error(`Network error: ${fetchError}`)\n    }\n\n    logger.info('‚úÖ LemonSqueezy response status:', response.status)\n    logger.info('‚úÖ Response headers:', Object.fromEntries(response.headers.entries()))\n\n    if (!response.ok) {\n      const error = await response.text()\n      logger.error('‚ùå Lemon Squeezy API Error:')\n      logger.error('Status:', response.status)\n      logger.error('Response:', error)\n      logger.error('Headers:', Object.fromEntries(response.headers.entries()))\n      \n      // Try to parse JSON error for more details\n      try {\n        const errorJson = JSON.parse(error)\n        logger.error('Parsed error:', JSON.stringify(errorJson, null, 2))\n      } catch (e) {\n        logger.error('Raw error text:', error)\n      }\n      \n      throw new Error(`LemonSqueezy API failed with status ${response.status}: ${error}`)\n    }\n\n    const data = await response.json()\n\n    if (!data.data?.attributes?.url) {\n      throw new Error('Failed to create checkout URL')\n    }\n\n    return NextResponse.json({\n      checkoutUrl: data.data.attributes.url\n    })\n  } catch (error: any) {\n    logger.error('‚ùå Checkout creation error:', error)\n    logger.error('‚ùå Error type:', typeof error)\n    logger.error('‚ùå Error message:', error?.message)\n    logger.error('‚ùå Error stack:', error?.stack)\n    \n    // Return specific error based on type\n    let errorMessage = 'Failed to create checkout'\n    if (error?.message?.includes('Network error')) {\n      errorMessage = 'Cannot connect to payment service'\n    } else if (error?.message?.includes('LemonSqueezy API failed')) {\n      errorMessage = 'Payment service configuration error'\n    } else if (error?.message?.includes('not configured')) {\n      errorMessage = error.message\n    }\n    \n    return NextResponse.json(\n      { \n        error: errorMessage,\n        details: error?.message || 'Unknown error occurred',\n        timestamp: new Date().toISOString()\n      },\n      { status: 500 }\n    )\n  }\n}"
    }
  ],
  "src/app/api/auth/verify-otp/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest } from 'next/server'\nimport { createServiceClient } from '@/lib/supabase/server'\nimport { verifyCustomOTP } from '@/lib/auth/custom-otp'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { welcomeClientEmail } from '@/lib/email/templates/welcome-client'\nimport { apiResponse, handleApiError } from '@/lib/api/responses'\nimport { createSession } from '@/lib/auth/session-handlers'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email, token } = await request.json()\n\n    if (!email || !token) {\n      return apiResponse.error('Email and token are required')\n    }\n\n    // Verify OTP using our custom system\n    const isValid = await verifyCustomOTP(email, token)\n\n    if (!isValid) {\n      return apiResponse.unauthorized('Invalid or expired code')\n    }\n\n    // Create or update client record\n    const supabase = createServiceClient()\n    \n    // Check if this is a new user\n    const { data: existingClient } = await supabase\n      .from('clients')\n      .select('id')\n      .eq('email', email)\n      .single()\n    \n    const isNewUser = !existingClient\n    \n    const { data: client, error } = await supabase\n      .from('clients')\n      .upsert({ \n        email,\n      }, { \n        onConflict: 'email',\n      })\n      .select()\n      .single()\n\n    if (error) {\n      logger.error('Error creating client:', error)\n    }\n    \n    // Send welcome email for new users\n    if (isNewUser && client) {\n      const { subject, html, text } = welcomeClientEmail({\n        clientName: client.name || 'there',\n        dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/client/dashboard`\n      })\n      \n      await sendEmail({ to: email, subject, html, text })\n    }\n\n    // Set session using centralized handler\n    await createSession('CLIENT', {\n      email,\n      userId: client?.id,\n      clientId: client?.id,\n      userType: 'client'\n    })\n\n    return apiResponse.success({ \n      success: true, \n      user: {\n        id: client?.id,\n        email: email,\n      },\n      client\n    })\n  } catch (error) {\n    logger.error('Error verifying OTP:', error)\n    if (error instanceof Error) {\n      return apiResponse.serverError(error.message)\n    }\n    return handleApiError(error, 'auth/verify-otp')\n  }\n}"
    }
  ],
  "src/app/api/blog/admin/send-otp/route.ts": [
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@supabase/supabase-js';\nimport crypto from 'crypto';\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\n);\n\n// Admin email whitelist\nconst ADMIN_EMAIL = 'osamah96@gmail.com';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email } = await request.json();\n\n    // Validate email is the admin email\n    if (email.toLowerCase() !== ADMIN_EMAIL) {\n      return NextResponse.json(\n        { error: 'Access denied. Only the blog administrator can access this area.' },\n        { status: 403 }\n      );\n    }\n\n    // Generate 6-digit OTP\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\n    \n    // Store OTP in database with expiration (5 minutes)\n    const expiresAt = new Date();\n    expiresAt.setMinutes(expiresAt.getMinutes() + 5);\n\n    // Delete any existing OTPs for this email\n    await supabase\n      .from('auth_tokens')\n      .delete()\n      .eq('email', email)\n      .eq('type', 'blog_admin');\n\n    // Insert new OTP\n    const { error: insertError } = await supabase\n      .from('auth_tokens')\n      .insert({\n        email,\n        token: otp, // Changed from 'code' to 'token'\n        type: 'blog_admin',\n        expires_at: expiresAt.toISOString()\n        // No 'used' field - table uses 'used_at' timestamp instead\n      });\n\n    if (insertError) {\n      console.error('Error storing OTP:', insertError);\n      return NextResponse.json(\n        { error: 'Failed to generate verification code' },\n        { status: 500 }\n      );\n    }\n\n    // Send OTP via email using your existing email service\n    try {\n      // Import your email service if it exists, otherwise use Resend directly\n      const resendApiKey = process.env.RESEND_API_KEY || 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8';\n      \n      const emailResponse = await fetch('https://api.resend.com/emails', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${resendApiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          from: 'OneDesigner <hello@onedesigner.app>',\n          to: email,\n          subject: 'üîê Blog Admin Access Code',\n          html: `\n            <!DOCTYPE html>\n            <html>\n              <head>\n                <style>\n                  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }\n                  .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n                  .header { text-align: center; padding: 30px 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px 10px 0 0; }\n                  .header h1 { color: white; margin: 0; font-size: 28px; }\n                  .content { background: #ffffff; padding: 40px 30px; border: 1px solid #e5e7eb; border-radius: 0 0 10px 10px; }\n                  .otp-box { background: #f9fafb; border: 2px solid #f0ad4e; border-radius: 10px; padding: 20px; text-align: center; margin: 30px 0; }\n                  .otp-code { font-size: 36px; font-weight: bold; color: #1f2937; letter-spacing: 8px; }\n                  .warning { background: #fef3c7; border: 1px solid #fbbf24; border-radius: 8px; padding: 15px; margin: 20px 0; }\n                  .footer { text-align: center; padding: 20px; color: #6b7280; font-size: 14px; }\n                </style>\n              </head>\n              <body>\n                <div class=\"container\">\n                  <div class=\"header\">\n                    <h1>üîê Blog Admin Access</h1>\n                  </div>\n                  <div class=\"content\">\n                    <p style=\"font-size: 18px; color: #1f2937; margin-bottom: 20px;\">\n                      Hello Admin,\n                    </p>\n                    <p style=\"color: #4b5563; line-height: 1.6;\">\n                      You've requested access to the OneDesigner Blog Admin panel. Use the verification code below to complete your login:\n                    </p>\n                    \n                    <div class=\"otp-box\">\n                      <div class=\"otp-code\">${otp}</div>\n                      <p style=\"color: #6b7280; margin-top: 10px; font-size: 14px;\">\n                        This code expires in 5 minutes\n                      </p>\n                    </div>\n                    \n                    <div class=\"warning\">\n                      <strong>‚ö†Ô∏è Security Notice:</strong><br>\n                      If you didn't request this code, please ignore this email. Someone may be trying to access your admin panel.\n                    </div>\n                    \n                    <p style=\"color: #6b7280; font-size: 14px; margin-top: 30px;\">\n                      For security reasons, this code will expire in 5 minutes. If you need a new code, you can request one from the login page.\n                    </p>\n                  </div>\n                  <div class=\"footer\">\n                    <p>¬© 2025 OneDesigner. All rights reserved.</p>\n                    <p style=\"margin-top: 10px;\">\n                      This is an automated message. Please do not reply to this email.\n                    </p>\n                  </div>\n                </div>\n              </body>\n            </html>\n          `\n        })\n      });\n\n      if (!emailResponse.ok) {\n        const errorText = await emailResponse.text();\n        console.error('Resend API error:', errorText);\n        return NextResponse.json(\n          { error: 'Failed to send verification email' },\n          { status: 500 }\n        );\n      }\n\n    } catch (emailError) {\n      console.error('Email sending error:', emailError);\n      return NextResponse.json(\n        { error: 'Failed to send verification email' },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json({ \n      success: true, \n      message: 'Verification code sent to your email' \n    });\n\n  } catch (error) {\n    console.error('Send OTP error:', error);\n    return NextResponse.json(\n      { error: 'Failed to process request' },\n      { status: 500 }\n    );\n  }\n}"
    }
  ],
  "src/app/api/blog/admin/send-otp-test/route.ts": [
    {
      "pattern": "https://api.resend.com/emails",
      "replacement": "API_ENDPOINTS.RESEND",
      "line": 3,
      "context": "');\n\n    // Try to send email but don't fail if it doesn't work\n    try {\n      const resendApiKey = process.env.RESEND_API_KEY || 're_KL6peoSX_KsWzKz8JhALUK3BdttMNS8M8';\n      \n      await fetch('https://api.resend.com/emails', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${resendApiKey}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          from: 'OneDesigner <hello@onedesigner.app>',\n          to: email,\n          subject: `üîê Your Blog Admin Code: ${otp}`,\n          html: `\n            <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n              <h2 style=\"color: #333;\">Blog Admin Access Code</h2>\n              <p>Your verification code is:</p>\n              <div style=\"background: #f0ad4e; color: white; font-size: 32px; font-weight: bold; text-align: center; padding: 20px; border-radius: 10px; letter-spacing: 5px;\">\n                ${otp}\n              </div>\n              <p style=\"color: #666; margin-top: 20px;\">This code expires in 5 minutes.</p>\n              <p style=\"color: #666;\">If you didn't request this code, please ignore this email.</p>\n            </div>\n          `\n        })\n      });\n    } catch (emailError) {\n      // Email failed but OTP is still stored - can be retrieved from console\n      console.log('‚ö†Ô∏è Email sending failed, but OTP is stored and logged above');\n    }\n\n    return NextResponse.json({ \n      success: true, \n      message: 'Verification code sent (check console if email fails)' \n    });\n\n  } catch (error) {\n    console.error('Send OTP error:', error);\n    return NextResponse.json(\n      { error: 'Failed to process request' },\n      { status: 500 }\n    );\n  }\n}"
    }
  ],
  "src/app/api/designer/requests/[id]/respond/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { createServiceClient } from '@/lib/supabase/server'\nimport { cookies } from 'next/headers'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { matchAcceptedEmail } from '@/lib/email/templates/match-accepted'\nimport { matchDeclinedEmail } from '@/lib/email/templates/match-declined'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    // Get designer session\n    const cookieStore = cookies()\n    const sessionCookie = cookieStore.get('designer-session')\n    \n    if (!sessionCookie) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const session = JSON.parse(sessionCookie.value)\n    const { designerId } = session\n\n    const { response, message } = await request.json()\n\n    if (!response || !['accept', 'decline'].includes(response)) {\n      return NextResponse.json(\n        { error: 'Invalid response' },\n        { status: 400 }\n      )\n    }\n\n    const supabase = createServiceClient()\n\n    // Verify the request belongs to this designer\n    const { data: designerRequest, error: fetchError } = await supabase\n      .from('designer_requests')\n      .select(`\n        *, \n        match:matches!designer_requests_match_id_fkey(\n          *,\n          client:clients(*),\n          brief:briefs(*)\n        ),\n        designer:designers(*)\n      `)\n      .eq('id', params.id)\n      .eq('designer_id', designerId)\n      .single()\n\n    if (fetchError || !designerRequest) {\n      return NextResponse.json(\n        { error: 'Request not found' },\n        { status: 404 }\n      )\n    }\n\n    if (designerRequest.status !== 'pending') {\n      return NextResponse.json(\n        { error: 'Request already responded' },\n        { status: 400 }\n      )\n    }\n\n    // Update designer request\n    const { error: updateError } = await supabase\n      .from('designer_requests')\n      .update({\n        status: response === 'accept' ? 'accepted' : 'declined',\n        response,\n        message,\n        responded_at: new Date().toISOString()\n      })\n      .eq('id', params.id)\n\n    if (updateError) {\n      throw updateError\n    }\n\n    // Update match status if accepted and send email\n    if (response === 'accept') {\n      await supabase\n        .from('matches')\n        .update({ status: 'accepted' })\n        .eq('id', designerRequest.match_id)\n\n      // Send acceptance email to client\n      if (designerRequest.match?.client?.email) {\n        const { subject, html, text } = matchAcceptedEmail({\n          clientName: designerRequest.match.client.name || 'there',\n          designerName: designerRequest.designer.name,\n          designerEmail: designerRequest.designer.email,\n          designerPhone: designerRequest.designer.phone,\n          designerWebsite: designerRequest.designer.website,\n          projectType: designerRequest.match.brief?.project_type || 'design',\n          dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/client/dashboard`\n        })\n\n        await sendEmail({ to: designerRequest.match.client.email, subject, html, text })\n      }\n    } else {\n      // Send decline email to client\n      if (designerRequest.match?.client?.email) {\n        const { subject, html, text } = matchDeclinedEmail({\n          clientName: designerRequest.match.client.name || 'there',\n          designerName: designerRequest.designer.name,\n          projectType: designerRequest.match.brief?.project_type || 'design',\n          dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/client/dashboard`\n        })\n\n        await sendEmail({ to: designerRequest.match.client.email, subject, html, text })\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: response === 'accept' \n        ? 'Request accepted successfully' \n        : 'Request declined'\n    })\n  } catch (error) {\n    logger.error('Error responding to request:', error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Failed to respond' },\n      { status: 500 }\n    )\n  }\n}"
    },
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { createServiceClient } from '@/lib/supabase/server'\nimport { cookies } from 'next/headers'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { matchAcceptedEmail } from '@/lib/email/templates/match-accepted'\nimport { matchDeclinedEmail } from '@/lib/email/templates/match-declined'\nimport { logger } from '@/lib/core/logging-service'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    // Get designer session\n    const cookieStore = cookies()\n    const sessionCookie = cookieStore.get('designer-session')\n    \n    if (!sessionCookie) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const session = JSON.parse(sessionCookie.value)\n    const { designerId } = session\n\n    const { response, message } = await request.json()\n\n    if (!response || !['accept', 'decline'].includes(response)) {\n      return NextResponse.json(\n        { error: 'Invalid response' },\n        { status: 400 }\n      )\n    }\n\n    const supabase = createServiceClient()\n\n    // Verify the request belongs to this designer\n    const { data: designerRequest, error: fetchError } = await supabase\n      .from('designer_requests')\n      .select(`\n        *, \n        match:matches!designer_requests_match_id_fkey(\n          *,\n          client:clients(*),\n          brief:briefs(*)\n        ),\n        designer:designers(*)\n      `)\n      .eq('id', params.id)\n      .eq('designer_id', designerId)\n      .single()\n\n    if (fetchError || !designerRequest) {\n      return NextResponse.json(\n        { error: 'Request not found' },\n        { status: 404 }\n      )\n    }\n\n    if (designerRequest.status !== 'pending') {\n      return NextResponse.json(\n        { error: 'Request already responded' },\n        { status: 400 }\n      )\n    }\n\n    // Update designer request\n    const { error: updateError } = await supabase\n      .from('designer_requests')\n      .update({\n        status: response === 'accept' ? 'accepted' : 'declined',\n        response,\n        message,\n        responded_at: new Date().toISOString()\n      })\n      .eq('id', params.id)\n\n    if (updateError) {\n      throw updateError\n    }\n\n    // Update match status if accepted and send email\n    if (response === 'accept') {\n      await supabase\n        .from('matches')\n        .update({ status: 'accepted' })\n        .eq('id', designerRequest.match_id)\n\n      // Send acceptance email to client\n      if (designerRequest.match?.client?.email) {\n        const { subject, html, text } = matchAcceptedEmail({\n          clientName: designerRequest.match.client.name || 'there',\n          designerName: designerRequest.designer.name,\n          designerEmail: designerRequest.designer.email,\n          designerPhone: designerRequest.designer.phone,\n          designerWebsite: designerRequest.designer.website,\n          projectType: designerRequest.match.brief?.project_type || 'design',\n          dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/client/dashboard`\n        })\n\n        await sendEmail({ to: designerRequest.match.client.email, subject, html, text })\n      }\n    } else {\n      // Send decline email to client\n      if (designerRequest.match?.client?.email) {\n        const { subject, html, text } = matchDeclinedEmail({\n          clientName: designerRequest.match.client.name || 'there',\n          designerName: designerRequest.designer.name,\n          projectType: designerRequest.match.brief?.project_type || 'design',\n          dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/client/dashboard`\n        })\n\n        await sendEmail({ to: designerRequest.match.client.email, subject, html, text })\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: response === 'accept' \n        ? 'Request accepted successfully' \n        : 'Request declined'\n    })\n  } catch (error) {\n    logger.error('Error responding to request:', error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : 'Failed to respond' },\n      { status: 500 }\n    )\n  }\n}"
    }
  ],
  "src/app/api/admin/designers/[id]/reject/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest, NextResponse } from 'next/server'\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/server'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { logger } from '@/lib/core/logging-service'\nimport { createDesignerRejectionEmailMarcStyle } from '@/lib/email/templates/marc-lou-style'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    // Check admin session\n    const cookieStore = cookies()\n    const sessionCookie = cookieStore.get('admin-session')\n    \n    if (!sessionCookie) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const { reason } = await request.json()\n    \n    if (!reason) {\n      return NextResponse.json(\n        { error: 'Rejection reason is required' },\n        { status: 400 }\n      )\n    }\n\n    const supabase = createServiceClient()\n    \n    // Update designer with rejection status (using existing columns)\n    // Note: status, rejection_seen, rejection_count, last_rejection_at columns\n    // may not exist yet, so we only update what's available\n    const updateData: any = {\n      is_approved: false,\n      rejection_reason: reason,\n      updated_at: new Date().toISOString()\n    }\n    \n    // Try to update with new columns if they exist\n    // This will be ignored if columns don't exist\n    const { data: designer, error } = await supabase\n      .from('designers')\n      .update(updateData)\n      .eq('id', params.id)\n      .select()\n      .single()\n\n    if (error || !designer) {\n      logger.error('Error rejecting designer:', error)\n      return NextResponse.json(\n        { error: 'Failed to reject designer' },\n        { status: 500 }\n      )\n    }\n\n    // Send rejection email to designer with Marc Lou style template (no token needed)\n    try {\n      const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'\n      const loginUrl = `${baseUrl}/designer/login`\n      \n      const emailTemplate = createDesignerRejectionEmailMarcStyle({\n        designerName: designer.first_name,\n        rejectionReason: reason,\n        loginUrl\n      })\n      \n      await sendEmail({\n        to: designer.email,\n        subject: emailTemplate.subject,\n        html: emailTemplate.html,\n        text: emailTemplate.text\n      })\n      \n      logger.info(`Rejection email sent to designer ${designer.id} - they can login to update their profile`)\n    } catch (emailError) {\n      logger.error('Failed to send rejection email:', emailError)\n      // Don't fail the rejection if email fails\n    }\n\n    return NextResponse.json({\n      success: true\n    })\n  } catch (error) {\n    logger.error('Error in reject route:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}"
    }
  ],
  "src/app/api/admin/designers/[id]/approve/route.ts": [
    {
      "pattern": "https://onedesigner.app",
      "replacement": "PRODUCTION_URLS.APP.BASE",
      "line": 1,
      "context": "import { NextRequest } from 'next/server'\nimport { cookies } from 'next/headers'\nimport { createServiceClient } from '@/lib/supabase/server'\nimport { sendEmail } from '@/lib/email/send-email'\nimport { apiResponse, handleApiError } from '@/lib/api/responses'\nimport { AUTH_COOKIES } from '@/lib/constants'\nimport { logger } from '@/lib/core/logging-service'\nimport { createDesignerApprovalEmailMarcStyle } from '@/lib/email/templates/marc-lou-style'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    // Check admin session\n    const cookieStore = cookies()\n    const sessionCookie = cookieStore.get(AUTH_COOKIES.ADMIN)\n    \n    if (!sessionCookie) {\n      return apiResponse.unauthorized()\n    }\n\n    const session = JSON.parse(sessionCookie.value)\n    const supabase = createServiceClient()\n    \n    logger.info(`=== APPROVING DESIGNER ${params.id} ===`)\n    \n    // Update designer approval status\n    const { data: designer, error } = await supabase\n      .from('designers')\n      .update({\n        is_approved: true,\n        approved_at: new Date().toISOString(),\n        approved_by: session.adminId,\n        last_approved_at: new Date().toISOString(),\n        edited_after_approval: false // Reset the edit flag when approving\n      })\n      .eq('id', params.id)\n      .select()\n      .single()\n\n    if (error || !designer) {\n      logger.error('Error approving designer:', error)\n      logger.error('Designer ID:', params.id)\n      logger.error('Admin ID:', session.adminId)\n      return apiResponse.serverError('Failed to approve designer', error)\n    }\n\n    logger.info(`‚úÖ Designer approved successfully:`, designer.id)\n    logger.info(`   Name: ${designer.first_name} ${designer.last_name}`)\n    logger.info(`   Email: ${designer.email}`)\n    logger.info(`   is_approved: ${designer.is_approved}`)\n\n    // Send approval email using Marc Lou style template\n    try {\n      const emailTemplate = createDesignerApprovalEmailMarcStyle({\n        designerName: designer.first_name,\n        dashboardUrl: `${process.env.NEXT_PUBLIC_APP_URL || 'https://onedesigner.app'}/designer/login`\n      })\n      \n      await sendEmail({\n        to: designer.email,\n        subject: emailTemplate.subject,\n        html: emailTemplate.html,\n        text: emailTemplate.text\n      })\n    } catch (emailError) {\n      logger.error('Failed to send approval email:', emailError)\n      // Don't fail the approval if email fails\n    }\n\n    return apiResponse.success({\n      success: true,\n      designer: {\n        id: designer.id,\n        email: designer.email,\n        name: `${designer.first_name} ${designer.last_name}`\n      }\n    })\n  } catch (error) {\n    return handleApiError(error, 'admin/designers/approve')\n  }\n}"
    }
  ]
}